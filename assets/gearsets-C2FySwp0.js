import{aY as vn,d as yt,aZ as gn,al as $n,az as wn,ao as bn}from"./_plugin-vue_export-helper-BlgKMbjc.js";var En=/\s/;function Sn(e){for(var t=e.length;t--&&En.test(e.charAt(t)););return t}var Pn=/^\s+/;function Nn(e){return e&&e.slice(0,Sn(e)+1).replace(Pn,"")}var Gt=NaN,Rn=/^[-+]0x[0-9a-f]+$/i,On=/^0b[01]+$/i,kn=/^0o[0-7]+$/i,jn=parseInt;function Ht(e){if(typeof e=="number")return e;if(vn(e))return Gt;if(yt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=yt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Nn(e);var y=On.test(e);return y||kn.test(e)?jn(e.slice(2),y?2:8):Rn.test(e)?Gt:+e}var Nt=function(){return gn.Date.now()},Tn="Expected a function",In=Math.max,qn=Math.min;function Cn(e,t,y){var d,b,a,f,l,h,w=0,v=!1,P=!1,g=!0;if(typeof e!="function")throw new TypeError(Tn);t=Ht(t)||0,yt(y)&&(v=!!y.leading,P="maxWait"in y,a=P?In(Ht(y.maxWait)||0,t):a,g="trailing"in y?!!y.trailing:g);function _(u){var $=d,j=b;return d=b=void 0,w=u,f=e.apply(j,$),f}function p(u){return w=u,l=setTimeout(o,t),v?_(u):f}function E(u){var $=u-h,j=u-w,C=t-$;return P?qn(C,a-j):C}function s(u){var $=u-h,j=u-w;return h===void 0||$>=t||$<0||P&&j>=a}function o(){var u=Nt();if(s(u))return r(u);l=setTimeout(o,E(u))}function r(u){return l=void 0,g&&d?_(u):(d=b=void 0,f)}function i(){l!==void 0&&clearTimeout(l),w=0,d=h=b=l=void 0}function m(){return l===void 0?f:r(Nt())}function n(){var u=Nt(),$=s(u);if(d=arguments,b=this,h=u,$){if(l===void 0)return p(h);if(P)return clearTimeout(l),l=setTimeout(o,t),_(h)}return l===void 0&&(l=setTimeout(o,t)),f}return n.cancel=i,n.flush=m,n}var Mn="Expected a function";function xs(e,t,y){var d=!0,b=!0;if(typeof e!="function")throw new TypeError(Mn);return yt(y)&&(d="leading"in y?!!y.leading:d,b="trailing"in y?!!y.trailing:b),Cn(e,t,{leading:d,maxWait:t,trailing:b})}var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ee=$n(()=>import("./app_wasm-BPL6XvG_.js"),[]);const Vt={type:"object",properties:{level:{type:"number"},craftsmanship:{type:"number"},control:{type:"number"},craft_points:{type:"number"}},required:["level","craftsmanship","control","craft_points"],additionalProperties:!1};var An=(e=>(e.Unused="Unused",e.Active="Active",e.Used="Used",e))(An||{}),Vn=(e=>(e.Normal="Normal",e.Good="Good",e.Excellent="Excellent",e.Poor="Poor",e.Centered="Centered",e.Sturdy="Sturdy",e.Pliant="Pliant",e.Malleable="Malleable",e.Primed="Primed",e.GoodOmen="GoodOmen",e))(Vn||{}),be=(e=>(e.Carpenter="carpenter",e.Blacksmith="blacksmith",e.Armorer="armorer",e.Goldsmith="goldsmith",e.Leatherworker="leatherworker",e.Weaver="weaver",e.Alchemist="alchemist",e.Culinarian="culinarian",e))(be||{});const an={type:"string",enum:Object.values(be)};var on=(e=>(e.BasicSynthesis="basic_synthesis",e.BasicTouch="basic_touch",e.MastersMend="masters_mend",e.HastyTouch="hasty_touch",e.RapidSynthesis="rapid_synthesis",e.Observe="observe",e.TricksOfTheTrade="tricks_of_the_trade",e.WasteNot="waste_not",e.Veneration="veneration",e.StandardTouch="standard_touch",e.GreatStrides="great_strides",e.Innovation="innovation",e.FinalAppraisal="final_appraisal",e.WasteNotII="waste_not_ii",e.ByregotsBlessing="byregot_s_blessing",e.PreciseTouch="precise_touch",e.MuscleMemory="muscle_memory",e.CarefulSynthesis="careful_synthesis",e.Manipulation="manipulation",e.PrudentTouch="prudent_touch",e.Reflect="reflect",e.PreparatoryTouch="preparatory_touch",e.Groundwork="groundwork",e.DelicateSynthesis="delicate_synthesis",e.IntensiveSynthesis="intensive_synthesis",e.TrainedEye="trained_eye",e.AdvancedTouch="advanced_touch",e.PrudentSynthesis="prudent_synthesis",e.TrainedFinesse="trained_finesse",e.CarefulObservation="careful_observation",e.HeartAndSoul="heart_and_soul",e.RefinedTouch="refined_touch",e.DaringTouch="daring_touch",e.ImmaculateMend="immaculate_mend",e.QuickInnovation="quick_innovation",e.TrainedPerfection="trained_perfection",e.RapidSynthesisFail="rapid_synthesis_fail",e.HastyTouchFail="hasty_touch_fail",e.DaringTouchFail="daring_touch_fail",e))(on||{});Object.values(on);const un=new Map([["basic_synthesis",2.17],["basic_touch",2.17],["masters_mend",2.17],["hasty_touch",2.17],["rapid_synthesis",2.17],["observe",2.17],["tricks_of_the_trade",2.17],["waste_not",1.07],["veneration",1.07],["standard_touch",2.17],["great_strides",1.07],["innovation",1.07],["final_appraisal",1.07],["waste_not_ii",1.07],["byregot_s_blessing",2.17],["precise_touch",2.17],["muscle_memory",2.17],["careful_synthesis",2.17],["manipulation",1.07],["prudent_touch",2.17],["reflect",2.17],["preparatory_touch",2.17],["groundwork",2.17],["delicate_synthesis",2.17],["intensive_synthesis",2.17],["trained_eye",2.17],["advanced_touch",2.17],["prudent_synthesis",2.17],["trained_finesse",2.17],["careful_observation",2.17],["heart_and_soul",2.17],["refined_touch",2.17],["daring_touch",2.17],["immaculate_mend",2.17],["quick_innovation",2.17],["trained_perfection",2.17]]),ta=async(e,t,y,d)=>({rlv:e,job_level:e.class_job_level,difficulty:Math.floor(e.difficulty*t/100),quality:Math.floor(e.quality*y/100),durability:Math.floor(e.durability*d/100),conditions_flag:e.conditions_flag});async function ra(e,t){{let{new_status:y}=await Ee;return y(e,t)}}async function na(e,t){{let{simulate:y}=await Ee;return y(e,t)}}async function sa(e,t){{let{simulate_detail:y}=await Ee;return y(e,t)}}async function aa(e,t,y){{let{simulate_one_step:d}=await Ee;return d(e,t,y)}}async function ia(e){{let{high_quality_probability:t}=await Ee;return t(e)}}async function oa(e,t){{let{allowed_list:y}=await Ee;return y(e,t)}}async function ua(e,t){{let{craftpoints_list:y}=await Ee;return y(e,t)}}function ca(...e){return e.map(t=>Math.ceil(un.get(t)??0)).reduce((t,y)=>t+y,0)}function la(...e){return e.map(t=>un.get(t)??0).reduce((t,y)=>t+y,0)}const Oe=wn.format,Un={type:"object",properties:{id:{type:"number"},name:{type:"string",nullable:!0},value:Vt,compatibleJobs:{type:"array",items:an,uniqueItems:!0}},required:["id","value","compatibleJobs"]},Rt={level:100,craftsmanship:4628,control:4221,craft_points:533},Fn=Object.values(be).map(e=>e);function da(e){if(e.id==0)return Oe("default");if(e.name!=null&&e.name.length>0)return Fn.includes(e.name)?Oe(e.name):e.name;if(e.compatibleJobs!=null)switch(e.compatibleJobs.length){case 1:return Oe(e.compatibleJobs[0]);case 8:return Oe("common")}return Oe("custom",{id:e.id})}var Ie={exports:{}},Ot={},he={},ge={},kt={},jt={},Tt={},Jt;function _t(){return Jt||(Jt=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class y extends t{constructor(r){if(super(),!e.IDENTIFIER.test(r))throw new Error("CodeGen: name must be a valid identifier");this.str=r}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=y;class d extends t{constructor(r){super(),this._items=typeof r=="string"?[r]:r}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const r=this._items[0];return r===""||r==='""'}get str(){var r;return(r=this._str)!==null&&r!==void 0?r:this._str=this._items.reduce((i,m)=>`${i}${m}`,"")}get names(){var r;return(r=this._names)!==null&&r!==void 0?r:this._names=this._items.reduce((i,m)=>(m instanceof y&&(i[m.str]=(i[m.str]||0)+1),i),{})}}e._Code=d,e.nil=new d("");function b(o,...r){const i=[o[0]];let m=0;for(;m<r.length;)l(i,r[m]),i.push(o[++m]);return new d(i)}e._=b;const a=new d("+");function f(o,...r){const i=[_(o[0])];let m=0;for(;m<r.length;)i.push(a),l(i,r[m]),i.push(a,_(o[++m]));return h(i),new d(i)}e.str=f;function l(o,r){r instanceof d?o.push(...r._items):r instanceof y?o.push(r):o.push(P(r))}e.addCodeArg=l;function h(o){let r=1;for(;r<o.length-1;){if(o[r]===a){const i=w(o[r-1],o[r+1]);if(i!==void 0){o.splice(r-1,3,i);continue}o[r++]="+"}r++}}function w(o,r){if(r==='""')return o;if(o==='""')return r;if(typeof o=="string")return r instanceof y||o[o.length-1]!=='"'?void 0:typeof r!="string"?`${o.slice(0,-1)}${r}"`:r[0]==='"'?o.slice(0,-1)+r.slice(1):void 0;if(typeof r=="string"&&r[0]==='"'&&!(o instanceof y))return`"${o}${r.slice(1)}`}function v(o,r){return r.emptyStr()?o:o.emptyStr()?r:f`${o}${r}`}e.strConcat=v;function P(o){return typeof o=="number"||typeof o=="boolean"||o===null?o:_(Array.isArray(o)?o.join(","):o)}function g(o){return new d(_(o))}e.stringify=g;function _(o){return JSON.stringify(o).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=_;function p(o){return typeof o=="string"&&e.IDENTIFIER.test(o)?new d(`.${o}`):b`[${o}]`}e.getProperty=p;function E(o){if(typeof o=="string"&&e.IDENTIFIER.test(o))return new d(`${o}`);throw new Error(`CodeGen: invalid export name: ${o}, use explicit $id name mapping`)}e.getEsmExportName=E;function s(o){return new d(o.toString())}e.regexpCode=s})(Tt)),Tt}var It={},Wt;function Bt(){return Wt||(Wt=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=_t();class y extends Error{constructor(w){super(`CodeGen: "code" for ${w} not defined`),this.value=w.value}}var d;(function(h){h[h.Started=0]="Started",h[h.Completed=1]="Completed"})(d||(e.UsedValueState=d={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class b{constructor({prefixes:w,parent:v}={}){this._names={},this._prefixes=w,this._parent=v}toName(w){return w instanceof t.Name?w:this.name(w)}name(w){return new t.Name(this._newName(w))}_newName(w){const v=this._names[w]||this._nameGroup(w);return`${w}${v.index++}`}_nameGroup(w){var v,P;if(!((P=(v=this._parent)===null||v===void 0?void 0:v._prefixes)===null||P===void 0)&&P.has(w)||this._prefixes&&!this._prefixes.has(w))throw new Error(`CodeGen: prefix "${w}" is not allowed in this scope`);return this._names[w]={prefix:w,index:0}}}e.Scope=b;class a extends t.Name{constructor(w,v){super(v),this.prefix=w}setValue(w,{property:v,itemIndex:P}){this.value=w,this.scopePath=(0,t._)`.${new t.Name(v)}[${P}]`}}e.ValueScopeName=a;const f=(0,t._)`\n`;class l extends b{constructor(w){super(w),this._values={},this._scope=w.scope,this.opts={...w,_n:w.lines?f:t.nil}}get(){return this._scope}name(w){return new a(w,this._newName(w))}value(w,v){var P;if(v.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const g=this.toName(w),{prefix:_}=g,p=(P=v.key)!==null&&P!==void 0?P:v.ref;let E=this._values[_];if(E){const r=E.get(p);if(r)return r}else E=this._values[_]=new Map;E.set(p,g);const s=this._scope[_]||(this._scope[_]=[]),o=s.length;return s[o]=v.ref,g.setValue(v,{property:_,itemIndex:o}),g}getValue(w,v){const P=this._values[w];if(P)return P.get(v)}scopeRefs(w,v=this._values){return this._reduceValues(v,P=>{if(P.scopePath===void 0)throw new Error(`CodeGen: name "${P}" has no value`);return(0,t._)`${w}${P.scopePath}`})}scopeCode(w=this._values,v,P){return this._reduceValues(w,g=>{if(g.value===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return g.value.code},v,P)}_reduceValues(w,v,P={},g){let _=t.nil;for(const p in w){const E=w[p];if(!E)continue;const s=P[p]=P[p]||new Map;E.forEach(o=>{if(s.has(o))return;s.set(o,d.Started);let r=v(o);if(r){const i=this.opts.es5?e.varKinds.var:e.varKinds.const;_=(0,t._)`${_}${i} ${o} = ${r};${this.opts._n}`}else if(r=g?.(o))_=(0,t._)`${_}${r}${this.opts._n}`;else throw new y(o);s.set(o,d.Completed)})}return _}}e.ValueScope=l})(It)),It}var Qt;function J(){return Qt||(Qt=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=_t(),y=Bt();var d=_t();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return d.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return d.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return d.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return d.Name}});var b=Bt();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return b.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return b.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return b.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return b.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class a{optimizeNodes(){return this}optimizeNames(c,S){return this}}class f extends a{constructor(c,S,T){super(),this.varKind=c,this.name=S,this.rhs=T}render({es5:c,_n:S}){const T=c?y.varKinds.var:this.varKind,U=this.rhs===void 0?"":` = ${this.rhs}`;return`${T} ${this.name}${U};`+S}optimizeNames(c,S){if(c[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,c,S)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class l extends a{constructor(c,S,T){super(),this.lhs=c,this.rhs=S,this.sideEffects=T}render({_n:c}){return`${this.lhs} = ${this.rhs};`+c}optimizeNames(c,S){if(!(this.lhs instanceof t.Name&&!c[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,c,S),this}get names(){const c=this.lhs instanceof t.Name?{}:{...this.lhs.names};return K(c,this.rhs)}}class h extends l{constructor(c,S,T,U){super(c,T,U),this.op=S}render({_n:c}){return`${this.lhs} ${this.op}= ${this.rhs};`+c}}class w extends a{constructor(c){super(),this.label=c,this.names={}}render({_n:c}){return`${this.label}:`+c}}class v extends a{constructor(c){super(),this.label=c,this.names={}}render({_n:c}){return`break${this.label?` ${this.label}`:""};`+c}}class P extends a{constructor(c){super(),this.error=c}render({_n:c}){return`throw ${this.error};`+c}get names(){return this.error.names}}class g extends a{constructor(c){super(),this.code=c}render({_n:c}){return`${this.code};`+c}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(c,S){return this.code=B(this.code,c,S),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class _ extends a{constructor(c=[]){super(),this.nodes=c}render(c){return this.nodes.reduce((S,T)=>S+T.render(c),"")}optimizeNodes(){const{nodes:c}=this;let S=c.length;for(;S--;){const T=c[S].optimizeNodes();Array.isArray(T)?c.splice(S,1,...T):T?c[S]=T:c.splice(S,1)}return c.length>0?this:void 0}optimizeNames(c,S){const{nodes:T}=this;let U=T.length;for(;U--;){const z=T[U];z.optimizeNames(c,S)||(x(c,z.names),T.splice(U,1))}return T.length>0?this:void 0}get names(){return this.nodes.reduce((c,S)=>L(c,S.names),{})}}class p extends _{render(c){return"{"+c._n+super.render(c)+"}"+c._n}}class E extends _{}class s extends p{}s.kind="else";class o extends p{constructor(c,S){super(S),this.condition=c}render(c){let S=`if(${this.condition})`+super.render(c);return this.else&&(S+="else "+this.else.render(c)),S}optimizeNodes(){super.optimizeNodes();const c=this.condition;if(c===!0)return this.nodes;let S=this.else;if(S){const T=S.optimizeNodes();S=this.else=Array.isArray(T)?new s(T):T}if(S)return c===!1?S instanceof o?S:S.nodes:this.nodes.length?this:new o(de(c),S instanceof o?[S]:S.nodes);if(!(c===!1||!this.nodes.length))return this}optimizeNames(c,S){var T;if(this.else=(T=this.else)===null||T===void 0?void 0:T.optimizeNames(c,S),!!(super.optimizeNames(c,S)||this.else))return this.condition=B(this.condition,c,S),this}get names(){const c=super.names;return K(c,this.condition),this.else&&L(c,this.else.names),c}}o.kind="if";class r extends p{}r.kind="for";class i extends r{constructor(c){super(),this.iteration=c}render(c){return`for(${this.iteration})`+super.render(c)}optimizeNames(c,S){if(super.optimizeNames(c,S))return this.iteration=B(this.iteration,c,S),this}get names(){return L(super.names,this.iteration.names)}}class m extends r{constructor(c,S,T,U){super(),this.varKind=c,this.name=S,this.from=T,this.to=U}render(c){const S=c.es5?y.varKinds.var:this.varKind,{name:T,from:U,to:z}=this;return`for(${S} ${T}=${U}; ${T}<${z}; ${T}++)`+super.render(c)}get names(){const c=K(super.names,this.from);return K(c,this.to)}}class n extends r{constructor(c,S,T,U){super(),this.loop=c,this.varKind=S,this.name=T,this.iterable=U}render(c){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(c)}optimizeNames(c,S){if(super.optimizeNames(c,S))return this.iterable=B(this.iterable,c,S),this}get names(){return L(super.names,this.iterable.names)}}class u extends p{constructor(c,S,T){super(),this.name=c,this.args=S,this.async=T}render(c){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(c)}}u.kind="func";class $ extends _{render(c){return"return "+super.render(c)}}$.kind="return";class j extends p{render(c){let S="try"+super.render(c);return this.catch&&(S+=this.catch.render(c)),this.finally&&(S+=this.finally.render(c)),S}optimizeNodes(){var c,S;return super.optimizeNodes(),(c=this.catch)===null||c===void 0||c.optimizeNodes(),(S=this.finally)===null||S===void 0||S.optimizeNodes(),this}optimizeNames(c,S){var T,U;return super.optimizeNames(c,S),(T=this.catch)===null||T===void 0||T.optimizeNames(c,S),(U=this.finally)===null||U===void 0||U.optimizeNames(c,S),this}get names(){const c=super.names;return this.catch&&L(c,this.catch.names),this.finally&&L(c,this.finally.names),c}}class C extends p{constructor(c){super(),this.error=c}render(c){return`catch(${this.error})`+super.render(c)}}C.kind="catch";class A extends p{render(c){return"finally"+super.render(c)}}A.kind="finally";class V{constructor(c,S={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...S,_n:S.lines?`
`:""},this._extScope=c,this._scope=new y.Scope({parent:c}),this._nodes=[new E]}toString(){return this._root.render(this.opts)}name(c){return this._scope.name(c)}scopeName(c){return this._extScope.name(c)}scopeValue(c,S){const T=this._extScope.value(c,S);return(this._values[T.prefix]||(this._values[T.prefix]=new Set)).add(T),T}getScopeValue(c,S){return this._extScope.getValue(c,S)}scopeRefs(c){return this._extScope.scopeRefs(c,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(c,S,T,U){const z=this._scope.toName(S);return T!==void 0&&U&&(this._constants[z.str]=T),this._leafNode(new f(c,z,T)),z}const(c,S,T){return this._def(y.varKinds.const,c,S,T)}let(c,S,T){return this._def(y.varKinds.let,c,S,T)}var(c,S,T){return this._def(y.varKinds.var,c,S,T)}assign(c,S,T){return this._leafNode(new l(c,S,T))}add(c,S){return this._leafNode(new h(c,e.operators.ADD,S))}code(c){return typeof c=="function"?c():c!==t.nil&&this._leafNode(new g(c)),this}object(...c){const S=["{"];for(const[T,U]of c)S.length>1&&S.push(","),S.push(T),(T!==U||this.opts.es5)&&(S.push(":"),(0,t.addCodeArg)(S,U));return S.push("}"),new t._Code(S)}if(c,S,T){if(this._blockNode(new o(c)),S&&T)this.code(S).else().code(T).endIf();else if(S)this.code(S).endIf();else if(T)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(c){return this._elseNode(new o(c))}else(){return this._elseNode(new s)}endIf(){return this._endBlockNode(o,s)}_for(c,S){return this._blockNode(c),S&&this.code(S).endFor(),this}for(c,S){return this._for(new i(c),S)}forRange(c,S,T,U,z=this.opts.es5?y.varKinds.var:y.varKinds.let){const X=this._scope.toName(c);return this._for(new m(z,X,S,T),()=>U(X))}forOf(c,S,T,U=y.varKinds.const){const z=this._scope.toName(c);if(this.opts.es5){const X=S instanceof t.Name?S:this.var("_arr",S);return this.forRange("_i",0,(0,t._)`${X}.length`,W=>{this.var(z,(0,t._)`${X}[${W}]`),T(z)})}return this._for(new n("of",U,z,S),()=>T(z))}forIn(c,S,T,U=this.opts.es5?y.varKinds.var:y.varKinds.const){if(this.opts.ownProperties)return this.forOf(c,(0,t._)`Object.keys(${S})`,T);const z=this._scope.toName(c);return this._for(new n("in",U,z,S),()=>T(z))}endFor(){return this._endBlockNode(r)}label(c){return this._leafNode(new w(c))}break(c){return this._leafNode(new v(c))}return(c){const S=new $;if(this._blockNode(S),this.code(c),S.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode($)}try(c,S,T){if(!S&&!T)throw new Error('CodeGen: "try" without "catch" and "finally"');const U=new j;if(this._blockNode(U),this.code(c),S){const z=this.name("e");this._currNode=U.catch=new C(z),S(z)}return T&&(this._currNode=U.finally=new A,this.code(T)),this._endBlockNode(C,A)}throw(c){return this._leafNode(new P(c))}block(c,S){return this._blockStarts.push(this._nodes.length),c&&this.code(c).endBlock(S),this}endBlock(c){const S=this._blockStarts.pop();if(S===void 0)throw new Error("CodeGen: not in self-balancing block");const T=this._nodes.length-S;if(T<0||c!==void 0&&T!==c)throw new Error(`CodeGen: wrong number of nodes: ${T} vs ${c} expected`);return this._nodes.length=S,this}func(c,S=t.nil,T,U){return this._blockNode(new u(c,S,T)),U&&this.code(U).endFunc(),this}endFunc(){return this._endBlockNode(u)}optimize(c=1){for(;c-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(c){return this._currNode.nodes.push(c),this}_blockNode(c){this._currNode.nodes.push(c),this._nodes.push(c)}_endBlockNode(c,S){const T=this._currNode;if(T instanceof c||S&&T instanceof S)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${S?`${c.kind}/${S.kind}`:c.kind}"`)}_elseNode(c){const S=this._currNode;if(!(S instanceof o))throw new Error('CodeGen: "else" without "if"');return this._currNode=S.else=c,this}get _root(){return this._nodes[0]}get _currNode(){const c=this._nodes;return c[c.length-1]}set _currNode(c){const S=this._nodes;S[S.length-1]=c}}e.CodeGen=V;function L(k,c){for(const S in c)k[S]=(k[S]||0)+(c[S]||0);return k}function K(k,c){return c instanceof t._CodeOrName?L(k,c.names):k}function B(k,c,S){if(k instanceof t.Name)return T(k);if(!U(k))return k;return new t._Code(k._items.reduce((z,X)=>(X instanceof t.Name&&(X=T(X)),X instanceof t._Code?z.push(...X._items):z.push(X),z),[]));function T(z){const X=S[z.str];return X===void 0||c[z.str]!==1?z:(delete c[z.str],X)}function U(z){return z instanceof t._Code&&z._items.some(X=>X instanceof t.Name&&c[X.str]===1&&S[X.str]!==void 0)}}function x(k,c){for(const S in c)k[S]=(k[S]||0)-(c[S]||0)}function de(k){return typeof k=="boolean"||typeof k=="number"||k===null?!k:(0,t._)`!${q(k)}`}e.not=de;const fe=R(e.operators.AND);function Z(...k){return k.reduce(fe)}e.and=Z;const ye=R(e.operators.OR);function M(...k){return k.reduce(ye)}e.or=M;function R(k){return(c,S)=>c===t.nil?S:S===t.nil?c:(0,t._)`${q(c)} ${k} ${q(S)}`}function q(k){return k instanceof t.Name?k:(0,t._)`(${k})`}})(jt)),jt}var G={},Xt;function Q(){if(Xt)return G;Xt=1,Object.defineProperty(G,"__esModule",{value:!0}),G.checkStrictMode=G.getErrorPath=G.Type=G.useFunc=G.setEvaluated=G.evaluatedPropsToName=G.mergeEvaluated=G.eachItem=G.unescapeJsonPointer=G.escapeJsonPointer=G.escapeFragment=G.unescapeFragment=G.schemaRefOrVal=G.schemaHasRulesButRef=G.schemaHasRules=G.checkUnknownRules=G.alwaysValidSchema=G.toHash=void 0;const e=J(),t=_t();function y(n){const u={};for(const $ of n)u[$]=!0;return u}G.toHash=y;function d(n,u){return typeof u=="boolean"?u:Object.keys(u).length===0?!0:(b(n,u),!a(u,n.self.RULES.all))}G.alwaysValidSchema=d;function b(n,u=n.schema){const{opts:$,self:j}=n;if(!$.strictSchema||typeof u=="boolean")return;const C=j.RULES.keywords;for(const A in u)C[A]||m(n,`unknown keyword: "${A}"`)}G.checkUnknownRules=b;function a(n,u){if(typeof n=="boolean")return!n;for(const $ in n)if(u[$])return!0;return!1}G.schemaHasRules=a;function f(n,u){if(typeof n=="boolean")return!n;for(const $ in n)if($!=="$ref"&&u.all[$])return!0;return!1}G.schemaHasRulesButRef=f;function l({topSchemaRef:n,schemaPath:u},$,j,C){if(!C){if(typeof $=="number"||typeof $=="boolean")return $;if(typeof $=="string")return(0,e._)`${$}`}return(0,e._)`${n}${u}${(0,e.getProperty)(j)}`}G.schemaRefOrVal=l;function h(n){return P(decodeURIComponent(n))}G.unescapeFragment=h;function w(n){return encodeURIComponent(v(n))}G.escapeFragment=w;function v(n){return typeof n=="number"?`${n}`:n.replace(/~/g,"~0").replace(/\//g,"~1")}G.escapeJsonPointer=v;function P(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}G.unescapeJsonPointer=P;function g(n,u){if(Array.isArray(n))for(const $ of n)u($);else u(n)}G.eachItem=g;function _({mergeNames:n,mergeToName:u,mergeValues:$,resultToName:j}){return(C,A,V,L)=>{const K=V===void 0?A:V instanceof e.Name?(A instanceof e.Name?n(C,A,V):u(C,A,V),V):A instanceof e.Name?(u(C,V,A),A):$(A,V);return L===e.Name&&!(K instanceof e.Name)?j(C,K):K}}G.mergeEvaluated={props:_({mergeNames:(n,u,$)=>n.if((0,e._)`${$} !== true && ${u} !== undefined`,()=>{n.if((0,e._)`${u} === true`,()=>n.assign($,!0),()=>n.assign($,(0,e._)`${$} || {}`).code((0,e._)`Object.assign(${$}, ${u})`))}),mergeToName:(n,u,$)=>n.if((0,e._)`${$} !== true`,()=>{u===!0?n.assign($,!0):(n.assign($,(0,e._)`${$} || {}`),E(n,$,u))}),mergeValues:(n,u)=>n===!0?!0:{...n,...u},resultToName:p}),items:_({mergeNames:(n,u,$)=>n.if((0,e._)`${$} !== true && ${u} !== undefined`,()=>n.assign($,(0,e._)`${u} === true ? true : ${$} > ${u} ? ${$} : ${u}`)),mergeToName:(n,u,$)=>n.if((0,e._)`${$} !== true`,()=>n.assign($,u===!0?!0:(0,e._)`${$} > ${u} ? ${$} : ${u}`)),mergeValues:(n,u)=>n===!0?!0:Math.max(n,u),resultToName:(n,u)=>n.var("items",u)})};function p(n,u){if(u===!0)return n.var("props",!0);const $=n.var("props",(0,e._)`{}`);return u!==void 0&&E(n,$,u),$}G.evaluatedPropsToName=p;function E(n,u,$){Object.keys($).forEach(j=>n.assign((0,e._)`${u}${(0,e.getProperty)(j)}`,!0))}G.setEvaluated=E;const s={};function o(n,u){return n.scopeValue("func",{ref:u,code:s[u.code]||(s[u.code]=new t._Code(u.code))})}G.useFunc=o;var r;(function(n){n[n.Num=0]="Num",n[n.Str=1]="Str"})(r||(G.Type=r={}));function i(n,u,$){if(n instanceof e.Name){const j=u===r.Num;return $?j?(0,e._)`"[" + ${n} + "]"`:(0,e._)`"['" + ${n} + "']"`:j?(0,e._)`"/" + ${n}`:(0,e._)`"/" + ${n}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return $?(0,e.getProperty)(n).toString():"/"+v(n)}G.getErrorPath=i;function m(n,u,$=n.opts.strictSchema){if($){if(u=`strict mode: ${u}`,$===!0)throw new Error(u);n.self.logger.warn(u)}}return G.checkStrictMode=m,G}var qe={},Yt;function ve(){if(Yt)return qe;Yt=1,Object.defineProperty(qe,"__esModule",{value:!0});const e=J(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return qe.default=t,qe}var Zt;function gt(){return Zt||(Zt=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=J(),y=Q(),d=ve();e.keywordError={message:({keyword:s})=>(0,t.str)`must pass "${s}" keyword validation`},e.keyword$DataError={message:({keyword:s,schemaType:o})=>o?(0,t.str)`"${s}" keyword must be ${o} ($data)`:(0,t.str)`"${s}" keyword is invalid ($data)`};function b(s,o=e.keywordError,r,i){const{it:m}=s,{gen:n,compositeRule:u,allErrors:$}=m,j=P(s,o,r);i??(u||$)?h(n,j):w(m,(0,t._)`[${j}]`)}e.reportError=b;function a(s,o=e.keywordError,r){const{it:i}=s,{gen:m,compositeRule:n,allErrors:u}=i,$=P(s,o,r);h(m,$),n||u||w(i,d.default.vErrors)}e.reportExtraError=a;function f(s,o){s.assign(d.default.errors,o),s.if((0,t._)`${d.default.vErrors} !== null`,()=>s.if(o,()=>s.assign((0,t._)`${d.default.vErrors}.length`,o),()=>s.assign(d.default.vErrors,null)))}e.resetErrorsCount=f;function l({gen:s,keyword:o,schemaValue:r,data:i,errsCount:m,it:n}){if(m===void 0)throw new Error("ajv implementation error");const u=s.name("err");s.forRange("i",m,d.default.errors,$=>{s.const(u,(0,t._)`${d.default.vErrors}[${$}]`),s.if((0,t._)`${u}.instancePath === undefined`,()=>s.assign((0,t._)`${u}.instancePath`,(0,t.strConcat)(d.default.instancePath,n.errorPath))),s.assign((0,t._)`${u}.schemaPath`,(0,t.str)`${n.errSchemaPath}/${o}`),n.opts.verbose&&(s.assign((0,t._)`${u}.schema`,r),s.assign((0,t._)`${u}.data`,i))})}e.extendErrors=l;function h(s,o){const r=s.const("err",o);s.if((0,t._)`${d.default.vErrors} === null`,()=>s.assign(d.default.vErrors,(0,t._)`[${r}]`),(0,t._)`${d.default.vErrors}.push(${r})`),s.code((0,t._)`${d.default.errors}++`)}function w(s,o){const{gen:r,validateName:i,schemaEnv:m}=s;m.$async?r.throw((0,t._)`new ${s.ValidationError}(${o})`):(r.assign((0,t._)`${i}.errors`,o),r.return(!1))}const v={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function P(s,o,r){const{createErrors:i}=s.it;return i===!1?(0,t._)`{}`:g(s,o,r)}function g(s,o,r={}){const{gen:i,it:m}=s,n=[_(m,r),p(s,r)];return E(s,o,n),i.object(...n)}function _({errorPath:s},{instancePath:o}){const r=o?(0,t.str)`${s}${(0,y.getErrorPath)(o,y.Type.Str)}`:s;return[d.default.instancePath,(0,t.strConcat)(d.default.instancePath,r)]}function p({keyword:s,it:{errSchemaPath:o}},{schemaPath:r,parentSchema:i}){let m=i?o:(0,t.str)`${o}/${s}`;return r&&(m=(0,t.str)`${m}${(0,y.getErrorPath)(r,y.Type.Str)}`),[v.schemaPath,m]}function E(s,{params:o,message:r},i){const{keyword:m,data:n,schemaValue:u,it:$}=s,{opts:j,propertyName:C,topSchemaRef:A,schemaPath:V}=$;i.push([v.keyword,m],[v.params,typeof o=="function"?o(s):o||(0,t._)`{}`]),j.messages&&i.push([v.message,typeof r=="function"?r(s):r]),j.verbose&&i.push([v.schema,u],[v.parentSchema,(0,t._)`${A}${V}`],[d.default.data,n]),C&&i.push([v.propertyName,C])}})(kt)),kt}var xt;function zn(){if(xt)return ge;xt=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.boolOrEmptySchema=ge.topBoolOrEmptySchema=void 0;const e=gt(),t=J(),y=ve(),d={message:"boolean schema is false"};function b(l){const{gen:h,schema:w,validateName:v}=l;w===!1?f(l,!1):typeof w=="object"&&w.$async===!0?h.return(y.default.data):(h.assign((0,t._)`${v}.errors`,null),h.return(!0))}ge.topBoolOrEmptySchema=b;function a(l,h){const{gen:w,schema:v}=l;v===!1?(w.var(h,!1),f(l)):w.var(h,!0)}ge.boolOrEmptySchema=a;function f(l,h){const{gen:w,data:v}=l,P={gen:w,keyword:"false schema",data:v,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:l};(0,e.reportError)(P,d,void 0,h)}return ge}var re={},$e={},er;function cn(){if(er)return $e;er=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.getRules=$e.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function y(b){return typeof b=="string"&&t.has(b)}$e.isJSONType=y;function d(){const b={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...b,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},b.number,b.string,b.array,b.object],post:{rules:[]},all:{},keywords:{}}}return $e.getRules=d,$e}var me={},tr;function ln(){if(tr)return me;tr=1,Object.defineProperty(me,"__esModule",{value:!0}),me.shouldUseRule=me.shouldUseGroup=me.schemaHasRulesForType=void 0;function e({schema:d,self:b},a){const f=b.RULES.types[a];return f&&f!==!0&&t(d,f)}me.schemaHasRulesForType=e;function t(d,b){return b.rules.some(a=>y(d,a))}me.shouldUseGroup=t;function y(d,b){var a;return d[b.keyword]!==void 0||((a=b.definition.implements)===null||a===void 0?void 0:a.some(f=>d[f]!==void 0))}return me.shouldUseRule=y,me}var rr;function vt(){if(rr)return re;rr=1,Object.defineProperty(re,"__esModule",{value:!0}),re.reportTypeError=re.checkDataTypes=re.checkDataType=re.coerceAndCheckDataType=re.getJSONTypes=re.getSchemaTypes=re.DataType=void 0;const e=cn(),t=ln(),y=gt(),d=J(),b=Q();var a;(function(r){r[r.Correct=0]="Correct",r[r.Wrong=1]="Wrong"})(a||(re.DataType=a={}));function f(r){const i=l(r.type);if(i.includes("null")){if(r.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!i.length&&r.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');r.nullable===!0&&i.push("null")}return i}re.getSchemaTypes=f;function l(r){const i=Array.isArray(r)?r:r?[r]:[];if(i.every(e.isJSONType))return i;throw new Error("type must be JSONType or JSONType[]: "+i.join(","))}re.getJSONTypes=l;function h(r,i){const{gen:m,data:n,opts:u}=r,$=v(i,u.coerceTypes),j=i.length>0&&!($.length===0&&i.length===1&&(0,t.schemaHasRulesForType)(r,i[0]));if(j){const C=p(i,n,u.strictNumbers,a.Wrong);m.if(C,()=>{$.length?P(r,i,$):s(r)})}return j}re.coerceAndCheckDataType=h;const w=new Set(["string","number","integer","boolean","null"]);function v(r,i){return i?r.filter(m=>w.has(m)||i==="array"&&m==="array"):[]}function P(r,i,m){const{gen:n,data:u,opts:$}=r,j=n.let("dataType",(0,d._)`typeof ${u}`),C=n.let("coerced",(0,d._)`undefined`);$.coerceTypes==="array"&&n.if((0,d._)`${j} == 'object' && Array.isArray(${u}) && ${u}.length == 1`,()=>n.assign(u,(0,d._)`${u}[0]`).assign(j,(0,d._)`typeof ${u}`).if(p(i,u,$.strictNumbers),()=>n.assign(C,u))),n.if((0,d._)`${C} !== undefined`);for(const V of m)(w.has(V)||V==="array"&&$.coerceTypes==="array")&&A(V);n.else(),s(r),n.endIf(),n.if((0,d._)`${C} !== undefined`,()=>{n.assign(u,C),g(r,C)});function A(V){switch(V){case"string":n.elseIf((0,d._)`${j} == "number" || ${j} == "boolean"`).assign(C,(0,d._)`"" + ${u}`).elseIf((0,d._)`${u} === null`).assign(C,(0,d._)`""`);return;case"number":n.elseIf((0,d._)`${j} == "boolean" || ${u} === null
              || (${j} == "string" && ${u} && ${u} == +${u})`).assign(C,(0,d._)`+${u}`);return;case"integer":n.elseIf((0,d._)`${j} === "boolean" || ${u} === null
              || (${j} === "string" && ${u} && ${u} == +${u} && !(${u} % 1))`).assign(C,(0,d._)`+${u}`);return;case"boolean":n.elseIf((0,d._)`${u} === "false" || ${u} === 0 || ${u} === null`).assign(C,!1).elseIf((0,d._)`${u} === "true" || ${u} === 1`).assign(C,!0);return;case"null":n.elseIf((0,d._)`${u} === "" || ${u} === 0 || ${u} === false`),n.assign(C,null);return;case"array":n.elseIf((0,d._)`${j} === "string" || ${j} === "number"
              || ${j} === "boolean" || ${u} === null`).assign(C,(0,d._)`[${u}]`)}}}function g({gen:r,parentData:i,parentDataProperty:m},n){r.if((0,d._)`${i} !== undefined`,()=>r.assign((0,d._)`${i}[${m}]`,n))}function _(r,i,m,n=a.Correct){const u=n===a.Correct?d.operators.EQ:d.operators.NEQ;let $;switch(r){case"null":return(0,d._)`${i} ${u} null`;case"array":$=(0,d._)`Array.isArray(${i})`;break;case"object":$=(0,d._)`${i} && typeof ${i} == "object" && !Array.isArray(${i})`;break;case"integer":$=j((0,d._)`!(${i} % 1) && !isNaN(${i})`);break;case"number":$=j();break;default:return(0,d._)`typeof ${i} ${u} ${r}`}return n===a.Correct?$:(0,d.not)($);function j(C=d.nil){return(0,d.and)((0,d._)`typeof ${i} == "number"`,C,m?(0,d._)`isFinite(${i})`:d.nil)}}re.checkDataType=_;function p(r,i,m,n){if(r.length===1)return _(r[0],i,m,n);let u;const $=(0,b.toHash)(r);if($.array&&$.object){const j=(0,d._)`typeof ${i} != "object"`;u=$.null?j:(0,d._)`!${i} || ${j}`,delete $.null,delete $.array,delete $.object}else u=d.nil;$.number&&delete $.integer;for(const j in $)u=(0,d.and)(u,_(j,i,m,n));return u}re.checkDataTypes=p;const E={message:({schema:r})=>`must be ${r}`,params:({schema:r,schemaValue:i})=>typeof r=="string"?(0,d._)`{type: ${r}}`:(0,d._)`{type: ${i}}`};function s(r){const i=o(r);(0,y.reportError)(i,E)}re.reportTypeError=s;function o(r){const{gen:i,data:m,schema:n}=r,u=(0,b.schemaRefOrVal)(r,n,"type");return{gen:i,keyword:"type",data:m,schema:n.type,schemaCode:u,schemaValue:u,parentSchema:n,params:{},it:r}}return re}var ke={},nr;function Kn(){if(nr)return ke;nr=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.assignDefaults=void 0;const e=J(),t=Q();function y(b,a){const{properties:f,items:l}=b.schema;if(a==="object"&&f)for(const h in f)d(b,h,f[h].default);else a==="array"&&Array.isArray(l)&&l.forEach((h,w)=>d(b,w,h.default))}ke.assignDefaults=y;function d(b,a,f){const{gen:l,compositeRule:h,data:w,opts:v}=b;if(f===void 0)return;const P=(0,e._)`${w}${(0,e.getProperty)(a)}`;if(h){(0,t.checkStrictMode)(b,`default is ignored for: ${P}`);return}let g=(0,e._)`${P} === undefined`;v.useDefaults==="empty"&&(g=(0,e._)`${g} || ${P} === null || ${P} === ""`),l.if(g,(0,e._)`${P} = ${(0,e.stringify)(f)}`)}return ke}var ce={},Y={},sr;function le(){if(sr)return Y;sr=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.validateUnion=Y.validateArray=Y.usePattern=Y.callValidateCode=Y.schemaProperties=Y.allSchemaProperties=Y.noPropertyInData=Y.propertyInData=Y.isOwnProperty=Y.hasPropFunc=Y.reportMissingProp=Y.checkMissingProp=Y.checkReportMissingProp=void 0;const e=J(),t=Q(),y=ve(),d=Q();function b(r,i){const{gen:m,data:n,it:u}=r;m.if(v(m,n,i,u.opts.ownProperties),()=>{r.setParams({missingProperty:(0,e._)`${i}`},!0),r.error()})}Y.checkReportMissingProp=b;function a({gen:r,data:i,it:{opts:m}},n,u){return(0,e.or)(...n.map($=>(0,e.and)(v(r,i,$,m.ownProperties),(0,e._)`${u} = ${$}`)))}Y.checkMissingProp=a;function f(r,i){r.setParams({missingProperty:i},!0),r.error()}Y.reportMissingProp=f;function l(r){return r.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}Y.hasPropFunc=l;function h(r,i,m){return(0,e._)`${l(r)}.call(${i}, ${m})`}Y.isOwnProperty=h;function w(r,i,m,n){const u=(0,e._)`${i}${(0,e.getProperty)(m)} !== undefined`;return n?(0,e._)`${u} && ${h(r,i,m)}`:u}Y.propertyInData=w;function v(r,i,m,n){const u=(0,e._)`${i}${(0,e.getProperty)(m)} === undefined`;return n?(0,e.or)(u,(0,e.not)(h(r,i,m))):u}Y.noPropertyInData=v;function P(r){return r?Object.keys(r).filter(i=>i!=="__proto__"):[]}Y.allSchemaProperties=P;function g(r,i){return P(i).filter(m=>!(0,t.alwaysValidSchema)(r,i[m]))}Y.schemaProperties=g;function _({schemaCode:r,data:i,it:{gen:m,topSchemaRef:n,schemaPath:u,errorPath:$},it:j},C,A,V){const L=V?(0,e._)`${r}, ${i}, ${n}${u}`:i,K=[[y.default.instancePath,(0,e.strConcat)(y.default.instancePath,$)],[y.default.parentData,j.parentData],[y.default.parentDataProperty,j.parentDataProperty],[y.default.rootData,y.default.rootData]];j.opts.dynamicRef&&K.push([y.default.dynamicAnchors,y.default.dynamicAnchors]);const B=(0,e._)`${L}, ${m.object(...K)}`;return A!==e.nil?(0,e._)`${C}.call(${A}, ${B})`:(0,e._)`${C}(${B})`}Y.callValidateCode=_;const p=(0,e._)`new RegExp`;function E({gen:r,it:{opts:i}},m){const n=i.unicodeRegExp?"u":"",{regExp:u}=i.code,$=u(m,n);return r.scopeValue("pattern",{key:$.toString(),ref:$,code:(0,e._)`${u.code==="new RegExp"?p:(0,d.useFunc)(r,u)}(${m}, ${n})`})}Y.usePattern=E;function s(r){const{gen:i,data:m,keyword:n,it:u}=r,$=i.name("valid");if(u.allErrors){const C=i.let("valid",!0);return j(()=>i.assign(C,!1)),C}return i.var($,!0),j(()=>i.break()),$;function j(C){const A=i.const("len",(0,e._)`${m}.length`);i.forRange("i",0,A,V=>{r.subschema({keyword:n,dataProp:V,dataPropType:t.Type.Num},$),i.if((0,e.not)($),C)})}}Y.validateArray=s;function o(r){const{gen:i,schema:m,keyword:n,it:u}=r;if(!Array.isArray(m))throw new Error("ajv implementation error");if(m.some(A=>(0,t.alwaysValidSchema)(u,A))&&!u.opts.unevaluated)return;const j=i.let("valid",!1),C=i.name("_valid");i.block(()=>m.forEach((A,V)=>{const L=r.subschema({keyword:n,schemaProp:V,compositeRule:!0},C);i.assign(j,(0,e._)`${j} || ${C}`),r.mergeValidEvaluated(L,C)||i.if((0,e.not)(j))})),r.result(j,()=>r.reset(),()=>r.error(!0))}return Y.validateUnion=o,Y}var ar;function Ln(){if(ar)return ce;ar=1,Object.defineProperty(ce,"__esModule",{value:!0}),ce.validateKeywordUsage=ce.validSchemaType=ce.funcKeywordCode=ce.macroKeywordCode=void 0;const e=J(),t=ve(),y=le(),d=gt();function b(g,_){const{gen:p,keyword:E,schema:s,parentSchema:o,it:r}=g,i=_.macro.call(r.self,s,o,r),m=w(p,E,i);r.opts.validateSchema!==!1&&r.self.validateSchema(i,!0);const n=p.name("valid");g.subschema({schema:i,schemaPath:e.nil,errSchemaPath:`${r.errSchemaPath}/${E}`,topSchemaRef:m,compositeRule:!0},n),g.pass(n,()=>g.error(!0))}ce.macroKeywordCode=b;function a(g,_){var p;const{gen:E,keyword:s,schema:o,parentSchema:r,$data:i,it:m}=g;h(m,_);const n=!i&&_.compile?_.compile.call(m.self,o,r,m):_.validate,u=w(E,s,n),$=E.let("valid");g.block$data($,j),g.ok((p=_.valid)!==null&&p!==void 0?p:$);function j(){if(_.errors===!1)V(),_.modifying&&f(g),L(()=>g.error());else{const K=_.async?C():A();_.modifying&&f(g),L(()=>l(g,K))}}function C(){const K=E.let("ruleErrs",null);return E.try(()=>V((0,e._)`await `),B=>E.assign($,!1).if((0,e._)`${B} instanceof ${m.ValidationError}`,()=>E.assign(K,(0,e._)`${B}.errors`),()=>E.throw(B))),K}function A(){const K=(0,e._)`${u}.errors`;return E.assign(K,null),V(e.nil),K}function V(K=_.async?(0,e._)`await `:e.nil){const B=m.opts.passContext?t.default.this:t.default.self,x=!("compile"in _&&!i||_.schema===!1);E.assign($,(0,e._)`${K}${(0,y.callValidateCode)(g,u,B,x)}`,_.modifying)}function L(K){var B;E.if((0,e.not)((B=_.valid)!==null&&B!==void 0?B:$),K)}}ce.funcKeywordCode=a;function f(g){const{gen:_,data:p,it:E}=g;_.if(E.parentData,()=>_.assign(p,(0,e._)`${E.parentData}[${E.parentDataProperty}]`))}function l(g,_){const{gen:p}=g;p.if((0,e._)`Array.isArray(${_})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${_} : ${t.default.vErrors}.concat(${_})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,d.extendErrors)(g)},()=>g.error())}function h({schemaEnv:g},_){if(_.async&&!g.$async)throw new Error("async keyword in sync schema")}function w(g,_,p){if(p===void 0)throw new Error(`keyword "${_}" failed to compile`);return g.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function v(g,_,p=!1){return!_.length||_.some(E=>E==="array"?Array.isArray(g):E==="object"?g&&typeof g=="object"&&!Array.isArray(g):typeof g==E||p&&typeof g>"u")}ce.validSchemaType=v;function P({schema:g,opts:_,self:p,errSchemaPath:E},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const r=s.dependencies;if(r?.some(i=>!Object.prototype.hasOwnProperty.call(g,i)))throw new Error(`parent schema must have dependencies of ${o}: ${r.join(",")}`);if(s.validateSchema&&!s.validateSchema(g[o])){const m=`keyword "${o}" value is invalid at path "${E}": `+p.errorsText(s.validateSchema.errors);if(_.validateSchema==="log")p.logger.error(m);else throw new Error(m)}}return ce.validateKeywordUsage=P,ce}var pe={},ir;function Gn(){if(ir)return pe;ir=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.extendSubschemaMode=pe.extendSubschemaData=pe.getSubschema=void 0;const e=J(),t=Q();function y(a,{keyword:f,schemaProp:l,schema:h,schemaPath:w,errSchemaPath:v,topSchemaRef:P}){if(f!==void 0&&h!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(f!==void 0){const g=a.schema[f];return l===void 0?{schema:g,schemaPath:(0,e._)`${a.schemaPath}${(0,e.getProperty)(f)}`,errSchemaPath:`${a.errSchemaPath}/${f}`}:{schema:g[l],schemaPath:(0,e._)`${a.schemaPath}${(0,e.getProperty)(f)}${(0,e.getProperty)(l)}`,errSchemaPath:`${a.errSchemaPath}/${f}/${(0,t.escapeFragment)(l)}`}}if(h!==void 0){if(w===void 0||v===void 0||P===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:h,schemaPath:w,topSchemaRef:P,errSchemaPath:v}}throw new Error('either "keyword" or "schema" must be passed')}pe.getSubschema=y;function d(a,f,{dataProp:l,dataPropType:h,data:w,dataTypes:v,propertyName:P}){if(w!==void 0&&l!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:g}=f;if(l!==void 0){const{errorPath:p,dataPathArr:E,opts:s}=f,o=g.let("data",(0,e._)`${f.data}${(0,e.getProperty)(l)}`,!0);_(o),a.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(l,h,s.jsPropertySyntax)}`,a.parentDataProperty=(0,e._)`${l}`,a.dataPathArr=[...E,a.parentDataProperty]}if(w!==void 0){const p=w instanceof e.Name?w:g.let("data",w,!0);_(p),P!==void 0&&(a.propertyName=P)}v&&(a.dataTypes=v);function _(p){a.data=p,a.dataLevel=f.dataLevel+1,a.dataTypes=[],f.definedProperties=new Set,a.parentData=f.data,a.dataNames=[...f.dataNames,p]}}pe.extendSubschemaData=d;function b(a,{jtdDiscriminator:f,jtdMetadata:l,compositeRule:h,createErrors:w,allErrors:v}){h!==void 0&&(a.compositeRule=h),w!==void 0&&(a.createErrors=w),v!==void 0&&(a.allErrors=v),a.jtdDiscriminator=f,a.jtdMetadata=l}return pe.extendSubschemaMode=b,pe}var ne={},qt,or;function dn(){return or||(or=1,qt=function e(t,y){if(t===y)return!0;if(t&&y&&typeof t=="object"&&typeof y=="object"){if(t.constructor!==y.constructor)return!1;var d,b,a;if(Array.isArray(t)){if(d=t.length,d!=y.length)return!1;for(b=d;b--!==0;)if(!e(t[b],y[b]))return!1;return!0}if(t.constructor===RegExp)return t.source===y.source&&t.flags===y.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===y.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===y.toString();if(a=Object.keys(t),d=a.length,d!==Object.keys(y).length)return!1;for(b=d;b--!==0;)if(!Object.prototype.hasOwnProperty.call(y,a[b]))return!1;for(b=d;b--!==0;){var f=a[b];if(!e(t[f],y[f]))return!1}return!0}return t!==t&&y!==y}),qt}var Ct={exports:{}},ur;function Hn(){if(ur)return Ct.exports;ur=1;var e=Ct.exports=function(d,b,a){typeof b=="function"&&(a=b,b={}),a=b.cb||a;var f=typeof a=="function"?a:a.pre||function(){},l=a.post||function(){};t(b,f,l,d,"",d)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(d,b,a,f,l,h,w,v,P,g){if(f&&typeof f=="object"&&!Array.isArray(f)){b(f,l,h,w,v,P,g);for(var _ in f){var p=f[_];if(Array.isArray(p)){if(_ in e.arrayKeywords)for(var E=0;E<p.length;E++)t(d,b,a,p[E],l+"/"+_+"/"+E,h,l,_,f,E)}else if(_ in e.propsKeywords){if(p&&typeof p=="object")for(var s in p)t(d,b,a,p[s],l+"/"+_+"/"+y(s),h,l,_,f,s)}else(_ in e.keywords||d.allKeys&&!(_ in e.skipKeywords))&&t(d,b,a,p,l+"/"+_,h,l,_,f)}a(f,l,h,w,v,P,g)}}function y(d){return d.replace(/~/g,"~0").replace(/\//g,"~1")}return Ct.exports}var cr;function $t(){if(cr)return ne;cr=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.getSchemaRefs=ne.resolveUrl=ne.normalizeId=ne._getFullPath=ne.getFullPath=ne.inlineRef=void 0;const e=Q(),t=dn(),y=Hn(),d=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function b(E,s=!0){return typeof E=="boolean"?!0:s===!0?!f(E):s?l(E)<=s:!1}ne.inlineRef=b;const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function f(E){for(const s in E){if(a.has(s))return!0;const o=E[s];if(Array.isArray(o)&&o.some(f)||typeof o=="object"&&f(o))return!0}return!1}function l(E){let s=0;for(const o in E){if(o==="$ref")return 1/0;if(s++,!d.has(o)&&(typeof E[o]=="object"&&(0,e.eachItem)(E[o],r=>s+=l(r)),s===1/0))return 1/0}return s}function h(E,s="",o){o!==!1&&(s=P(s));const r=E.parse(s);return w(E,r)}ne.getFullPath=h;function w(E,s){return E.serialize(s).split("#")[0]+"#"}ne._getFullPath=w;const v=/#\/?$/;function P(E){return E?E.replace(v,""):""}ne.normalizeId=P;function g(E,s,o){return o=P(o),E.resolve(s,o)}ne.resolveUrl=g;const _=/^[a-z_][-a-z0-9._]*$/i;function p(E,s){if(typeof E=="boolean")return{};const{schemaId:o,uriResolver:r}=this.opts,i=P(E[o]||s),m={"":i},n=h(r,i,!1),u={},$=new Set;return y(E,{allKeys:!0},(A,V,L,K)=>{if(K===void 0)return;const B=n+V;let x=m[K];typeof A[o]=="string"&&(x=de.call(this,A[o])),fe.call(this,A.$anchor),fe.call(this,A.$dynamicAnchor),m[V]=x;function de(Z){const ye=this.opts.uriResolver.resolve;if(Z=P(x?ye(x,Z):Z),$.has(Z))throw C(Z);$.add(Z);let M=this.refs[Z];return typeof M=="string"&&(M=this.refs[M]),typeof M=="object"?j(A,M.schema,Z):Z!==P(B)&&(Z[0]==="#"?(j(A,u[Z],Z),u[Z]=A):this.refs[Z]=B),Z}function fe(Z){if(typeof Z=="string"){if(!_.test(Z))throw new Error(`invalid anchor "${Z}"`);de.call(this,`#${Z}`)}}}),u;function j(A,V,L){if(V!==void 0&&!t(A,V))throw C(L)}function C(A){return new Error(`reference "${A}" resolves to more than one schema`)}}return ne.getSchemaRefs=p,ne}var lr;function wt(){if(lr)return he;lr=1,Object.defineProperty(he,"__esModule",{value:!0}),he.getData=he.KeywordCxt=he.validateFunctionCode=void 0;const e=zn(),t=vt(),y=ln(),d=vt(),b=Kn(),a=Ln(),f=Gn(),l=J(),h=ve(),w=$t(),v=Q(),P=gt();function g(N){if(n(N)&&($(N),m(N))){s(N);return}_(N,()=>(0,e.topBoolOrEmptySchema)(N))}he.validateFunctionCode=g;function _({gen:N,validateName:O,schema:I,schemaEnv:D,opts:F},H){F.code.es5?N.func(O,(0,l._)`${h.default.data}, ${h.default.valCxt}`,D.$async,()=>{N.code((0,l._)`"use strict"; ${r(I,F)}`),E(N,F),N.code(H)}):N.func(O,(0,l._)`${h.default.data}, ${p(F)}`,D.$async,()=>N.code(r(I,F)).code(H))}function p(N){return(0,l._)`{${h.default.instancePath}="", ${h.default.parentData}, ${h.default.parentDataProperty}, ${h.default.rootData}=${h.default.data}${N.dynamicRef?(0,l._)`, ${h.default.dynamicAnchors}={}`:l.nil}}={}`}function E(N,O){N.if(h.default.valCxt,()=>{N.var(h.default.instancePath,(0,l._)`${h.default.valCxt}.${h.default.instancePath}`),N.var(h.default.parentData,(0,l._)`${h.default.valCxt}.${h.default.parentData}`),N.var(h.default.parentDataProperty,(0,l._)`${h.default.valCxt}.${h.default.parentDataProperty}`),N.var(h.default.rootData,(0,l._)`${h.default.valCxt}.${h.default.rootData}`),O.dynamicRef&&N.var(h.default.dynamicAnchors,(0,l._)`${h.default.valCxt}.${h.default.dynamicAnchors}`)},()=>{N.var(h.default.instancePath,(0,l._)`""`),N.var(h.default.parentData,(0,l._)`undefined`),N.var(h.default.parentDataProperty,(0,l._)`undefined`),N.var(h.default.rootData,h.default.data),O.dynamicRef&&N.var(h.default.dynamicAnchors,(0,l._)`{}`)})}function s(N){const{schema:O,opts:I,gen:D}=N;_(N,()=>{I.$comment&&O.$comment&&K(N),A(N),D.let(h.default.vErrors,null),D.let(h.default.errors,0),I.unevaluated&&o(N),j(N),B(N)})}function o(N){const{gen:O,validateName:I}=N;N.evaluated=O.const("evaluated",(0,l._)`${I}.evaluated`),O.if((0,l._)`${N.evaluated}.dynamicProps`,()=>O.assign((0,l._)`${N.evaluated}.props`,(0,l._)`undefined`)),O.if((0,l._)`${N.evaluated}.dynamicItems`,()=>O.assign((0,l._)`${N.evaluated}.items`,(0,l._)`undefined`))}function r(N,O){const I=typeof N=="object"&&N[O.schemaId];return I&&(O.code.source||O.code.process)?(0,l._)`/*# sourceURL=${I} */`:l.nil}function i(N,O){if(n(N)&&($(N),m(N))){u(N,O);return}(0,e.boolOrEmptySchema)(N,O)}function m({schema:N,self:O}){if(typeof N=="boolean")return!N;for(const I in N)if(O.RULES.all[I])return!0;return!1}function n(N){return typeof N.schema!="boolean"}function u(N,O){const{schema:I,gen:D,opts:F}=N;F.$comment&&I.$comment&&K(N),V(N),L(N);const H=D.const("_errs",h.default.errors);j(N,H),D.var(O,(0,l._)`${H} === ${h.default.errors}`)}function $(N){(0,v.checkUnknownRules)(N),C(N)}function j(N,O){if(N.opts.jtd)return de(N,[],!1,O);const I=(0,t.getSchemaTypes)(N.schema),D=(0,t.coerceAndCheckDataType)(N,I);de(N,I,!D,O)}function C(N){const{schema:O,errSchemaPath:I,opts:D,self:F}=N;O.$ref&&D.ignoreKeywordsWithRef&&(0,v.schemaHasRulesButRef)(O,F.RULES)&&F.logger.warn(`$ref: keywords ignored in schema at path "${I}"`)}function A(N){const{schema:O,opts:I}=N;O.default!==void 0&&I.useDefaults&&I.strictSchema&&(0,v.checkStrictMode)(N,"default is ignored in the schema root")}function V(N){const O=N.schema[N.opts.schemaId];O&&(N.baseId=(0,w.resolveUrl)(N.opts.uriResolver,N.baseId,O))}function L(N){if(N.schema.$async&&!N.schemaEnv.$async)throw new Error("async schema in sync schema")}function K({gen:N,schemaEnv:O,schema:I,errSchemaPath:D,opts:F}){const H=I.$comment;if(F.$comment===!0)N.code((0,l._)`${h.default.self}.logger.log(${H})`);else if(typeof F.$comment=="function"){const ee=(0,l.str)`${D}/$comment`,ue=N.scopeValue("root",{ref:O.root});N.code((0,l._)`${h.default.self}.opts.$comment(${H}, ${ee}, ${ue}.schema)`)}}function B(N){const{gen:O,schemaEnv:I,validateName:D,ValidationError:F,opts:H}=N;I.$async?O.if((0,l._)`${h.default.errors} === 0`,()=>O.return(h.default.data),()=>O.throw((0,l._)`new ${F}(${h.default.vErrors})`)):(O.assign((0,l._)`${D}.errors`,h.default.vErrors),H.unevaluated&&x(N),O.return((0,l._)`${h.default.errors} === 0`))}function x({gen:N,evaluated:O,props:I,items:D}){I instanceof l.Name&&N.assign((0,l._)`${O}.props`,I),D instanceof l.Name&&N.assign((0,l._)`${O}.items`,D)}function de(N,O,I,D){const{gen:F,schema:H,data:ee,allErrors:ue,opts:se,self:ae}=N,{RULES:te}=ae;if(H.$ref&&(se.ignoreKeywordsWithRef||!(0,v.schemaHasRulesButRef)(H,te))){F.block(()=>U(N,"$ref",te.all.$ref.definition));return}se.jtd||Z(N,O),F.block(()=>{for(const oe of te.rules)Se(oe);Se(te.post)});function Se(oe){(0,y.shouldUseGroup)(H,oe)&&(oe.type?(F.if((0,d.checkDataType)(oe.type,ee,se.strictNumbers)),fe(N,oe),O.length===1&&O[0]===oe.type&&I&&(F.else(),(0,d.reportTypeError)(N)),F.endIf()):fe(N,oe),ue||F.if((0,l._)`${h.default.errors} === ${D||0}`))}}function fe(N,O){const{gen:I,schema:D,opts:{useDefaults:F}}=N;F&&(0,b.assignDefaults)(N,O.type),I.block(()=>{for(const H of O.rules)(0,y.shouldUseRule)(D,H)&&U(N,H.keyword,H.definition,O.type)})}function Z(N,O){N.schemaEnv.meta||!N.opts.strictTypes||(ye(N,O),N.opts.allowUnionTypes||M(N,O),R(N,N.dataTypes))}function ye(N,O){if(O.length){if(!N.dataTypes.length){N.dataTypes=O;return}O.forEach(I=>{k(N.dataTypes,I)||S(N,`type "${I}" not allowed by context "${N.dataTypes.join(",")}"`)}),c(N,O)}}function M(N,O){O.length>1&&!(O.length===2&&O.includes("null"))&&S(N,"use allowUnionTypes to allow union type keyword")}function R(N,O){const I=N.self.RULES.all;for(const D in I){const F=I[D];if(typeof F=="object"&&(0,y.shouldUseRule)(N.schema,F)){const{type:H}=F.definition;H.length&&!H.some(ee=>q(O,ee))&&S(N,`missing type "${H.join(",")}" for keyword "${D}"`)}}}function q(N,O){return N.includes(O)||O==="number"&&N.includes("integer")}function k(N,O){return N.includes(O)||O==="integer"&&N.includes("number")}function c(N,O){const I=[];for(const D of N.dataTypes)k(O,D)?I.push(D):O.includes("integer")&&D==="number"&&I.push("integer");N.dataTypes=I}function S(N,O){const I=N.schemaEnv.baseId+N.errSchemaPath;O+=` at "${I}" (strictTypes)`,(0,v.checkStrictMode)(N,O,N.opts.strictTypes)}class T{constructor(O,I,D){if((0,a.validateKeywordUsage)(O,I,D),this.gen=O.gen,this.allErrors=O.allErrors,this.keyword=D,this.data=O.data,this.schema=O.schema[D],this.$data=I.$data&&O.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,v.schemaRefOrVal)(O,this.schema,D,this.$data),this.schemaType=I.schemaType,this.parentSchema=O.schema,this.params={},this.it=O,this.def=I,this.$data)this.schemaCode=O.gen.const("vSchema",W(this.$data,O));else if(this.schemaCode=this.schemaValue,!(0,a.validSchemaType)(this.schema,I.schemaType,I.allowUndefined))throw new Error(`${D} value must be ${JSON.stringify(I.schemaType)}`);("code"in I?I.trackErrors:I.errors!==!1)&&(this.errsCount=O.gen.const("_errs",h.default.errors))}result(O,I,D){this.failResult((0,l.not)(O),I,D)}failResult(O,I,D){this.gen.if(O),D?D():this.error(),I?(this.gen.else(),I(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(O,I){this.failResult((0,l.not)(O),void 0,I)}fail(O){if(O===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(O),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(O){if(!this.$data)return this.fail(O);const{schemaCode:I}=this;this.fail((0,l._)`${I} !== undefined && (${(0,l.or)(this.invalid$data(),O)})`)}error(O,I,D){if(I){this.setParams(I),this._error(O,D),this.setParams({});return}this._error(O,D)}_error(O,I){(O?P.reportExtraError:P.reportError)(this,this.def.error,I)}$dataError(){(0,P.reportError)(this,this.def.$dataError||P.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,P.resetErrorsCount)(this.gen,this.errsCount)}ok(O){this.allErrors||this.gen.if(O)}setParams(O,I){I?Object.assign(this.params,O):this.params=O}block$data(O,I,D=l.nil){this.gen.block(()=>{this.check$data(O,D),I()})}check$data(O=l.nil,I=l.nil){if(!this.$data)return;const{gen:D,schemaCode:F,schemaType:H,def:ee}=this;D.if((0,l.or)((0,l._)`${F} === undefined`,I)),O!==l.nil&&D.assign(O,!0),(H.length||ee.validateSchema)&&(D.elseIf(this.invalid$data()),this.$dataError(),O!==l.nil&&D.assign(O,!1)),D.else()}invalid$data(){const{gen:O,schemaCode:I,schemaType:D,def:F,it:H}=this;return(0,l.or)(ee(),ue());function ee(){if(D.length){if(!(I instanceof l.Name))throw new Error("ajv implementation error");const se=Array.isArray(D)?D:[D];return(0,l._)`${(0,d.checkDataTypes)(se,I,H.opts.strictNumbers,d.DataType.Wrong)}`}return l.nil}function ue(){if(F.validateSchema){const se=O.scopeValue("validate$data",{ref:F.validateSchema});return(0,l._)`!${se}(${I})`}return l.nil}}subschema(O,I){const D=(0,f.getSubschema)(this.it,O);(0,f.extendSubschemaData)(D,this.it,O),(0,f.extendSubschemaMode)(D,O);const F={...this.it,...D,items:void 0,props:void 0};return i(F,I),F}mergeEvaluated(O,I){const{it:D,gen:F}=this;D.opts.unevaluated&&(D.props!==!0&&O.props!==void 0&&(D.props=v.mergeEvaluated.props(F,O.props,D.props,I)),D.items!==!0&&O.items!==void 0&&(D.items=v.mergeEvaluated.items(F,O.items,D.items,I)))}mergeValidEvaluated(O,I){const{it:D,gen:F}=this;if(D.opts.unevaluated&&(D.props!==!0||D.items!==!0))return F.if(I,()=>this.mergeEvaluated(O,l.Name)),!0}}he.KeywordCxt=T;function U(N,O,I,D){const F=new T(N,I,O);"code"in I?I.code(F,D):F.$data&&I.validate?(0,a.funcKeywordCode)(F,I):"macro"in I?(0,a.macroKeywordCode)(F,I):(I.compile||I.validate)&&(0,a.funcKeywordCode)(F,I)}const z=/^\/(?:[^~]|~0|~1)*$/,X=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function W(N,{dataLevel:O,dataNames:I,dataPathArr:D}){let F,H;if(N==="")return h.default.rootData;if(N[0]==="/"){if(!z.test(N))throw new Error(`Invalid JSON-pointer: ${N}`);F=N,H=h.default.rootData}else{const ae=X.exec(N);if(!ae)throw new Error(`Invalid JSON-pointer: ${N}`);const te=+ae[1];if(F=ae[2],F==="#"){if(te>=O)throw new Error(se("property/index",te));return D[O-te]}if(te>O)throw new Error(se("data",te));if(H=I[O-te],!F)return H}let ee=H;const ue=F.split("/");for(const ae of ue)ae&&(H=(0,l._)`${H}${(0,l.getProperty)((0,v.unescapeJsonPointer)(ae))}`,ee=(0,l._)`${ee} && ${H}`);return ee;function se(ae,te){return`Cannot access ${ae} ${te} levels up, current level is ${O}`}}return he.getData=W,he}var Ce={},dr;function Ut(){if(dr)return Ce;dr=1,Object.defineProperty(Ce,"__esModule",{value:!0});class e extends Error{constructor(y){super("validation failed"),this.errors=y,this.ajv=this.validation=!0}}return Ce.default=e,Ce}var Me={},fr;function bt(){if(fr)return Me;fr=1,Object.defineProperty(Me,"__esModule",{value:!0});const e=$t();class t extends Error{constructor(d,b,a,f){super(f||`can't resolve reference ${a} from id ${b}`),this.missingRef=(0,e.resolveUrl)(d,b,a),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(d,this.missingRef))}}return Me.default=t,Me}var ie={},hr;function Ft(){if(hr)return ie;hr=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.resolveSchema=ie.getCompilingSchema=ie.resolveRef=ie.compileSchema=ie.SchemaEnv=void 0;const e=J(),t=Ut(),y=ve(),d=$t(),b=Q(),a=wt();class f{constructor(o){var r;this.refs={},this.dynamicAnchors={};let i;typeof o.schema=="object"&&(i=o.schema),this.schema=o.schema,this.schemaId=o.schemaId,this.root=o.root||this,this.baseId=(r=o.baseId)!==null&&r!==void 0?r:(0,d.normalizeId)(i?.[o.schemaId||"$id"]),this.schemaPath=o.schemaPath,this.localRefs=o.localRefs,this.meta=o.meta,this.$async=i?.$async,this.refs={}}}ie.SchemaEnv=f;function l(s){const o=v.call(this,s);if(o)return o;const r=(0,d.getFullPath)(this.opts.uriResolver,s.root.baseId),{es5:i,lines:m}=this.opts.code,{ownProperties:n}=this.opts,u=new e.CodeGen(this.scope,{es5:i,lines:m,ownProperties:n});let $;s.$async&&($=u.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const j=u.scopeName("validate");s.validateName=j;const C={gen:u,allErrors:this.opts.allErrors,data:y.default.data,parentData:y.default.parentData,parentDataProperty:y.default.parentDataProperty,dataNames:[y.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",this.opts.code.source===!0?{ref:s.schema,code:(0,e.stringify)(s.schema)}:{ref:s.schema}),validateName:j,ValidationError:$,schema:s.schema,schemaEnv:s,rootId:r,baseId:s.baseId||r,schemaPath:e.nil,errSchemaPath:s.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let A;try{this._compilations.add(s),(0,a.validateFunctionCode)(C),u.optimize(this.opts.code.optimize);const V=u.toString();A=`${u.scopeRefs(y.default.scope)}return ${V}`,this.opts.code.process&&(A=this.opts.code.process(A,s));const K=new Function(`${y.default.self}`,`${y.default.scope}`,A)(this,this.scope.get());if(this.scope.value(j,{ref:K}),K.errors=null,K.schema=s.schema,K.schemaEnv=s,s.$async&&(K.$async=!0),this.opts.code.source===!0&&(K.source={validateName:j,validateCode:V,scopeValues:u._values}),this.opts.unevaluated){const{props:B,items:x}=C;K.evaluated={props:B instanceof e.Name?void 0:B,items:x instanceof e.Name?void 0:x,dynamicProps:B instanceof e.Name,dynamicItems:x instanceof e.Name},K.source&&(K.source.evaluated=(0,e.stringify)(K.evaluated))}return s.validate=K,s}catch(V){throw delete s.validate,delete s.validateName,A&&this.logger.error("Error compiling schema, function code:",A),V}finally{this._compilations.delete(s)}}ie.compileSchema=l;function h(s,o,r){var i;r=(0,d.resolveUrl)(this.opts.uriResolver,o,r);const m=s.refs[r];if(m)return m;let n=g.call(this,s,r);if(n===void 0){const u=(i=s.localRefs)===null||i===void 0?void 0:i[r],{schemaId:$}=this.opts;u&&(n=new f({schema:u,schemaId:$,root:s,baseId:o}))}if(n!==void 0)return s.refs[r]=w.call(this,n)}ie.resolveRef=h;function w(s){return(0,d.inlineRef)(s.schema,this.opts.inlineRefs)?s.schema:s.validate?s:l.call(this,s)}function v(s){for(const o of this._compilations)if(P(o,s))return o}ie.getCompilingSchema=v;function P(s,o){return s.schema===o.schema&&s.root===o.root&&s.baseId===o.baseId}function g(s,o){let r;for(;typeof(r=this.refs[o])=="string";)o=r;return r||this.schemas[o]||_.call(this,s,o)}function _(s,o){const r=this.opts.uriResolver.parse(o),i=(0,d._getFullPath)(this.opts.uriResolver,r);let m=(0,d.getFullPath)(this.opts.uriResolver,s.baseId,void 0);if(Object.keys(s.schema).length>0&&i===m)return E.call(this,r,s);const n=(0,d.normalizeId)(i),u=this.refs[n]||this.schemas[n];if(typeof u=="string"){const $=_.call(this,s,u);return typeof $?.schema!="object"?void 0:E.call(this,r,$)}if(typeof u?.schema=="object"){if(u.validate||l.call(this,u),n===(0,d.normalizeId)(o)){const{schema:$}=u,{schemaId:j}=this.opts,C=$[j];return C&&(m=(0,d.resolveUrl)(this.opts.uriResolver,m,C)),new f({schema:$,schemaId:j,root:s,baseId:m})}return E.call(this,r,u)}}ie.resolveSchema=_;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function E(s,{baseId:o,schema:r,root:i}){var m;if(((m=s.fragment)===null||m===void 0?void 0:m[0])!=="/")return;for(const $ of s.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const j=r[(0,b.unescapeFragment)($)];if(j===void 0)return;r=j;const C=typeof r=="object"&&r[this.opts.schemaId];!p.has($)&&C&&(o=(0,d.resolveUrl)(this.opts.uriResolver,o,C))}let n;if(typeof r!="boolean"&&r.$ref&&!(0,b.schemaHasRulesButRef)(r,this.RULES)){const $=(0,d.resolveUrl)(this.opts.uriResolver,o,r.$ref);n=_.call(this,i,$)}const{schemaId:u}=this.opts;if(n=n||new f({schema:r,schemaId:u,root:i,baseId:o}),n.schema!==n.root.schema)return n}return ie}const Jn="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Wn="Meta-schema for $data reference (JSON AnySchema extension proposal)",Bn="object",Qn=["$data"],Xn={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Yn=!1,Zn={$id:Jn,description:Wn,type:Bn,required:Qn,properties:Xn,additionalProperties:Yn};var De={},je={exports:{}},Mt,mr;function fn(){if(mr)return Mt;mr=1;const e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),t=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function y(g){let _="",p=0,E=0;for(E=0;E<g.length;E++)if(p=g[E].charCodeAt(0),p!==48){if(!(p>=48&&p<=57||p>=65&&p<=70||p>=97&&p<=102))return"";_+=g[E];break}for(E+=1;E<g.length;E++){if(p=g[E].charCodeAt(0),!(p>=48&&p<=57||p>=65&&p<=70||p>=97&&p<=102))return"";_+=g[E]}return _}const d=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function b(g){return g.length=0,!0}function a(g,_,p){if(g.length){const E=y(g);if(E!=="")_.push(E);else return p.error=!0,!1;g.length=0}return!0}function f(g){let _=0;const p={error:!1,address:"",zone:""},E=[],s=[];let o=!1,r=!1,i=a;for(let m=0;m<g.length;m++){const n=g[m];if(!(n==="["||n==="]"))if(n===":"){if(o===!0&&(r=!0),!i(s,E,p))break;if(++_>7){p.error=!0;break}m>0&&g[m-1]===":"&&(o=!0),E.push(":");continue}else if(n==="%"){if(!i(s,E,p))break;i=b}else{s.push(n);continue}}return s.length&&(i===b?p.zone=s.join(""):r?E.push(s.join("")):E.push(y(s))),p.address=E.join(""),p}function l(g){if(h(g,":")<2)return{host:g,isIPV6:!1};const _=f(g);if(_.error)return{host:g,isIPV6:!1};{let p=_.address,E=_.address;return _.zone&&(p+="%"+_.zone,E+="%25"+_.zone),{host:p,isIPV6:!0,escapedHost:E}}}function h(g,_){let p=0;for(let E=0;E<g.length;E++)g[E]===_&&p++;return p}function w(g){let _=g;const p=[];let E=-1,s=0;for(;s=_.length;){if(s===1){if(_===".")break;if(_==="/"){p.push("/");break}else{p.push(_);break}}else if(s===2){if(_[0]==="."){if(_[1]===".")break;if(_[1]==="/"){_=_.slice(2);continue}}else if(_[0]==="/"&&(_[1]==="."||_[1]==="/")){p.push("/");break}}else if(s===3&&_==="/.."){p.length!==0&&p.pop(),p.push("/");break}if(_[0]==="."){if(_[1]==="."){if(_[2]==="/"){_=_.slice(3);continue}}else if(_[1]==="/"){_=_.slice(2);continue}}else if(_[0]==="/"&&_[1]==="."){if(_[2]==="/"){_=_.slice(2);continue}else if(_[2]==="."&&_[3]==="/"){_=_.slice(3),p.length!==0&&p.pop();continue}}if((E=_.indexOf("/",1))===-1){p.push(_);break}else p.push(_.slice(0,E)),_=_.slice(E)}return p.join("")}function v(g,_){const p=_!==!0?escape:unescape;return g.scheme!==void 0&&(g.scheme=p(g.scheme)),g.userinfo!==void 0&&(g.userinfo=p(g.userinfo)),g.host!==void 0&&(g.host=p(g.host)),g.path!==void 0&&(g.path=p(g.path)),g.query!==void 0&&(g.query=p(g.query)),g.fragment!==void 0&&(g.fragment=p(g.fragment)),g}function P(g){const _=[];if(g.userinfo!==void 0&&(_.push(g.userinfo),_.push("@")),g.host!==void 0){let p=unescape(g.host);if(!t(p)){const E=l(p);E.isIPV6===!0?p=`[${E.escapedHost}]`:p=g.host}_.push(p)}return(typeof g.port=="number"||typeof g.port=="string")&&(_.push(":"),_.push(String(g.port))),_.length?_.join(""):void 0}return Mt={nonSimpleDomain:d,recomposeAuthority:P,normalizeComponentEncoding:v,removeDotSegments:w,isIPv4:t,isUUID:e,normalizeIPv6:l,stringArrayToHexStripped:y},Mt}var Dt,pr;function xn(){if(pr)return Dt;pr=1;const{isUUID:e}=fn(),t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,y=["http","https","ws","wss","urn","urn:uuid"];function d(n){return y.indexOf(n)!==-1}function b(n){return n.secure===!0?!0:n.secure===!1?!1:n.scheme?n.scheme.length===3&&(n.scheme[0]==="w"||n.scheme[0]==="W")&&(n.scheme[1]==="s"||n.scheme[1]==="S")&&(n.scheme[2]==="s"||n.scheme[2]==="S"):!1}function a(n){return n.host||(n.error=n.error||"HTTP URIs must have a host."),n}function f(n){const u=String(n.scheme).toLowerCase()==="https";return(n.port===(u?443:80)||n.port==="")&&(n.port=void 0),n.path||(n.path="/"),n}function l(n){return n.secure=b(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n}function h(n){if((n.port===(b(n)?443:80)||n.port==="")&&(n.port=void 0),typeof n.secure=="boolean"&&(n.scheme=n.secure?"wss":"ws",n.secure=void 0),n.resourceName){const[u,$]=n.resourceName.split("?");n.path=u&&u!=="/"?u:void 0,n.query=$,n.resourceName=void 0}return n.fragment=void 0,n}function w(n,u){if(!n.path)return n.error="URN can not be parsed",n;const $=n.path.match(t);if($){const j=u.scheme||n.scheme||"urn";n.nid=$[1].toLowerCase(),n.nss=$[2];const C=`${j}:${u.nid||n.nid}`,A=m(C);n.path=void 0,A&&(n=A.parse(n,u))}else n.error=n.error||"URN can not be parsed.";return n}function v(n,u){if(n.nid===void 0)throw new Error("URN without nid cannot be serialized");const $=u.scheme||n.scheme||"urn",j=n.nid.toLowerCase(),C=`${$}:${u.nid||j}`,A=m(C);A&&(n=A.serialize(n,u));const V=n,L=n.nss;return V.path=`${j||u.nid}:${L}`,u.skipEscape=!0,V}function P(n,u){const $=n;return $.uuid=$.nss,$.nss=void 0,!u.tolerant&&(!$.uuid||!e($.uuid))&&($.error=$.error||"UUID is not valid."),$}function g(n){const u=n;return u.nss=(n.uuid||"").toLowerCase(),u}const _={scheme:"http",domainHost:!0,parse:a,serialize:f},p={scheme:"https",domainHost:_.domainHost,parse:a,serialize:f},E={scheme:"ws",domainHost:!0,parse:l,serialize:h},s={scheme:"wss",domainHost:E.domainHost,parse:E.parse,serialize:E.serialize},i={http:_,https:p,ws:E,wss:s,urn:{scheme:"urn",parse:w,serialize:v,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:P,serialize:g,skipNormalize:!0}};Object.setPrototypeOf(i,null);function m(n){return n&&(i[n]||i[n.toLowerCase()])||void 0}return Dt={wsIsSecure:b,SCHEMES:i,isValidSchemeName:d,getSchemeHandler:m},Dt}var yr;function es(){if(yr)return je.exports;yr=1;const{normalizeIPv6:e,removeDotSegments:t,recomposeAuthority:y,normalizeComponentEncoding:d,isIPv4:b,nonSimpleDomain:a}=fn(),{SCHEMES:f,getSchemeHandler:l}=xn();function h(s,o){return typeof s=="string"?s=g(p(s,o),o):typeof s=="object"&&(s=p(g(s,o),o)),s}function w(s,o,r){const i=r?Object.assign({scheme:"null"},r):{scheme:"null"},m=v(p(s,i),p(o,i),i,!0);return i.skipEscape=!0,g(m,i)}function v(s,o,r,i){const m={};return i||(s=p(g(s,r),r),o=p(g(o,r),r)),r=r||{},!r.tolerant&&o.scheme?(m.scheme=o.scheme,m.userinfo=o.userinfo,m.host=o.host,m.port=o.port,m.path=t(o.path||""),m.query=o.query):(o.userinfo!==void 0||o.host!==void 0||o.port!==void 0?(m.userinfo=o.userinfo,m.host=o.host,m.port=o.port,m.path=t(o.path||""),m.query=o.query):(o.path?(o.path[0]==="/"?m.path=t(o.path):((s.userinfo!==void 0||s.host!==void 0||s.port!==void 0)&&!s.path?m.path="/"+o.path:s.path?m.path=s.path.slice(0,s.path.lastIndexOf("/")+1)+o.path:m.path=o.path,m.path=t(m.path)),m.query=o.query):(m.path=s.path,o.query!==void 0?m.query=o.query:m.query=s.query),m.userinfo=s.userinfo,m.host=s.host,m.port=s.port),m.scheme=s.scheme),m.fragment=o.fragment,m}function P(s,o,r){return typeof s=="string"?(s=unescape(s),s=g(d(p(s,r),!0),{...r,skipEscape:!0})):typeof s=="object"&&(s=g(d(s,!0),{...r,skipEscape:!0})),typeof o=="string"?(o=unescape(o),o=g(d(p(o,r),!0),{...r,skipEscape:!0})):typeof o=="object"&&(o=g(d(o,!0),{...r,skipEscape:!0})),s.toLowerCase()===o.toLowerCase()}function g(s,o){const r={host:s.host,scheme:s.scheme,userinfo:s.userinfo,port:s.port,path:s.path,query:s.query,nid:s.nid,nss:s.nss,uuid:s.uuid,fragment:s.fragment,reference:s.reference,resourceName:s.resourceName,secure:s.secure,error:""},i=Object.assign({},o),m=[],n=l(i.scheme||r.scheme);n&&n.serialize&&n.serialize(r,i),r.path!==void 0&&(i.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),i.reference!=="suffix"&&r.scheme&&m.push(r.scheme,":");const u=y(r);if(u!==void 0&&(i.reference!=="suffix"&&m.push("//"),m.push(u),r.path&&r.path[0]!=="/"&&m.push("/")),r.path!==void 0){let $=r.path;!i.absolutePath&&(!n||!n.absolutePath)&&($=t($)),u===void 0&&$[0]==="/"&&$[1]==="/"&&($="/%2F"+$.slice(2)),m.push($)}return r.query!==void 0&&m.push("?",r.query),r.fragment!==void 0&&m.push("#",r.fragment),m.join("")}const _=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p(s,o){const r=Object.assign({},o),i={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let m=!1;r.reference==="suffix"&&(r.scheme?s=r.scheme+":"+s:s="//"+s);const n=s.match(_);if(n){if(i.scheme=n[1],i.userinfo=n[3],i.host=n[4],i.port=parseInt(n[5],10),i.path=n[6]||"",i.query=n[7],i.fragment=n[8],isNaN(i.port)&&(i.port=n[5]),i.host)if(b(i.host)===!1){const j=e(i.host);i.host=j.host.toLowerCase(),m=j.isIPV6}else m=!0;i.scheme===void 0&&i.userinfo===void 0&&i.host===void 0&&i.port===void 0&&i.query===void 0&&!i.path?i.reference="same-document":i.scheme===void 0?i.reference="relative":i.fragment===void 0?i.reference="absolute":i.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==i.reference&&(i.error=i.error||"URI is not a "+r.reference+" reference.");const u=l(r.scheme||i.scheme);if(!r.unicodeSupport&&(!u||!u.unicodeSupport)&&i.host&&(r.domainHost||u&&u.domainHost)&&m===!1&&a(i.host))try{i.host=URL.domainToASCII(i.host.toLowerCase())}catch($){i.error=i.error||"Host's domain name can not be converted to ASCII: "+$}(!u||u&&!u.skipNormalize)&&(s.indexOf("%")!==-1&&(i.scheme!==void 0&&(i.scheme=unescape(i.scheme)),i.host!==void 0&&(i.host=unescape(i.host))),i.path&&(i.path=escape(unescape(i.path))),i.fragment&&(i.fragment=encodeURI(decodeURIComponent(i.fragment)))),u&&u.parse&&u.parse(i,r)}else i.error=i.error||"URI can not be parsed.";return i}const E={SCHEMES:f,normalize:h,resolve:w,resolveComponent:v,equal:P,serialize:g,parse:p};return je.exports=E,je.exports.default=E,je.exports.fastUri=E,je.exports}var _r;function ts(){if(_r)return De;_r=1,Object.defineProperty(De,"__esModule",{value:!0});const e=es();return e.code='require("ajv/dist/runtime/uri").default',De.default=e,De}var vr;function rs(){return vr||(vr=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=wt();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var y=J();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return y._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return y.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return y.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return y.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return y.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return y.CodeGen}});const d=Ut(),b=bt(),a=cn(),f=Ft(),l=J(),h=$t(),w=vt(),v=Q(),P=Zn,g=ts(),_=(M,R)=>new RegExp(M,R);_.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],E=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),s={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},o={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},r=200;function i(M){var R,q,k,c,S,T,U,z,X,W,N,O,I,D,F,H,ee,ue,se,ae,te,Se,oe,Et,St;const Re=M.strict,Pt=(R=M.code)===null||R===void 0?void 0:R.optimize,Kt=Pt===!0||Pt===void 0?1:Pt||0,Lt=(k=(q=M.code)===null||q===void 0?void 0:q.regExp)!==null&&k!==void 0?k:_,_n=(c=M.uriResolver)!==null&&c!==void 0?c:g.default;return{strictSchema:(T=(S=M.strictSchema)!==null&&S!==void 0?S:Re)!==null&&T!==void 0?T:!0,strictNumbers:(z=(U=M.strictNumbers)!==null&&U!==void 0?U:Re)!==null&&z!==void 0?z:!0,strictTypes:(W=(X=M.strictTypes)!==null&&X!==void 0?X:Re)!==null&&W!==void 0?W:"log",strictTuples:(O=(N=M.strictTuples)!==null&&N!==void 0?N:Re)!==null&&O!==void 0?O:"log",strictRequired:(D=(I=M.strictRequired)!==null&&I!==void 0?I:Re)!==null&&D!==void 0?D:!1,code:M.code?{...M.code,optimize:Kt,regExp:Lt}:{optimize:Kt,regExp:Lt},loopRequired:(F=M.loopRequired)!==null&&F!==void 0?F:r,loopEnum:(H=M.loopEnum)!==null&&H!==void 0?H:r,meta:(ee=M.meta)!==null&&ee!==void 0?ee:!0,messages:(ue=M.messages)!==null&&ue!==void 0?ue:!0,inlineRefs:(se=M.inlineRefs)!==null&&se!==void 0?se:!0,schemaId:(ae=M.schemaId)!==null&&ae!==void 0?ae:"$id",addUsedSchema:(te=M.addUsedSchema)!==null&&te!==void 0?te:!0,validateSchema:(Se=M.validateSchema)!==null&&Se!==void 0?Se:!0,validateFormats:(oe=M.validateFormats)!==null&&oe!==void 0?oe:!0,unicodeRegExp:(Et=M.unicodeRegExp)!==null&&Et!==void 0?Et:!0,int32range:(St=M.int32range)!==null&&St!==void 0?St:!0,uriResolver:_n}}class m{constructor(R={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,R=this.opts={...R,...i(R)};const{es5:q,lines:k}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:E,es5:q,lines:k}),this.logger=L(R.logger);const c=R.validateFormats;R.validateFormats=!1,this.RULES=(0,a.getRules)(),n.call(this,s,R,"NOT SUPPORTED"),n.call(this,o,R,"DEPRECATED","warn"),this._metaOpts=A.call(this),R.formats&&j.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),R.keywords&&C.call(this,R.keywords),typeof R.meta=="object"&&this.addMetaSchema(R.meta),$.call(this),R.validateFormats=c}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:R,meta:q,schemaId:k}=this.opts;let c=P;k==="id"&&(c={...P},c.id=c.$id,delete c.$id),q&&R&&this.addMetaSchema(c,c[k],!1)}defaultMeta(){const{meta:R,schemaId:q}=this.opts;return this.opts.defaultMeta=typeof R=="object"?R[q]||R:void 0}validate(R,q){let k;if(typeof R=="string"){if(k=this.getSchema(R),!k)throw new Error(`no schema with key or ref "${R}"`)}else k=this.compile(R);const c=k(q);return"$async"in k||(this.errors=k.errors),c}compile(R,q){const k=this._addSchema(R,q);return k.validate||this._compileSchemaEnv(k)}compileAsync(R,q){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:k}=this.opts;return c.call(this,R,q);async function c(W,N){await S.call(this,W.$schema);const O=this._addSchema(W,N);return O.validate||T.call(this,O)}async function S(W){W&&!this.getSchema(W)&&await c.call(this,{$ref:W},!0)}async function T(W){try{return this._compileSchemaEnv(W)}catch(N){if(!(N instanceof b.default))throw N;return U.call(this,N),await z.call(this,N.missingSchema),T.call(this,W)}}function U({missingSchema:W,missingRef:N}){if(this.refs[W])throw new Error(`AnySchema ${W} is loaded but ${N} cannot be resolved`)}async function z(W){const N=await X.call(this,W);this.refs[W]||await S.call(this,N.$schema),this.refs[W]||this.addSchema(N,W,q)}async function X(W){const N=this._loading[W];if(N)return N;try{return await(this._loading[W]=k(W))}finally{delete this._loading[W]}}}addSchema(R,q,k,c=this.opts.validateSchema){if(Array.isArray(R)){for(const T of R)this.addSchema(T,void 0,k,c);return this}let S;if(typeof R=="object"){const{schemaId:T}=this.opts;if(S=R[T],S!==void 0&&typeof S!="string")throw new Error(`schema ${T} must be string`)}return q=(0,h.normalizeId)(q||S),this._checkUnique(q),this.schemas[q]=this._addSchema(R,k,q,c,!0),this}addMetaSchema(R,q,k=this.opts.validateSchema){return this.addSchema(R,q,!0,k),this}validateSchema(R,q){if(typeof R=="boolean")return!0;let k;if(k=R.$schema,k!==void 0&&typeof k!="string")throw new Error("$schema must be a string");if(k=k||this.opts.defaultMeta||this.defaultMeta(),!k)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const c=this.validate(k,R);if(!c&&q){const S="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(S);else throw new Error(S)}return c}getSchema(R){let q;for(;typeof(q=u.call(this,R))=="string";)R=q;if(q===void 0){const{schemaId:k}=this.opts,c=new f.SchemaEnv({schema:{},schemaId:k});if(q=f.resolveSchema.call(this,c,R),!q)return;this.refs[R]=q}return q.validate||this._compileSchemaEnv(q)}removeSchema(R){if(R instanceof RegExp)return this._removeAllSchemas(this.schemas,R),this._removeAllSchemas(this.refs,R),this;switch(typeof R){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const q=u.call(this,R);return typeof q=="object"&&this._cache.delete(q.schema),delete this.schemas[R],delete this.refs[R],this}case"object":{const q=R;this._cache.delete(q);let k=R[this.opts.schemaId];return k&&(k=(0,h.normalizeId)(k),delete this.schemas[k],delete this.refs[k]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(R){for(const q of R)this.addKeyword(q);return this}addKeyword(R,q){let k;if(typeof R=="string")k=R,typeof q=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),q.keyword=k);else if(typeof R=="object"&&q===void 0){if(q=R,k=q.keyword,Array.isArray(k)&&!k.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,k,q),!q)return(0,v.eachItem)(k,S=>x.call(this,S)),this;fe.call(this,q);const c={...q,type:(0,w.getJSONTypes)(q.type),schemaType:(0,w.getJSONTypes)(q.schemaType)};return(0,v.eachItem)(k,c.type.length===0?S=>x.call(this,S,c):S=>c.type.forEach(T=>x.call(this,S,c,T))),this}getKeyword(R){const q=this.RULES.all[R];return typeof q=="object"?q.definition:!!q}removeKeyword(R){const{RULES:q}=this;delete q.keywords[R],delete q.all[R];for(const k of q.rules){const c=k.rules.findIndex(S=>S.keyword===R);c>=0&&k.rules.splice(c,1)}return this}addFormat(R,q){return typeof q=="string"&&(q=new RegExp(q)),this.formats[R]=q,this}errorsText(R=this.errors,{separator:q=", ",dataVar:k="data"}={}){return!R||R.length===0?"No errors":R.map(c=>`${k}${c.instancePath} ${c.message}`).reduce((c,S)=>c+q+S)}$dataMetaSchema(R,q){const k=this.RULES.all;R=JSON.parse(JSON.stringify(R));for(const c of q){const S=c.split("/").slice(1);let T=R;for(const U of S)T=T[U];for(const U in k){const z=k[U];if(typeof z!="object")continue;const{$data:X}=z.definition,W=T[U];X&&W&&(T[U]=ye(W))}}return R}_removeAllSchemas(R,q){for(const k in R){const c=R[k];(!q||q.test(k))&&(typeof c=="string"?delete R[k]:c&&!c.meta&&(this._cache.delete(c.schema),delete R[k]))}}_addSchema(R,q,k,c=this.opts.validateSchema,S=this.opts.addUsedSchema){let T;const{schemaId:U}=this.opts;if(typeof R=="object")T=R[U];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof R!="boolean")throw new Error("schema must be object or boolean")}let z=this._cache.get(R);if(z!==void 0)return z;k=(0,h.normalizeId)(T||k);const X=h.getSchemaRefs.call(this,R,k);return z=new f.SchemaEnv({schema:R,schemaId:U,meta:q,baseId:k,localRefs:X}),this._cache.set(z.schema,z),S&&!k.startsWith("#")&&(k&&this._checkUnique(k),this.refs[k]=z),c&&this.validateSchema(R,!0),z}_checkUnique(R){if(this.schemas[R]||this.refs[R])throw new Error(`schema with key or id "${R}" already exists`)}_compileSchemaEnv(R){if(R.meta?this._compileMetaSchema(R):f.compileSchema.call(this,R),!R.validate)throw new Error("ajv implementation error");return R.validate}_compileMetaSchema(R){const q=this.opts;this.opts=this._metaOpts;try{f.compileSchema.call(this,R)}finally{this.opts=q}}}m.ValidationError=d.default,m.MissingRefError=b.default,e.default=m;function n(M,R,q,k="error"){for(const c in M){const S=c;S in R&&this.logger[k](`${q}: option ${c}. ${M[S]}`)}}function u(M){return M=(0,h.normalizeId)(M),this.schemas[M]||this.refs[M]}function $(){const M=this.opts.schemas;if(M)if(Array.isArray(M))this.addSchema(M);else for(const R in M)this.addSchema(M[R],R)}function j(){for(const M in this.opts.formats){const R=this.opts.formats[M];R&&this.addFormat(M,R)}}function C(M){if(Array.isArray(M)){this.addVocabulary(M);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const R in M){const q=M[R];q.keyword||(q.keyword=R),this.addKeyword(q)}}function A(){const M={...this.opts};for(const R of p)delete M[R];return M}const V={log(){},warn(){},error(){}};function L(M){if(M===!1)return V;if(M===void 0)return console;if(M.log&&M.warn&&M.error)return M;throw new Error("logger must implement log, warn and error methods")}const K=/^[a-z_$][a-z0-9_$:-]*$/i;function B(M,R){const{RULES:q}=this;if((0,v.eachItem)(M,k=>{if(q.keywords[k])throw new Error(`Keyword ${k} is already defined`);if(!K.test(k))throw new Error(`Keyword ${k} has invalid name`)}),!!R&&R.$data&&!("code"in R||"validate"in R))throw new Error('$data keyword must have "code" or "validate" function')}function x(M,R,q){var k;const c=R?.post;if(q&&c)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:S}=this;let T=c?S.post:S.rules.find(({type:z})=>z===q);if(T||(T={type:q,rules:[]},S.rules.push(T)),S.keywords[M]=!0,!R)return;const U={keyword:M,definition:{...R,type:(0,w.getJSONTypes)(R.type),schemaType:(0,w.getJSONTypes)(R.schemaType)}};R.before?de.call(this,T,U,R.before):T.rules.push(U),S.all[M]=U,(k=R.implements)===null||k===void 0||k.forEach(z=>this.addKeyword(z))}function de(M,R,q){const k=M.rules.findIndex(c=>c.keyword===q);k>=0?M.rules.splice(k,0,R):(M.rules.push(R),this.logger.warn(`rule ${q} is not defined`))}function fe(M){let{metaSchema:R}=M;R!==void 0&&(M.$data&&this.opts.$data&&(R=ye(R)),M.validateSchema=this.compile(R,!0))}const Z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ye(M){return{anyOf:[M,Z]}}})(Ot)),Ot}var Ae={},Ve={},Ue={},gr;function ns(){if(gr)return Ue;gr=1,Object.defineProperty(Ue,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return Ue.default=e,Ue}var _e={},$r;function ss(){if($r)return _e;$r=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.callRef=_e.getValidate=void 0;const e=bt(),t=le(),y=J(),d=ve(),b=Ft(),a=Q(),f={keyword:"$ref",schemaType:"string",code(w){const{gen:v,schema:P,it:g}=w,{baseId:_,schemaEnv:p,validateName:E,opts:s,self:o}=g,{root:r}=p;if((P==="#"||P==="#/")&&_===r.baseId)return m();const i=b.resolveRef.call(o,r,_,P);if(i===void 0)throw new e.default(g.opts.uriResolver,_,P);if(i instanceof b.SchemaEnv)return n(i);return u(i);function m(){if(p===r)return h(w,E,p,p.$async);const $=v.scopeValue("root",{ref:r});return h(w,(0,y._)`${$}.validate`,r,r.$async)}function n($){const j=l(w,$);h(w,j,$,$.$async)}function u($){const j=v.scopeValue("schema",s.code.source===!0?{ref:$,code:(0,y.stringify)($)}:{ref:$}),C=v.name("valid"),A=w.subschema({schema:$,dataTypes:[],schemaPath:y.nil,topSchemaRef:j,errSchemaPath:P},C);w.mergeEvaluated(A),w.ok(C)}}};function l(w,v){const{gen:P}=w;return v.validate?P.scopeValue("validate",{ref:v.validate}):(0,y._)`${P.scopeValue("wrapper",{ref:v})}.validate`}_e.getValidate=l;function h(w,v,P,g){const{gen:_,it:p}=w,{allErrors:E,schemaEnv:s,opts:o}=p,r=o.passContext?d.default.this:y.nil;g?i():m();function i(){if(!s.$async)throw new Error("async schema referenced by sync schema");const $=_.let("valid");_.try(()=>{_.code((0,y._)`await ${(0,t.callValidateCode)(w,v,r)}`),u(v),E||_.assign($,!0)},j=>{_.if((0,y._)`!(${j} instanceof ${p.ValidationError})`,()=>_.throw(j)),n(j),E||_.assign($,!1)}),w.ok($)}function m(){w.result((0,t.callValidateCode)(w,v,r),()=>u(v),()=>n(v))}function n($){const j=(0,y._)`${$}.errors`;_.assign(d.default.vErrors,(0,y._)`${d.default.vErrors} === null ? ${j} : ${d.default.vErrors}.concat(${j})`),_.assign(d.default.errors,(0,y._)`${d.default.vErrors}.length`)}function u($){var j;if(!p.opts.unevaluated)return;const C=(j=P?.validate)===null||j===void 0?void 0:j.evaluated;if(p.props!==!0)if(C&&!C.dynamicProps)C.props!==void 0&&(p.props=a.mergeEvaluated.props(_,C.props,p.props));else{const A=_.var("props",(0,y._)`${$}.evaluated.props`);p.props=a.mergeEvaluated.props(_,A,p.props,y.Name)}if(p.items!==!0)if(C&&!C.dynamicItems)C.items!==void 0&&(p.items=a.mergeEvaluated.items(_,C.items,p.items));else{const A=_.var("items",(0,y._)`${$}.evaluated.items`);p.items=a.mergeEvaluated.items(_,A,p.items,y.Name)}}}return _e.callRef=h,_e.default=f,_e}var wr;function as(){if(wr)return Ve;wr=1,Object.defineProperty(Ve,"__esModule",{value:!0});const e=ns(),t=ss(),y=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Ve.default=y,Ve}var Fe={},ze={},br;function is(){if(br)return ze;br=1,Object.defineProperty(ze,"__esModule",{value:!0});const e=J(),t=e.operators,y={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},d={message:({keyword:a,schemaCode:f})=>(0,e.str)`must be ${y[a].okStr} ${f}`,params:({keyword:a,schemaCode:f})=>(0,e._)`{comparison: ${y[a].okStr}, limit: ${f}}`},b={keyword:Object.keys(y),type:"number",schemaType:"number",$data:!0,error:d,code(a){const{keyword:f,data:l,schemaCode:h}=a;a.fail$data((0,e._)`${l} ${y[f].fail} ${h} || isNaN(${l})`)}};return ze.default=b,ze}var Ke={},Er;function os(){if(Er)return Ke;Er=1,Object.defineProperty(Ke,"__esModule",{value:!0});const e=J(),y={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:d})=>(0,e.str)`must be multiple of ${d}`,params:({schemaCode:d})=>(0,e._)`{multipleOf: ${d}}`},code(d){const{gen:b,data:a,schemaCode:f,it:l}=d,h=l.opts.multipleOfPrecision,w=b.let("res"),v=h?(0,e._)`Math.abs(Math.round(${w}) - ${w}) > 1e-${h}`:(0,e._)`${w} !== parseInt(${w})`;d.fail$data((0,e._)`(${f} === 0 || (${w} = ${a}/${f}, ${v}))`)}};return Ke.default=y,Ke}var Le={},Ge={},Sr;function us(){if(Sr)return Ge;Sr=1,Object.defineProperty(Ge,"__esModule",{value:!0});function e(t){const y=t.length;let d=0,b=0,a;for(;b<y;)d++,a=t.charCodeAt(b++),a>=55296&&a<=56319&&b<y&&(a=t.charCodeAt(b),(a&64512)===56320&&b++);return d}return Ge.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',Ge}var Pr;function cs(){if(Pr)return Le;Pr=1,Object.defineProperty(Le,"__esModule",{value:!0});const e=J(),t=Q(),y=us(),b={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:a,schemaCode:f}){const l=a==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${l} than ${f} characters`},params:({schemaCode:a})=>(0,e._)`{limit: ${a}}`},code(a){const{keyword:f,data:l,schemaCode:h,it:w}=a,v=f==="maxLength"?e.operators.GT:e.operators.LT,P=w.opts.unicode===!1?(0,e._)`${l}.length`:(0,e._)`${(0,t.useFunc)(a.gen,y.default)}(${l})`;a.fail$data((0,e._)`${P} ${v} ${h}`)}};return Le.default=b,Le}var He={},Nr;function ls(){if(Nr)return He;Nr=1,Object.defineProperty(He,"__esModule",{value:!0});const e=le(),t=J(),d={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:b})=>(0,t.str)`must match pattern "${b}"`,params:({schemaCode:b})=>(0,t._)`{pattern: ${b}}`},code(b){const{data:a,$data:f,schema:l,schemaCode:h,it:w}=b,v=w.opts.unicodeRegExp?"u":"",P=f?(0,t._)`(new RegExp(${h}, ${v}))`:(0,e.usePattern)(b,l);b.fail$data((0,t._)`!${P}.test(${a})`)}};return He.default=d,He}var Je={},Rr;function ds(){if(Rr)return Je;Rr=1,Object.defineProperty(Je,"__esModule",{value:!0});const e=J(),y={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:d,schemaCode:b}){const a=d==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${b} properties`},params:({schemaCode:d})=>(0,e._)`{limit: ${d}}`},code(d){const{keyword:b,data:a,schemaCode:f}=d,l=b==="maxProperties"?e.operators.GT:e.operators.LT;d.fail$data((0,e._)`Object.keys(${a}).length ${l} ${f}`)}};return Je.default=y,Je}var We={},Or;function fs(){if(Or)return We;Or=1,Object.defineProperty(We,"__esModule",{value:!0});const e=le(),t=J(),y=Q(),b={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:a}})=>(0,t.str)`must have required property '${a}'`,params:({params:{missingProperty:a}})=>(0,t._)`{missingProperty: ${a}}`},code(a){const{gen:f,schema:l,schemaCode:h,data:w,$data:v,it:P}=a,{opts:g}=P;if(!v&&l.length===0)return;const _=l.length>=g.loopRequired;if(P.allErrors?p():E(),g.strictRequired){const r=a.parentSchema.properties,{definedProperties:i}=a.it;for(const m of l)if(r?.[m]===void 0&&!i.has(m)){const n=P.schemaEnv.baseId+P.errSchemaPath,u=`required property "${m}" is not defined at "${n}" (strictRequired)`;(0,y.checkStrictMode)(P,u,P.opts.strictRequired)}}function p(){if(_||v)a.block$data(t.nil,s);else for(const r of l)(0,e.checkReportMissingProp)(a,r)}function E(){const r=f.let("missing");if(_||v){const i=f.let("valid",!0);a.block$data(i,()=>o(r,i)),a.ok(i)}else f.if((0,e.checkMissingProp)(a,l,r)),(0,e.reportMissingProp)(a,r),f.else()}function s(){f.forOf("prop",h,r=>{a.setParams({missingProperty:r}),f.if((0,e.noPropertyInData)(f,w,r,g.ownProperties),()=>a.error())})}function o(r,i){a.setParams({missingProperty:r}),f.forOf(r,h,()=>{f.assign(i,(0,e.propertyInData)(f,w,r,g.ownProperties)),f.if((0,t.not)(i),()=>{a.error(),f.break()})},t.nil)}}};return We.default=b,We}var Be={},kr;function hs(){if(kr)return Be;kr=1,Object.defineProperty(Be,"__esModule",{value:!0});const e=J(),y={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:d,schemaCode:b}){const a=d==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${b} items`},params:({schemaCode:d})=>(0,e._)`{limit: ${d}}`},code(d){const{keyword:b,data:a,schemaCode:f}=d,l=b==="maxItems"?e.operators.GT:e.operators.LT;d.fail$data((0,e._)`${a}.length ${l} ${f}`)}};return Be.default=y,Be}var Qe={},Xe={},jr;function zt(){if(jr)return Xe;jr=1,Object.defineProperty(Xe,"__esModule",{value:!0});const e=dn();return e.code='require("ajv/dist/runtime/equal").default',Xe.default=e,Xe}var Tr;function ms(){if(Tr)return Qe;Tr=1,Object.defineProperty(Qe,"__esModule",{value:!0});const e=vt(),t=J(),y=Q(),d=zt(),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:f,j:l}})=>(0,t.str)`must NOT have duplicate items (items ## ${l} and ${f} are identical)`,params:({params:{i:f,j:l}})=>(0,t._)`{i: ${f}, j: ${l}}`},code(f){const{gen:l,data:h,$data:w,schema:v,parentSchema:P,schemaCode:g,it:_}=f;if(!w&&!v)return;const p=l.let("valid"),E=P.items?(0,e.getSchemaTypes)(P.items):[];f.block$data(p,s,(0,t._)`${g} === false`),f.ok(p);function s(){const m=l.let("i",(0,t._)`${h}.length`),n=l.let("j");f.setParams({i:m,j:n}),l.assign(p,!0),l.if((0,t._)`${m} > 1`,()=>(o()?r:i)(m,n))}function o(){return E.length>0&&!E.some(m=>m==="object"||m==="array")}function r(m,n){const u=l.name("item"),$=(0,e.checkDataTypes)(E,u,_.opts.strictNumbers,e.DataType.Wrong),j=l.const("indices",(0,t._)`{}`);l.for((0,t._)`;${m}--;`,()=>{l.let(u,(0,t._)`${h}[${m}]`),l.if($,(0,t._)`continue`),E.length>1&&l.if((0,t._)`typeof ${u} == "string"`,(0,t._)`${u} += "_"`),l.if((0,t._)`typeof ${j}[${u}] == "number"`,()=>{l.assign(n,(0,t._)`${j}[${u}]`),f.error(),l.assign(p,!1).break()}).code((0,t._)`${j}[${u}] = ${m}`)})}function i(m,n){const u=(0,y.useFunc)(l,d.default),$=l.name("outer");l.label($).for((0,t._)`;${m}--;`,()=>l.for((0,t._)`${n} = ${m}; ${n}--;`,()=>l.if((0,t._)`${u}(${h}[${m}], ${h}[${n}])`,()=>{f.error(),l.assign(p,!1).break($)})))}}};return Qe.default=a,Qe}var Ye={},Ir;function ps(){if(Ir)return Ye;Ir=1,Object.defineProperty(Ye,"__esModule",{value:!0});const e=J(),t=Q(),y=zt(),b={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:a})=>(0,e._)`{allowedValue: ${a}}`},code(a){const{gen:f,data:l,$data:h,schemaCode:w,schema:v}=a;h||v&&typeof v=="object"?a.fail$data((0,e._)`!${(0,t.useFunc)(f,y.default)}(${l}, ${w})`):a.fail((0,e._)`${v} !== ${l}`)}};return Ye.default=b,Ye}var Ze={},qr;function ys(){if(qr)return Ze;qr=1,Object.defineProperty(Ze,"__esModule",{value:!0});const e=J(),t=Q(),y=zt(),b={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:a})=>(0,e._)`{allowedValues: ${a}}`},code(a){const{gen:f,data:l,$data:h,schema:w,schemaCode:v,it:P}=a;if(!h&&w.length===0)throw new Error("enum must have non-empty array");const g=w.length>=P.opts.loopEnum;let _;const p=()=>_??(_=(0,t.useFunc)(f,y.default));let E;if(g||h)E=f.let("valid"),a.block$data(E,s);else{if(!Array.isArray(w))throw new Error("ajv implementation error");const r=f.const("vSchema",v);E=(0,e.or)(...w.map((i,m)=>o(r,m)))}a.pass(E);function s(){f.assign(E,!1),f.forOf("v",v,r=>f.if((0,e._)`${p()}(${l}, ${r})`,()=>f.assign(E,!0).break()))}function o(r,i){const m=w[i];return typeof m=="object"&&m!==null?(0,e._)`${p()}(${l}, ${r}[${i}])`:(0,e._)`${l} === ${m}`}}};return Ze.default=b,Ze}var Cr;function _s(){if(Cr)return Fe;Cr=1,Object.defineProperty(Fe,"__esModule",{value:!0});const e=is(),t=os(),y=cs(),d=ls(),b=ds(),a=fs(),f=hs(),l=ms(),h=ps(),w=ys(),v=[e.default,t.default,y.default,d.default,b.default,a.default,f.default,l.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},h.default,w.default];return Fe.default=v,Fe}var xe={},Pe={},Mr;function hn(){if(Mr)return Pe;Mr=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.validateAdditionalItems=void 0;const e=J(),t=Q(),d={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,e.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,e._)`{limit: ${a}}`},code(a){const{parentSchema:f,it:l}=a,{items:h}=f;if(!Array.isArray(h)){(0,t.checkStrictMode)(l,'"additionalItems" is ignored when "items" is not an array of schemas');return}b(a,h)}};function b(a,f){const{gen:l,schema:h,data:w,keyword:v,it:P}=a;P.items=!0;const g=l.const("len",(0,e._)`${w}.length`);if(h===!1)a.setParams({len:f.length}),a.pass((0,e._)`${g} <= ${f.length}`);else if(typeof h=="object"&&!(0,t.alwaysValidSchema)(P,h)){const p=l.var("valid",(0,e._)`${g} <= ${f.length}`);l.if((0,e.not)(p),()=>_(p)),a.ok(p)}function _(p){l.forRange("i",f.length,g,E=>{a.subschema({keyword:v,dataProp:E,dataPropType:t.Type.Num},p),P.allErrors||l.if((0,e.not)(p),()=>l.break())})}}return Pe.validateAdditionalItems=b,Pe.default=d,Pe}var et={},Ne={},Dr;function mn(){if(Dr)return Ne;Dr=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.validateTuple=void 0;const e=J(),t=Q(),y=le(),d={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(a){const{schema:f,it:l}=a;if(Array.isArray(f))return b(a,"additionalItems",f);l.items=!0,!(0,t.alwaysValidSchema)(l,f)&&a.ok((0,y.validateArray)(a))}};function b(a,f,l=a.schema){const{gen:h,parentSchema:w,data:v,keyword:P,it:g}=a;E(w),g.opts.unevaluated&&l.length&&g.items!==!0&&(g.items=t.mergeEvaluated.items(h,l.length,g.items));const _=h.name("valid"),p=h.const("len",(0,e._)`${v}.length`);l.forEach((s,o)=>{(0,t.alwaysValidSchema)(g,s)||(h.if((0,e._)`${p} > ${o}`,()=>a.subschema({keyword:P,schemaProp:o,dataProp:o},_)),a.ok(_))});function E(s){const{opts:o,errSchemaPath:r}=g,i=l.length,m=i===s.minItems&&(i===s.maxItems||s[f]===!1);if(o.strictTuples&&!m){const n=`"${P}" is ${i}-tuple, but minItems or maxItems/${f} are not specified or different at path "${r}"`;(0,t.checkStrictMode)(g,n,o.strictTuples)}}}return Ne.validateTuple=b,Ne.default=d,Ne}var Ar;function vs(){if(Ar)return et;Ar=1,Object.defineProperty(et,"__esModule",{value:!0});const e=mn(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:y=>(0,e.validateTuple)(y,"items")};return et.default=t,et}var tt={},Vr;function gs(){if(Vr)return tt;Vr=1,Object.defineProperty(tt,"__esModule",{value:!0});const e=J(),t=Q(),y=le(),d=hn(),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:f}})=>(0,e.str)`must NOT have more than ${f} items`,params:({params:{len:f}})=>(0,e._)`{limit: ${f}}`},code(f){const{schema:l,parentSchema:h,it:w}=f,{prefixItems:v}=h;w.items=!0,!(0,t.alwaysValidSchema)(w,l)&&(v?(0,d.validateAdditionalItems)(f,v):f.ok((0,y.validateArray)(f)))}};return tt.default=a,tt}var rt={},Ur;function $s(){if(Ur)return rt;Ur=1,Object.defineProperty(rt,"__esModule",{value:!0});const e=J(),t=Q(),d={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:b,max:a}})=>a===void 0?(0,e.str)`must contain at least ${b} valid item(s)`:(0,e.str)`must contain at least ${b} and no more than ${a} valid item(s)`,params:({params:{min:b,max:a}})=>a===void 0?(0,e._)`{minContains: ${b}}`:(0,e._)`{minContains: ${b}, maxContains: ${a}}`},code(b){const{gen:a,schema:f,parentSchema:l,data:h,it:w}=b;let v,P;const{minContains:g,maxContains:_}=l;w.opts.next?(v=g===void 0?1:g,P=_):v=1;const p=a.const("len",(0,e._)`${h}.length`);if(b.setParams({min:v,max:P}),P===void 0&&v===0){(0,t.checkStrictMode)(w,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(P!==void 0&&v>P){(0,t.checkStrictMode)(w,'"minContains" > "maxContains" is always invalid'),b.fail();return}if((0,t.alwaysValidSchema)(w,f)){let i=(0,e._)`${p} >= ${v}`;P!==void 0&&(i=(0,e._)`${i} && ${p} <= ${P}`),b.pass(i);return}w.items=!0;const E=a.name("valid");P===void 0&&v===1?o(E,()=>a.if(E,()=>a.break())):v===0?(a.let(E,!0),P!==void 0&&a.if((0,e._)`${h}.length > 0`,s)):(a.let(E,!1),s()),b.result(E,()=>b.reset());function s(){const i=a.name("_valid"),m=a.let("count",0);o(i,()=>a.if(i,()=>r(m)))}function o(i,m){a.forRange("i",0,p,n=>{b.subschema({keyword:"contains",dataProp:n,dataPropType:t.Type.Num,compositeRule:!0},i),m()})}function r(i){a.code((0,e._)`${i}++`),P===void 0?a.if((0,e._)`${i} >= ${v}`,()=>a.assign(E,!0).break()):(a.if((0,e._)`${i} > ${P}`,()=>a.assign(E,!1).break()),v===1?a.assign(E,!0):a.if((0,e._)`${i} >= ${v}`,()=>a.assign(E,!0)))}}};return rt.default=d,rt}var At={},Fr;function ws(){return Fr||(Fr=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=J(),y=Q(),d=le();e.error={message:({params:{property:h,depsCount:w,deps:v}})=>{const P=w===1?"property":"properties";return(0,t.str)`must have ${P} ${v} when property ${h} is present`},params:({params:{property:h,depsCount:w,deps:v,missingProperty:P}})=>(0,t._)`{property: ${h},
    missingProperty: ${P},
    depsCount: ${w},
    deps: ${v}}`};const b={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(h){const[w,v]=a(h);f(h,w),l(h,v)}};function a({schema:h}){const w={},v={};for(const P in h){if(P==="__proto__")continue;const g=Array.isArray(h[P])?w:v;g[P]=h[P]}return[w,v]}function f(h,w=h.schema){const{gen:v,data:P,it:g}=h;if(Object.keys(w).length===0)return;const _=v.let("missing");for(const p in w){const E=w[p];if(E.length===0)continue;const s=(0,d.propertyInData)(v,P,p,g.opts.ownProperties);h.setParams({property:p,depsCount:E.length,deps:E.join(", ")}),g.allErrors?v.if(s,()=>{for(const o of E)(0,d.checkReportMissingProp)(h,o)}):(v.if((0,t._)`${s} && (${(0,d.checkMissingProp)(h,E,_)})`),(0,d.reportMissingProp)(h,_),v.else())}}e.validatePropertyDeps=f;function l(h,w=h.schema){const{gen:v,data:P,keyword:g,it:_}=h,p=v.name("valid");for(const E in w)(0,y.alwaysValidSchema)(_,w[E])||(v.if((0,d.propertyInData)(v,P,E,_.opts.ownProperties),()=>{const s=h.subschema({keyword:g,schemaProp:E},p);h.mergeValidEvaluated(s,p)},()=>v.var(p,!0)),h.ok(p))}e.validateSchemaDeps=l,e.default=b})(At)),At}var nt={},zr;function bs(){if(zr)return nt;zr=1,Object.defineProperty(nt,"__esModule",{value:!0});const e=J(),t=Q(),d={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:b})=>(0,e._)`{propertyName: ${b.propertyName}}`},code(b){const{gen:a,schema:f,data:l,it:h}=b;if((0,t.alwaysValidSchema)(h,f))return;const w=a.name("valid");a.forIn("key",l,v=>{b.setParams({propertyName:v}),b.subschema({keyword:"propertyNames",data:v,dataTypes:["string"],propertyName:v,compositeRule:!0},w),a.if((0,e.not)(w),()=>{b.error(!0),h.allErrors||a.break()})}),b.ok(w)}};return nt.default=d,nt}var st={},Kr;function pn(){if(Kr)return st;Kr=1,Object.defineProperty(st,"__esModule",{value:!0});const e=le(),t=J(),y=ve(),d=Q(),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:f})=>(0,t._)`{additionalProperty: ${f.additionalProperty}}`},code(f){const{gen:l,schema:h,parentSchema:w,data:v,errsCount:P,it:g}=f;if(!P)throw new Error("ajv implementation error");const{allErrors:_,opts:p}=g;if(g.props=!0,p.removeAdditional!=="all"&&(0,d.alwaysValidSchema)(g,h))return;const E=(0,e.allSchemaProperties)(w.properties),s=(0,e.allSchemaProperties)(w.patternProperties);o(),f.ok((0,t._)`${P} === ${y.default.errors}`);function o(){l.forIn("key",v,u=>{!E.length&&!s.length?m(u):l.if(r(u),()=>m(u))})}function r(u){let $;if(E.length>8){const j=(0,d.schemaRefOrVal)(g,w.properties,"properties");$=(0,e.isOwnProperty)(l,j,u)}else E.length?$=(0,t.or)(...E.map(j=>(0,t._)`${u} === ${j}`)):$=t.nil;return s.length&&($=(0,t.or)($,...s.map(j=>(0,t._)`${(0,e.usePattern)(f,j)}.test(${u})`))),(0,t.not)($)}function i(u){l.code((0,t._)`delete ${v}[${u}]`)}function m(u){if(p.removeAdditional==="all"||p.removeAdditional&&h===!1){i(u);return}if(h===!1){f.setParams({additionalProperty:u}),f.error(),_||l.break();return}if(typeof h=="object"&&!(0,d.alwaysValidSchema)(g,h)){const $=l.name("valid");p.removeAdditional==="failing"?(n(u,$,!1),l.if((0,t.not)($),()=>{f.reset(),i(u)})):(n(u,$),_||l.if((0,t.not)($),()=>l.break()))}}function n(u,$,j){const C={keyword:"additionalProperties",dataProp:u,dataPropType:d.Type.Str};j===!1&&Object.assign(C,{compositeRule:!0,createErrors:!1,allErrors:!1}),f.subschema(C,$)}}};return st.default=a,st}var at={},Lr;function Es(){if(Lr)return at;Lr=1,Object.defineProperty(at,"__esModule",{value:!0});const e=wt(),t=le(),y=Q(),d=pn(),b={keyword:"properties",type:"object",schemaType:"object",code(a){const{gen:f,schema:l,parentSchema:h,data:w,it:v}=a;v.opts.removeAdditional==="all"&&h.additionalProperties===void 0&&d.default.code(new e.KeywordCxt(v,d.default,"additionalProperties"));const P=(0,t.allSchemaProperties)(l);for(const s of P)v.definedProperties.add(s);v.opts.unevaluated&&P.length&&v.props!==!0&&(v.props=y.mergeEvaluated.props(f,(0,y.toHash)(P),v.props));const g=P.filter(s=>!(0,y.alwaysValidSchema)(v,l[s]));if(g.length===0)return;const _=f.name("valid");for(const s of g)p(s)?E(s):(f.if((0,t.propertyInData)(f,w,s,v.opts.ownProperties)),E(s),v.allErrors||f.else().var(_,!0),f.endIf()),a.it.definedProperties.add(s),a.ok(_);function p(s){return v.opts.useDefaults&&!v.compositeRule&&l[s].default!==void 0}function E(s){a.subschema({keyword:"properties",schemaProp:s,dataProp:s},_)}}};return at.default=b,at}var it={},Gr;function Ss(){if(Gr)return it;Gr=1,Object.defineProperty(it,"__esModule",{value:!0});const e=le(),t=J(),y=Q(),d=Q(),b={keyword:"patternProperties",type:"object",schemaType:"object",code(a){const{gen:f,schema:l,data:h,parentSchema:w,it:v}=a,{opts:P}=v,g=(0,e.allSchemaProperties)(l),_=g.filter(m=>(0,y.alwaysValidSchema)(v,l[m]));if(g.length===0||_.length===g.length&&(!v.opts.unevaluated||v.props===!0))return;const p=P.strictSchema&&!P.allowMatchingProperties&&w.properties,E=f.name("valid");v.props!==!0&&!(v.props instanceof t.Name)&&(v.props=(0,d.evaluatedPropsToName)(f,v.props));const{props:s}=v;o();function o(){for(const m of g)p&&r(m),v.allErrors?i(m):(f.var(E,!0),i(m),f.if(E))}function r(m){for(const n in p)new RegExp(m).test(n)&&(0,y.checkStrictMode)(v,`property ${n} matches pattern ${m} (use allowMatchingProperties)`)}function i(m){f.forIn("key",h,n=>{f.if((0,t._)`${(0,e.usePattern)(a,m)}.test(${n})`,()=>{const u=_.includes(m);u||a.subschema({keyword:"patternProperties",schemaProp:m,dataProp:n,dataPropType:d.Type.Str},E),v.opts.unevaluated&&s!==!0?f.assign((0,t._)`${s}[${n}]`,!0):!u&&!v.allErrors&&f.if((0,t.not)(E),()=>f.break())})})}}};return it.default=b,it}var ot={},Hr;function Ps(){if(Hr)return ot;Hr=1,Object.defineProperty(ot,"__esModule",{value:!0});const e=Q(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(y){const{gen:d,schema:b,it:a}=y;if((0,e.alwaysValidSchema)(a,b)){y.fail();return}const f=d.name("valid");y.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},f),y.failResult(f,()=>y.reset(),()=>y.error())},error:{message:"must NOT be valid"}};return ot.default=t,ot}var ut={},Jr;function Ns(){if(Jr)return ut;Jr=1,Object.defineProperty(ut,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:le().validateUnion,error:{message:"must match a schema in anyOf"}};return ut.default=t,ut}var ct={},Wr;function Rs(){if(Wr)return ct;Wr=1,Object.defineProperty(ct,"__esModule",{value:!0});const e=J(),t=Q(),d={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:b})=>(0,e._)`{passingSchemas: ${b.passing}}`},code(b){const{gen:a,schema:f,parentSchema:l,it:h}=b;if(!Array.isArray(f))throw new Error("ajv implementation error");if(h.opts.discriminator&&l.discriminator)return;const w=f,v=a.let("valid",!1),P=a.let("passing",null),g=a.name("_valid");b.setParams({passing:P}),a.block(_),b.result(v,()=>b.reset(),()=>b.error(!0));function _(){w.forEach((p,E)=>{let s;(0,t.alwaysValidSchema)(h,p)?a.var(g,!0):s=b.subschema({keyword:"oneOf",schemaProp:E,compositeRule:!0},g),E>0&&a.if((0,e._)`${g} && ${v}`).assign(v,!1).assign(P,(0,e._)`[${P}, ${E}]`).else(),a.if(g,()=>{a.assign(v,!0),a.assign(P,E),s&&b.mergeEvaluated(s,e.Name)})})}}};return ct.default=d,ct}var lt={},Br;function Os(){if(Br)return lt;Br=1,Object.defineProperty(lt,"__esModule",{value:!0});const e=Q(),t={keyword:"allOf",schemaType:"array",code(y){const{gen:d,schema:b,it:a}=y;if(!Array.isArray(b))throw new Error("ajv implementation error");const f=d.name("valid");b.forEach((l,h)=>{if((0,e.alwaysValidSchema)(a,l))return;const w=y.subschema({keyword:"allOf",schemaProp:h},f);y.ok(f),y.mergeEvaluated(w)})}};return lt.default=t,lt}var dt={},Qr;function ks(){if(Qr)return dt;Qr=1,Object.defineProperty(dt,"__esModule",{value:!0});const e=J(),t=Q(),d={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:a})=>(0,e.str)`must match "${a.ifClause}" schema`,params:({params:a})=>(0,e._)`{failingKeyword: ${a.ifClause}}`},code(a){const{gen:f,parentSchema:l,it:h}=a;l.then===void 0&&l.else===void 0&&(0,t.checkStrictMode)(h,'"if" without "then" and "else" is ignored');const w=b(h,"then"),v=b(h,"else");if(!w&&!v)return;const P=f.let("valid",!0),g=f.name("_valid");if(_(),a.reset(),w&&v){const E=f.let("ifClause");a.setParams({ifClause:E}),f.if(g,p("then",E),p("else",E))}else w?f.if(g,p("then")):f.if((0,e.not)(g),p("else"));a.pass(P,()=>a.error(!0));function _(){const E=a.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},g);a.mergeEvaluated(E)}function p(E,s){return()=>{const o=a.subschema({keyword:E},g);f.assign(P,g),a.mergeValidEvaluated(o,P),s?f.assign(s,(0,e._)`${E}`):a.setParams({ifClause:E})}}}};function b(a,f){const l=a.schema[f];return l!==void 0&&!(0,t.alwaysValidSchema)(a,l)}return dt.default=d,dt}var ft={},Xr;function js(){if(Xr)return ft;Xr=1,Object.defineProperty(ft,"__esModule",{value:!0});const e=Q(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:y,parentSchema:d,it:b}){d.if===void 0&&(0,e.checkStrictMode)(b,`"${y}" without "if" is ignored`)}};return ft.default=t,ft}var Yr;function Ts(){if(Yr)return xe;Yr=1,Object.defineProperty(xe,"__esModule",{value:!0});const e=hn(),t=vs(),y=mn(),d=gs(),b=$s(),a=ws(),f=bs(),l=pn(),h=Es(),w=Ss(),v=Ps(),P=Ns(),g=Rs(),_=Os(),p=ks(),E=js();function s(o=!1){const r=[v.default,P.default,g.default,_.default,p.default,E.default,f.default,l.default,a.default,h.default,w.default];return o?r.push(t.default,d.default):r.push(e.default,y.default),r.push(b.default),r}return xe.default=s,xe}var ht={},mt={},Zr;function Is(){if(Zr)return mt;Zr=1,Object.defineProperty(mt,"__esModule",{value:!0});const e=J(),y={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:d})=>(0,e.str)`must match format "${d}"`,params:({schemaCode:d})=>(0,e._)`{format: ${d}}`},code(d,b){const{gen:a,data:f,$data:l,schema:h,schemaCode:w,it:v}=d,{opts:P,errSchemaPath:g,schemaEnv:_,self:p}=v;if(!P.validateFormats)return;l?E():s();function E(){const o=a.scopeValue("formats",{ref:p.formats,code:P.code.formats}),r=a.const("fDef",(0,e._)`${o}[${w}]`),i=a.let("fType"),m=a.let("format");a.if((0,e._)`typeof ${r} == "object" && !(${r} instanceof RegExp)`,()=>a.assign(i,(0,e._)`${r}.type || "string"`).assign(m,(0,e._)`${r}.validate`),()=>a.assign(i,(0,e._)`"string"`).assign(m,r)),d.fail$data((0,e.or)(n(),u()));function n(){return P.strictSchema===!1?e.nil:(0,e._)`${w} && !${m}`}function u(){const $=_.$async?(0,e._)`(${r}.async ? await ${m}(${f}) : ${m}(${f}))`:(0,e._)`${m}(${f})`,j=(0,e._)`(typeof ${m} == "function" ? ${$} : ${m}.test(${f}))`;return(0,e._)`${m} && ${m} !== true && ${i} === ${b} && !${j}`}}function s(){const o=p.formats[h];if(!o){n();return}if(o===!0)return;const[r,i,m]=u(o);r===b&&d.pass($());function n(){if(P.strictSchema===!1){p.logger.warn(j());return}throw new Error(j());function j(){return`unknown format "${h}" ignored in schema at path "${g}"`}}function u(j){const C=j instanceof RegExp?(0,e.regexpCode)(j):P.code.formats?(0,e._)`${P.code.formats}${(0,e.getProperty)(h)}`:void 0,A=a.scopeValue("formats",{key:h,ref:j,code:C});return typeof j=="object"&&!(j instanceof RegExp)?[j.type||"string",j.validate,(0,e._)`${A}.validate`]:["string",j,A]}function $(){if(typeof o=="object"&&!(o instanceof RegExp)&&o.async){if(!_.$async)throw new Error("async format in sync schema");return(0,e._)`await ${m}(${f})`}return typeof i=="function"?(0,e._)`${m}(${f})`:(0,e._)`${m}.test(${f})`}}}};return mt.default=y,mt}var xr;function qs(){if(xr)return ht;xr=1,Object.defineProperty(ht,"__esModule",{value:!0});const t=[Is().default];return ht.default=t,ht}var we={},en;function Cs(){return en||(en=1,Object.defineProperty(we,"__esModule",{value:!0}),we.contentVocabulary=we.metadataVocabulary=void 0,we.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],we.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),we}var tn;function Ms(){if(tn)return Ae;tn=1,Object.defineProperty(Ae,"__esModule",{value:!0});const e=as(),t=_s(),y=Ts(),d=qs(),b=Cs(),a=[e.default,t.default,(0,y.default)(),d.default,b.metadataVocabulary,b.contentVocabulary];return Ae.default=a,Ae}var pt={},Te={},rn;function Ds(){if(rn)return Te;rn=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.DiscrError=void 0;var e;return(function(t){t.Tag="tag",t.Mapping="mapping"})(e||(Te.DiscrError=e={})),Te}var nn;function As(){if(nn)return pt;nn=1,Object.defineProperty(pt,"__esModule",{value:!0});const e=J(),t=Ds(),y=Ft(),d=bt(),b=Q(),f={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:l,tagName:h}})=>l===t.DiscrError.Tag?`tag "${h}" must be string`:`value of tag "${h}" must be in oneOf`,params:({params:{discrError:l,tag:h,tagName:w}})=>(0,e._)`{error: ${l}, tag: ${w}, tagValue: ${h}}`},code(l){const{gen:h,data:w,schema:v,parentSchema:P,it:g}=l,{oneOf:_}=P;if(!g.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=v.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(v.mapping)throw new Error("discriminator: mapping is not supported");if(!_)throw new Error("discriminator: requires oneOf keyword");const E=h.let("valid",!1),s=h.const("tag",(0,e._)`${w}${(0,e.getProperty)(p)}`);h.if((0,e._)`typeof ${s} == "string"`,()=>o(),()=>l.error(!1,{discrError:t.DiscrError.Tag,tag:s,tagName:p})),l.ok(E);function o(){const m=i();h.if(!1);for(const n in m)h.elseIf((0,e._)`${s} === ${n}`),h.assign(E,r(m[n]));h.else(),l.error(!1,{discrError:t.DiscrError.Mapping,tag:s,tagName:p}),h.endIf()}function r(m){const n=h.name("valid"),u=l.subschema({keyword:"oneOf",schemaProp:m},n);return l.mergeEvaluated(u,e.Name),n}function i(){var m;const n={},u=j(P);let $=!0;for(let V=0;V<_.length;V++){let L=_[V];if(L?.$ref&&!(0,b.schemaHasRulesButRef)(L,g.self.RULES)){const B=L.$ref;if(L=y.resolveRef.call(g.self,g.schemaEnv.root,g.baseId,B),L instanceof y.SchemaEnv&&(L=L.schema),L===void 0)throw new d.default(g.opts.uriResolver,g.baseId,B)}const K=(m=L?.properties)===null||m===void 0?void 0:m[p];if(typeof K!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);$=$&&(u||j(L)),C(K,V)}if(!$)throw new Error(`discriminator: "${p}" must be required`);return n;function j({required:V}){return Array.isArray(V)&&V.includes(p)}function C(V,L){if(V.const)A(V.const,L);else if(V.enum)for(const K of V.enum)A(K,L);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function A(V,L){if(typeof V!="string"||V in n)throw new Error(`discriminator: "${p}" values must be unique strings`);n[V]=L}}}};return pt.default=f,pt}const Vs="http://json-schema.org/draft-07/schema#",Us="http://json-schema.org/draft-07/schema#",Fs="Core schema meta-schema",zs={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Ks=["object","boolean"],Ls={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Gs={$schema:Vs,$id:Us,title:Fs,definitions:zs,type:Ks,properties:Ls,default:!0};var sn;function Hs(){return sn||(sn=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const y=rs(),d=Ms(),b=As(),a=Gs,f=["/properties"],l="http://json-schema.org/draft-07/schema";class h extends y.default{_addVocabularies(){super._addVocabularies(),d.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(b.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(a,f):a;this.addMetaSchema(p,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=h,e.exports=t=h,e.exports.Ajv=h,Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var w=wt();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return w.KeywordCxt}});var v=J();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return v._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return v.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return v.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return v.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return v.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return v.CodeGen}});var P=Ut();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return P.default}});var g=bt();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return g.default}})})(Ie,Ie.exports)),Ie.exports}var Js=Hs();const Ws=Dn(Js),Bs={type:"object",properties:{gearsets:{type:"array",items:Un,minItems:1}},required:["gearsets"],additionalProperties:!1},Qs={type:"object",properties:{default:Vt,special:{type:"array",items:{type:"object",properties:{name:an,value:{...Vt,nullable:!0}},required:["name"]}}},required:["default","special"],additionalProperties:!1},yn=new Ws,Xs=yn.compile(Bs),Ys=yn.compile(Qs),fa=bn("gearsets",{state:()=>{const e=[{id:0,value:{...Rt},compatibleJobs:Object.values(be)}];for(const t of Object.values(be))e.push({id:e.length,value:{...Rt},compatibleJobs:[t]});return{gearsets:e}},getters:{toJson(){return JSON.stringify({gearsets:this.gearsets})},nextId(){return this.gearsets.reduce((t,y)=>Math.max(t,y.id),0)+1},default(){return this.gearsets[0]}},actions:{fromJson(e){const t=JSON.parse(e);if(Ys(t)){this.gearsets.splice(0),this.gearsets.push({id:0,value:t.default,compatibleJobs:Object.values(be)});for(const y of t.special){const d=y.value??t.default;d!=null&&this.gearsets.push({id:this.nextId,value:d,compatibleJobs:[y.name]})}}Xs(t)&&(this.gearsets.splice(0),this.gearsets=t.gearsets)},addGearset(){this.gearsets.push({id:this.nextId,value:{...Rt},compatibleJobs:Object.values(be)})},delGearset(e){const t=this.gearsets.findIndex(y=>y.id==e);console.assert(t!=-1,"Removing unknown gearset id =",e),this.gearsets.splice(t,1)}}});export{on as A,Vn as C,be as J,An as L,da as a,oa as b,ea as c,ua as d,ca as e,ra as f,Cn as g,ia as h,sa as i,la as j,aa as k,Ht as l,ta as n,na as s,xs as t,fa as u};
//# sourceMappingURL=gearsets-C2FySwp0.js.map
