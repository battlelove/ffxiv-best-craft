import{n as he,o as be,v as Re,z as le,W as $e,Y as qe,A as X,f as ze,al as J}from"./main-DaRLB14i.js";import{F as ge,h as re,j as z,_ as ye,u as oe,al as je,G as ne,E as Te,H as ke}from"./web-source-BjHx1D90.js";import{v as j,U as ue,r as P,k as f,y as N,af as Z,w as T,x as Se,ah as _e,B as Fe,C as ee,z as q,E as A,u as c,q as we,m as k,L as We,A as Ie,aR as De,K as D,J as Ge,R as Ce,a9 as Ue,a7 as de,P as Q,M as Ke,O as ce,ac as Ye,D as fe,aa as He,a1 as ve,aC as Je}from"./_plugin-vue_export-helper-BaoA9pDx.js";import{b as Qe,c as te}from"./el-scrollbar-gTgzHUAE.js";import{S as Xe}from"./index-Cp9QasH9.js";var Ze=4;function me(d){return Qe(d,Ze)}const et=re({size:{type:String,values:he},disabled:Boolean}),tt=re({...et,model:Object,rules:{type:z(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:z([Object,Boolean]),default:!0}}),lt={validate:(d,p,e)=>(j(d)||ue(d))&&ge(p)&&ue(e)};function rt(){const d=P([]),p=f(()=>{if(!d.value.length)return"0";const r=Math.max(...d.value);return r?`${r}px`:""});function e(r){const v=d.value.indexOf(r);return v===-1&&p.value,v}function s(r,v){if(r&&v){const i=e(v);d.value.splice(i,1,r)}else r&&d.value.push(r)}function l(r){const v=e(r);v>-1&&d.value.splice(v,1)}return{autoLabelWidth:p,registerLabelWidth:s,deregisterLabelWidth:l}}const $=(d,p)=>{const e=te(p).map(s=>j(s)?s.join("."):s);return e.length>0?d.filter(s=>s.propString&&e.includes(s.propString)):d},ot="ElForm",at=N({name:ot}),st=N({...at,props:tt,emits:lt,setup(d,{expose:p,emit:e}){const s=d,l=P(),r=Z([]),v=be(),i=oe("form"),E=f(()=>{const{labelPosition:o,inline:u}=s;return[i.b(),i.m(v.value||"default"),{[i.m(`label-${o}`)]:o,[i.m("inline")]:u}]}),g=o=>$(r,[o])[0],n=o=>{r.push(o)},y=o=>{o.prop&&r.splice(r.indexOf(o),1)},S=(o=[])=>{s.model&&$(r,o).forEach(u=>u.resetField())},w=(o=[])=>{$(r,o).forEach(u=>u.clearValidate())},M=f(()=>!!s.model),W=o=>{if(r.length===0)return[];const u=$(r,o);return u.length?u:[]},_=async o=>L(void 0,o),O=async(o=[])=>{if(!M.value)return!1;const u=W(o);if(u.length===0)return!0;let b={};for(const I of u)try{await I.validate(""),I.validateState==="error"&&!I.error&&I.resetField()}catch(C){b={...b,...C}}return Object.keys(b).length===0?!0:Promise.reject(b)},L=async(o=[],u)=>{let b=!1;const I=!we(u);try{return b=await O(o),b===!0&&await u?.(b),b}catch(C){if(C instanceof Error)throw C;const x=C;if(s.scrollToError&&l.value){const R=l.value.querySelector(`.${i.b()}-item.is-error`);R?.scrollIntoView(s.scrollIntoViewOptions)}return!b&&await u?.(!1,x),I&&Promise.reject(x)}},G=o=>{var u;const b=g(o);b&&((u=b.$el)==null||u.scrollIntoView(s.scrollIntoViewOptions))};return T(()=>s.rules,()=>{s.validateOnRuleChange&&_().catch(o=>Re())},{deep:!0,flush:"post"}),Se(le,Z({..._e(s),emit:e,resetFields:S,clearValidate:w,validateField:L,getField:g,addField:n,removeField:y,...rt()})),p({validate:_,validateField:L,resetFields:S,clearValidate:w,scrollToField:G,getField:g,fields:r}),(o,u)=>(ee(),Fe("form",{ref_key:"formRef",ref:l,class:A(c(E))},[q(o.$slots,"default")],2))}});var it=ye(st,[["__file","form.vue"]]);const nt=["","error","validating","success"],ut=re({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:z([String,Array])},required:{type:Boolean,default:void 0},rules:{type:z([Object,Array])},error:String,validateStatus:{type:String,values:nt},for:String,inlineMessage:{type:Boolean,default:void 0},showMessage:{type:Boolean,default:!0},size:{type:String,values:he}}),pe="ElLabelWrap";var dt=N({name:pe,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(d,{slots:p}){const e=k(le,void 0),s=k(X);s||$e(pe,"usage: <el-form-item><label-wrap /></el-form-item>");const l=oe("form"),r=P(),v=P(0),i=()=>{var n;if((n=r.value)!=null&&n.firstElementChild){const y=window.getComputedStyle(r.value.firstElementChild).width;return Math.ceil(Number.parseFloat(y))}else return 0},E=(n="update")=>{Ce(()=>{p.default&&d.isAutoWidth&&(n==="update"?v.value=i():n==="remove"&&e?.deregisterLabelWidth(v.value))})},g=()=>E("update");return We(()=>{g()}),Ie(()=>{E("remove")}),De(()=>g()),T(v,(n,y)=>{d.updateAll&&e?.registerLabelWidth(n,y)}),qe(f(()=>{var n,y;return(y=(n=r.value)==null?void 0:n.firstElementChild)!=null?y:null}),g),()=>{var n,y;if(!p)return null;const{isAutoWidth:S}=d;if(S){const w=e?.autoLabelWidth,M=s?.hasLabel,W={};if(M&&w&&w!=="auto"){const _=Math.max(0,Number.parseInt(w,10)-v.value),L=(s.labelPosition||e.labelPosition)==="left"?"marginRight":"marginLeft";_&&(W[L]=`${_}px`)}return D("div",{ref:r,class:[l.be("item","label-wrap")],style:W},[(n=p.default)==null?void 0:n.call(p)])}else return D(Ge,{ref:r},[(y=p.default)==null?void 0:y.call(p)])}}});const ct=N({name:"ElFormItem"}),ft=N({...ct,props:ut,setup(d,{expose:p}){const e=d,s=Ue(),l=k(le,void 0),r=k(X,void 0),v=be(void 0,{formItem:!1}),i=oe("form-item"),E=ze().value,g=P([]),n=P(""),y=je(n,100),S=P(""),w=P();let M,W=!1;const _=f(()=>e.labelPosition||l?.labelPosition),O=f(()=>{if(_.value==="top")return{};const t=ne(e.labelWidth||l?.labelWidth||"");return t?{width:t}:{}}),L=f(()=>{if(_.value==="top"||l?.inline)return{};if(!e.label&&!e.labelWidth&&R)return{};const t=ne(e.labelWidth||l?.labelWidth||"");return!e.label&&!s.label?{marginLeft:t}:{}}),G=f(()=>[i.b(),i.m(v.value),i.is("error",n.value==="error"),i.is("validating",n.value==="validating"),i.is("success",n.value==="success"),i.is("required",Me.value||e.required),i.is("no-asterisk",l?.hideRequiredAsterisk),l?.requireAsteriskPosition==="right"?"asterisk-right":"asterisk-left",{[i.m("feedback")]:l?.statusIcon,[i.m(`label-${_.value}`)]:_.value}]),o=f(()=>ge(e.inlineMessage)?e.inlineMessage:l?.inlineMessage||!1),u=f(()=>[i.e("error"),{[i.em("error","inline")]:o.value}]),b=f(()=>e.prop?j(e.prop)?e.prop.join("."):e.prop:""),I=f(()=>!!(e.label||s.label)),C=f(()=>{var t;return(t=e.for)!=null?t:g.value.length===1?g.value[0]:void 0}),x=f(()=>!C.value&&I.value),R=!!r,U=f(()=>{const t=l?.model;if(!(!t||!e.prop))return J(t,e.prop).value}),K=f(()=>{const{required:t}=e,a=[];e.rules&&a.push(...te(e.rules));const h=l?.rules;if(h&&e.prop){const m=J(h,e.prop).value;m&&a.push(...te(m))}if(t!==void 0){const m=a.map((F,V)=>[F,V]).filter(([F])=>"required"in F);if(m.length>0)for(const[F,V]of m)F.required!==t&&(a[V]={...F,required:t});else a.push({required:t})}return a}),Pe=f(()=>K.value.length>0),Le=t=>K.value.filter(h=>!h.trigger||!t?!0:j(h.trigger)?h.trigger.includes(t):h.trigger===t).map(({trigger:h,...m})=>m),Me=f(()=>K.value.some(t=>t.required)),xe=f(()=>{var t;return y.value==="error"&&e.showMessage&&((t=l?.showMessage)!=null?t:!0)}),ae=f(()=>`${e.label||""}${l?.labelSuffix||""}`),B=t=>{n.value=t},Be=t=>{var a,h;const{errors:m,fields:F}=t;(!m||!F)&&console.error(t),B("error"),S.value=m?(h=(a=m?.[0])==null?void 0:a.message)!=null?h:`${e.prop} is required`:"",l?.emit("validate",e.prop,!1,S.value)},Ve=()=>{B("success"),l?.emit("validate",e.prop,!0,"")},Oe=async t=>{const a=b.value;return new Xe({[a]:t}).validate({[a]:U.value},{firstFields:!0}).then(()=>(Ve(),!0)).catch(m=>(Be(m),Promise.reject(m)))},se=async(t,a)=>{if(W||!e.prop)return!1;const h=we(a);if(!Pe.value)return a?.(!1),!1;const m=Le(t);return m.length===0?(a?.(!0),!0):(B("validating"),Oe(m).then(()=>(a?.(!0),!0)).catch(F=>{const{fields:V}=F;return a?.(!1,V),h?!1:Promise.reject(V)}))},Y=()=>{B(""),S.value="",W=!1},ie=async()=>{const t=l?.model;if(!t||!e.prop)return;const a=J(t,e.prop);W=!0,a.value=me(M),await Ce(),Y(),W=!1},Ae=t=>{g.value.includes(t)||g.value.push(t)},Ne=t=>{g.value=g.value.filter(a=>a!==t)};T(()=>e.error,t=>{S.value=t||"",B(t?"error":"")},{immediate:!0}),T(()=>e.validateStatus,t=>B(t||""));const H=Z({..._e(e),$el:w,size:v,validateMessage:S,validateState:n,labelId:E,inputIds:g,isGroup:x,hasLabel:I,fieldValue:U,addInputId:Ae,removeInputId:Ne,resetField:ie,clearValidate:Y,validate:se,propString:b});return Se(X,H),We(()=>{e.prop&&(l?.addField(H),M=me(U.value))}),Ie(()=>{l?.removeField(H)}),p({size:v,validateMessage:S,validateState:n,validate:se,clearValidate:Y,resetField:ie}),(t,a)=>{var h;return ee(),Fe("div",{ref_key:"formItemRef",ref:w,class:A(c(G)),role:c(x)?"group":void 0,"aria-labelledby":c(x)?c(E):void 0},[D(c(dt),{"is-auto-width":c(O).width==="auto","update-all":((h=c(l))==null?void 0:h.labelWidth)==="auto"},{default:Q(()=>[t.label||t.$slots.label?(ee(),Ke(Ye(c(C)?"label":"div"),{key:0,id:c(E),for:c(C),class:A(c(i).e("label")),style:fe(c(O))},{default:Q(()=>[q(t.$slots,"label",{label:c(ae)},()=>[He(ve(c(ae)),1)])]),_:3},8,["id","for","class","style"])):ce("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),de("div",{class:A(c(i).e("content")),style:fe(c(L))},[q(t.$slots,"default"),D(Je,{name:`${c(i).namespace.value}-zoom-in-top`},{default:Q(()=>[c(xe)?q(t.$slots,"error",{key:0,error:S.value},()=>[de("div",{class:A(c(u))},ve(S.value),3)]):ce("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var Ee=ye(ft,[["__file","form-item.vue"]]);const gt=Te(it,{FormItem:Ee}),yt=ke(Ee);export{yt as E,gt as a};
//# sourceMappingURL=el-form-item-BRI_lZ6x.js.map
