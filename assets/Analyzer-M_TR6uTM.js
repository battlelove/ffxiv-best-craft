import{e as ln,h as gn,w as dn,f as M,g as mn}from"./transform-CvFQN27r.js";class sn extends Map{constructor(r,a=hn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),r!=null)for(const[s,c]of r)this.set(s,c)}get(r){return super.get(un(this,r))}has(r){return super.has(un(this,r))}set(r,a){return super.set(yn(this,r),a)}delete(r){return super.delete(pn(this,r))}}function un({_intern:n,_key:r},a){const s=r(a);return n.has(s)?n.get(s):a}function yn({_intern:n,_key:r},a){const s=r(a);return n.has(s)?n.get(s):(n.set(s,a),a)}function pn({_intern:n,_key:r},a){const s=r(a);return n.has(s)&&(a=n.get(s),n.delete(s)),a}function hn(n){return n!==null&&typeof n=="object"?n.valueOf():n}const on=Symbol("implicit");function bn(){var n=new sn,r=[],a=[],s=on;function c(l){let o=n.get(l);if(o===void 0){if(s!==on)return s;n.set(l,o=r.push(l)-1)}return a[o%a.length]}return c.domain=function(l){if(!arguments.length)return r.slice();r=[],n=new sn;for(const o of l)n.has(o)||n.set(o,r.push(o)-1);return c},c.range=function(l){return arguments.length?(a=Array.from(l),c):a.slice()},c.unknown=function(l){return arguments.length?(s=l,c):s},c.copy=function(){return bn(r,a).unknown(s)},ln.apply(c,arguments),c}function xn(n){for(var r=n.length/6|0,a=new Array(r),s=0;s<r;)a[s]="#"+n.slice(s*6,++s*6);return a}const An=n=>gn(n[n.length-1]);var wn=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(xn);An(wn);const fn=Math.abs,A=Math.atan2,I=Math.cos,vn=Math.max,rn=Math.min,S=Math.sin,U=Math.sqrt,P=1e-12,q=Math.PI,X=q/2,Q=2*q;function Mn(n){return n>1?0:n<-1?q:Math.acos(n)}function cn(n){return n>=1?X:n<=-1?-X:Math.asin(n)}function kn(n){return n.innerRadius}function Rn(n){return n.outerRadius}function Pn(n){return n.startAngle}function Tn(n){return n.endAngle}function On(n){return n&&n.padAngle}function Wn(n,r,a,s,c,l,o,e){var g=a-n,i=s-r,t=o-c,w=e-l,f=w*g-t*i;if(!(f*f<P))return f=(t*(r-l)-w*(n-c))/f,[n+f*g,r+f*i]}function K(n,r,a,s,c,l,o){var e=n-a,g=r-s,i=(o?l:-l)/U(e*e+g*g),t=i*g,w=-i*e,f=n+t,d=r+w,p=a+t,h=s+w,W=(f+p)/2,y=(d+h)/2,v=p-f,x=h-d,b=v*v+x*x,k=c-l,R=f*h-p*d,E=(x<0?-1:1)*U(vn(0,k*k*b-R*R)),j=(R*x-v*E)/b,z=(-R*v-x*E)/b,N=(R*x+v*E)/b,T=(-R*v+x*E)/b,O=j-W,u=z-y,m=N-W,G=T-y;return O*O+u*u>m*m+G*G&&(j=N,z=T),{cx:j,cy:z,x01:-t,y01:-w,x11:j*(c/k-1),y11:z*(c/k-1)}}function En(){var n=kn,r=Rn,a=M(0),s=null,c=Pn,l=Tn,o=On,e=null,g=dn(i);function i(){var t,w,f=+n.apply(this,arguments),d=+r.apply(this,arguments),p=c.apply(this,arguments)-X,h=l.apply(this,arguments)-X,W=fn(h-p),y=h>p;if(e||(e=t=g()),d<f&&(w=d,d=f,f=w),!(d>P))e.moveTo(0,0);else if(W>Q-P)e.moveTo(d*I(p),d*S(p)),e.arc(0,0,d,p,h,!y),f>P&&(e.moveTo(f*I(h),f*S(h)),e.arc(0,0,f,h,p,y));else{var v=p,x=h,b=p,k=h,R=W,E=W,j=o.apply(this,arguments)/2,z=j>P&&(s?+s.apply(this,arguments):U(f*f+d*d)),N=rn(fn(d-f)/2,+a.apply(this,arguments)),T=N,O=N,u,m;if(z>P){var G=cn(z/f*S(j)),V=cn(z/d*S(j));(R-=G*2)>P?(G*=y?1:-1,b+=G,k-=G):(R=0,b=k=(p+h)/2),(E-=V*2)>P?(V*=y?1:-1,v+=V,x-=V):(E=0,v=x=(p+h)/2)}var J=d*I(v),L=d*S(v),D=f*I(k),C=f*S(k);if(N>P){var F=d*I(x),H=d*S(x),Y=f*I(b),Z=f*S(b),B;if(W<q)if(B=Wn(J,L,Y,Z,F,H,D,C)){var $=J-B[0],_=L-B[1],nn=F-B[0],en=H-B[1],tn=1/S(Mn(($*nn+_*en)/(U($*$+_*_)*U(nn*nn+en*en)))/2),an=U(B[0]*B[0]+B[1]*B[1]);T=rn(N,(f-an)/(tn-1)),O=rn(N,(d-an)/(tn+1))}else T=O=0}E>P?O>P?(u=K(Y,Z,J,L,d,O,y),m=K(F,H,D,C,d,O,y),e.moveTo(u.cx+u.x01,u.cy+u.y01),O<N?e.arc(u.cx,u.cy,O,A(u.y01,u.x01),A(m.y01,m.x01),!y):(e.arc(u.cx,u.cy,O,A(u.y01,u.x01),A(u.y11,u.x11),!y),e.arc(0,0,d,A(u.cy+u.y11,u.cx+u.x11),A(m.cy+m.y11,m.cx+m.x11),!y),e.arc(m.cx,m.cy,O,A(m.y11,m.x11),A(m.y01,m.x01),!y))):(e.moveTo(J,L),e.arc(0,0,d,v,x,!y)):e.moveTo(J,L),!(f>P)||!(R>P)?e.lineTo(D,C):T>P?(u=K(D,C,F,H,f,-T,y),m=K(J,L,Y,Z,f,-T,y),e.lineTo(u.cx+u.x01,u.cy+u.y01),T<N?e.arc(u.cx,u.cy,T,A(u.y01,u.x01),A(m.y01,m.x01),!y):(e.arc(u.cx,u.cy,T,A(u.y01,u.x01),A(u.y11,u.x11),!y),e.arc(0,0,f,A(u.cy+u.y11,u.cx+u.x11),A(m.cy+m.y11,m.cx+m.x11),y),e.arc(m.cx,m.cy,T,A(m.y11,m.x11),A(m.y01,m.x01),!y))):e.arc(0,0,f,k,b,y)}if(e.closePath(),t)return e=null,t+""||null}return i.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,w=(+c.apply(this,arguments)+ +l.apply(this,arguments))/2-q/2;return[I(w)*t,S(w)*t]},i.innerRadius=function(t){return arguments.length?(n=typeof t=="function"?t:M(+t),i):n},i.outerRadius=function(t){return arguments.length?(r=typeof t=="function"?t:M(+t),i):r},i.cornerRadius=function(t){return arguments.length?(a=typeof t=="function"?t:M(+t),i):a},i.padRadius=function(t){return arguments.length?(s=t==null?null:typeof t=="function"?t:M(+t),i):s},i.startAngle=function(t){return arguments.length?(c=typeof t=="function"?t:M(+t),i):c},i.endAngle=function(t){return arguments.length?(l=typeof t=="function"?t:M(+t),i):l},i.padAngle=function(t){return arguments.length?(o=typeof t=="function"?t:M(+t),i):o},i.context=function(t){return arguments.length?(e=t??null,i):e},i}function Nn(n,r){return r<n?-1:r>n?1:r>=n?0:NaN}function Sn(n){return n}function jn(){var n=Sn,r=Nn,a=null,s=M(0),c=M(Q),l=M(0);function o(e){var g,i=(e=mn(e)).length,t,w,f=0,d=new Array(i),p=new Array(i),h=+s.apply(this,arguments),W=Math.min(Q,Math.max(-Q,c.apply(this,arguments)-h)),y,v=Math.min(Math.abs(W)/i,l.apply(this,arguments)),x=v*(W<0?-1:1),b;for(g=0;g<i;++g)(b=p[d[g]=g]=+n(e[g],g,e))>0&&(f+=b);for(r!=null?d.sort(function(k,R){return r(p[k],p[R])}):a!=null&&d.sort(function(k,R){return a(e[k],e[R])}),g=0,w=f?(W-i*x)/f:0;g<i;++g,h=y)t=d[g],b=p[t],y=h+(b>0?b*w:0)+x,p[t]={data:e[t],index:g,value:b,startAngle:h,endAngle:y,padAngle:v};return p}return o.value=function(e){return arguments.length?(n=typeof e=="function"?e:M(+e),o):n},o.sortValues=function(e){return arguments.length?(r=e,a=null,o):r},o.sort=function(e){return arguments.length?(a=e,r=null,o):a},o.startAngle=function(e){return arguments.length?(s=typeof e=="function"?e:M(+e),o):s},o.endAngle=function(e){return arguments.length?(c=typeof e=="function"?e:M(+e),o):c},o.padAngle=function(e){return arguments.length?(l=typeof e=="function"?e:M(+e),o):l},o}async function zn(n,r,a,s){const c={status:n,actions:r,n:a,ignoreErrors:s};return new Promise((l,o)=>{const e=new Worker(new URL("/ffxiv-best-craft/assets/AnalyzerWorker-BvEiGg1h.js",import.meta.url),{type:"module"});e.onmessage=g=>{g.data.error==null?l(g.data):o(g.data.error)},e.onerror=g=>o(g),e.postMessage({name:"rand_simulation",args:JSON.stringify(c)})})}async function Gn(n,r,a,s,c){const l={status:n,actions:r,n:a,ignoreErrors:s,collectablesShopRefine:c};return new Promise((o,e)=>{const g=new Worker(new URL("/ffxiv-best-craft/assets/AnalyzerWorker-BvEiGg1h.js",import.meta.url),{type:"module"});g.onmessage=i=>{i.data.error==null?o(i.data):e(i.data.error)},g.onerror=i=>e(i),g.postMessage({name:"rand_collectables_simulation",args:JSON.stringify(l)})})}async function In(n,r){const a={status:n,actions:r};return new Promise((s,c)=>{const l=new Worker(new URL("/ffxiv-best-craft/assets/AnalyzerWorker-BvEiGg1h.js",import.meta.url),{type:"module"});l.onmessage=o=>{o.data.error==null?s(o.data):c(o.data.error)},l.onerror=o=>c(o),l.postMessage({name:"calc_attributes_scope",args:JSON.stringify(a)})})}export{En as a,Gn as b,In as c,bn as o,jn as p,zn as r,wn as s};
//# sourceMappingURL=Analyzer-M_TR6uTM.js.map
