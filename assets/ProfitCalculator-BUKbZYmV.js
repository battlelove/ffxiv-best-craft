import{y as rn,r as Z,k as Ue,w as Xe,L as wt,B as ke,C as ee,ay as on,ar as $n,aJ as Tt,M as De,P as H,a7 as N,F as _t,K as M,u as g,aK as Zn,aa as le,a1 as Y,O as Bn,ao as ce,E as Ct,D as bt}from"./_plugin-vue_export-helper-BaoA9pDx.js";import{I as Jn,a7 as St,a8 as Ut}from"./web-source-BjHx1D90.js";import{u as Xn,E as kt,h as Dt}from"./main-DaRLB14i.js";/* empty css               */import{b as J,a as xt,E as Pt}from"./el-select-PByBEC2z.js";import"./el-scrollbar-gTgzHUAE.js";import{a as Gn,E as X}from"./el-table-column-BUAWGszB.js";import{b as Nt}from"./el-checkbox-CyBdp8Y_.js";import{a as Kn,E as Ft}from"./el-input-number-B4eQV8wX.js";import{u as et}from"./cost-Bua1tOAc.js";import{u as Yt}from"./bom-DgmNImyt.js";import{S as gn,r as Ht,c as It,i as Ge,a as pn,b as Wt,d as yn,e as nt,w as Lt,f as de,g as At}from"./transform-CvFQN27r.js";import{E as Vt}from"./el-pagination-BQJ7o6mL.js";import{E as tt}from"./index-DheuGkpP.js";import{E as Ke}from"./index-BAqI_d6_.js";import"./gearsets-CM0v29Fb.js";import"./strings-De9ueFSN.js";import"./use-form-item-pkVtI4Yc.js";import"./_baseIteratee-DuUp-aiC.js";import"./_initCloneObject-DYbxVe_E.js";import"./_baseSlice-F8doVSIJ.js";import"./merge-B_B15bRA.js";import"./raf-DdukC23v.js";import"./index-0qwaAhCh.js";function Ie(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Et(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function an(e){let n,t,r;e.length!==2?(n=Ie,t=(l,c)=>Ie(e(l),c),r=(l,c)=>e(l)-c):(n=e===Ie||e===Et?e:zt,t=e,r=e);function i(l,c,u=0,m=l.length){if(u<m){if(n(c,c)!==0)return m;do{const h=u+m>>>1;t(l[h],c)<0?u=h+1:m=h}while(u<m)}return u}function o(l,c,u=0,m=l.length){if(u<m){if(n(c,c)!==0)return m;do{const h=u+m>>>1;t(l[h],c)<=0?u=h+1:m=h}while(u<m)}return u}function a(l,c,u=0,m=l.length){const h=i(l,c,u,m-1);return h>u&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:i,center:a,right:o}}function zt(){return 0}function Ot(e){return e===null?NaN:+e}const qt=an(Ie),Qt=qt.right;an(Ot).center;function Rt(e,n){let t,r;if(n===void 0)for(const i of e)i!=null&&(t===void 0?i>=i&&(t=r=i):(t>i&&(t=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=n(o,++i,e))!=null&&(t===void 0?o>=o&&(t=r=o):(t>o&&(t=o),r<o&&(r=o)))}return[t,r]}const jt=Math.sqrt(50),$t=Math.sqrt(10),Zt=Math.sqrt(2);function We(e,n,t){const r=(n-e)/Math.max(0,t),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=jt?10:o>=$t?5:o>=Zt?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/a,l=Math.round(e*u),c=Math.round(n*u),l/u<e&&++l,c/u>n&&--c,u=-u):(u=Math.pow(10,i)*a,l=Math.round(e/u),c=Math.round(n/u),l*u<e&&++l,c*u>n&&--c),c<l&&.5<=t&&t<2?We(e,n,t*2):[l,c,u]}function Bt(e,n,t){if(n=+n,e=+e,t=+t,!(t>0))return[];if(e===n)return[e];const r=n<e,[i,o,a]=r?We(n,e,t):We(e,n,t);if(!(o>=i))return[];const l=o-i+1,c=new Array(l);if(r)if(a<0)for(let u=0;u<l;++u)c[u]=(o-u)/-a;else for(let u=0;u<l;++u)c[u]=(o-u)*a;else if(a<0)for(let u=0;u<l;++u)c[u]=(i+u)/-a;else for(let u=0;u<l;++u)c[u]=(i+u)*a;return c}function en(e,n,t){return n=+n,e=+e,t=+t,We(e,n,t)[2]}function nn(e,n,t){n=+n,e=+e,t=+t;const r=n<e,i=r?en(n,e,t):en(e,n,t);return(r?-1:1)*(i<0?1/-i:i)}function Jt(e,n){let t;if(n===void 0)for(const r of e)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of e)(i=n(i,++r,e))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function Xt(e,n){let t;if(n===void 0)for(const r of e)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of e)(i=n(i,++r,e))!=null&&(t>i||t===void 0&&i>=i)&&(t=i)}return t}function vn(e){return typeof e=="string"?new gn([[document.querySelector(e)]],[document.documentElement]):new gn([[e]],Ht)}function Gt(e,n){n||(n=[]);var t=e?Math.min(n.length,e.length):0,r=n.slice(),i;return function(o){for(i=0;i<t;++i)r[i]=e[i]*(1-o)+n[i]*o;return r}}function Kt(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function er(e,n){var t=n?n.length:0,r=e?Math.min(t,e.length):0,i=new Array(r),o=new Array(t),a;for(a=0;a<r;++a)i[a]=un(e[a],n[a]);for(;a<t;++a)o[a]=n[a];return function(l){for(a=0;a<r;++a)o[a]=i[a](l);return o}}function nr(e,n){var t=new Date;return e=+e,n=+n,function(r){return t.setTime(e*(1-r)+n*r),t}}function tr(e,n){var t={},r={},i;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in e?t[i]=un(e[i],n[i]):r[i]=n[i];return function(o){for(i in t)r[i]=t[i](o);return r}}function un(e,n){var t=typeof n,r;return n==null||t==="boolean"?It(n):(t==="number"?Ge:t==="string"?(r=yn(n))?(n=r,pn):Wt:n instanceof yn?pn:n instanceof Date?nr:Kt(n)?Gt:Array.isArray(n)?er:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?tr:Ge)(e,n)}function rr(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}function ir(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Le(e,n){if((t=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var t,r=e.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+e.slice(t+1)]}function ve(e){return e=Le(Math.abs(e)),e?e[1]:NaN}function or(e,n){return function(t,r){for(var i=t.length,o=[],a=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),o.push(t.substring(i-=l,i+l)),!((c+=l+1)>r));)l=e[a=(a+1)%e.length];return o.reverse().join(n)}}function ar(e){return function(n){return n.replace(/[0-9]/g,function(t){return e[+t]})}}var ur=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ae(e){if(!(n=ur.exec(e)))throw new Error("invalid format: "+e);var n;return new ln({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Ae.prototype=ln.prototype;function ln(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ln.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lr(e){e:for(var n=e.length,t=1,r=-1,i;t<n;++t)switch(e[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+e[t])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var rt;function cr(e,n){var t=Le(e,n);if(!t)return e+"";var r=t[0],i=t[1],o=i-(rt=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Le(e,Math.max(0,n+o-1))[0]}function Mn(e,n){var t=Le(e,n);if(!t)return e+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const wn={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ir,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>Mn(e*100,n),r:Mn,s:cr,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Tn(e){return e}var _n=Array.prototype.map,Cn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function sr(e){var n=e.grouping===void 0||e.thousands===void 0?Tn:or(_n.call(e.grouping,Number),e.thousands+""),t=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Tn:ar(_n.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Ae(h);var p=h.fill,C=h.align,v=h.sign,W=h.symbol,E=h.zero,k=h.width,F=h.comma,x=h.precision,U=h.trim,L=h.type;L==="n"?(F=!0,L="g"):wn[L]||(x===void 0&&(x=12),U=!0,L="g"),(E||p==="0"&&C==="=")&&(E=!0,p="0",C="=");var y=W==="$"?t:W==="#"&&/[boxX]/.test(L)?"0"+L.toLowerCase():"",A=W==="$"?r:/[%p]/.test(L)?a:"",Q=wn[L],_=/[defgprs%]/.test(L);x=x===void 0?6:/[gprs]/.test(L)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function w(f){var P=y,z=A,G,oe,ae;if(L==="c")z=Q(f)+z,f="";else{f=+f;var O=f<0||1/f<0;if(f=isNaN(f)?c:Q(Math.abs(f),x),U&&(f=lr(f)),O&&+f==0&&v!=="+"&&(O=!1),P=(O?v==="("?v:l:v==="-"||v==="("?"":v)+P,z=(L==="s"?Cn[8+rt/3]:"")+z+(O&&v==="("?")":""),_){for(G=-1,oe=f.length;++G<oe;)if(ae=f.charCodeAt(G),48>ae||ae>57){z=(ae===46?i+f.slice(G+1):f.slice(G))+z,f=f.slice(0,G);break}}}F&&!E&&(f=n(f,1/0));var ue=P.length+f.length+z.length,R=ue<k?new Array(k-ue+1).join(p):"";switch(F&&E&&(f=n(R+f,R.length?k-z.length:1/0),R=""),C){case"<":f=P+f+z+R;break;case"=":f=P+R+f+z;break;case"^":f=R.slice(0,ue=R.length>>1)+P+f+z+R.slice(ue);break;default:f=R+P+f+z;break}return o(f)}return w.toString=function(){return h+""},w}function m(h,p){var C=u((h=Ae(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(ve(p)/3)))*3,W=Math.pow(10,-v),E=Cn[8+v/3];return function(k){return C(W*k)+E}}return{format:u,formatPrefix:m}}var He,it,ot;fr({thousands:",",grouping:[3],currency:["$",""]});function fr(e){return He=sr(e),it=He.format,ot=He.formatPrefix,He}function hr(e){return Math.max(0,-ve(Math.abs(e)))}function mr(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ve(n)/3)))*3-ve(Math.abs(e)))}function dr(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,ve(n)-ve(e))+1}function gr(e){return function(){return e}}function pr(e){return+e}var bn=[0,1];function pe(e){return e}function tn(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:gr(isNaN(n)?NaN:.5)}function yr(e,n){var t;return e>n&&(t=e,e=n,n=t),function(r){return Math.max(e,Math.min(n,r))}}function vr(e,n,t){var r=e[0],i=e[1],o=n[0],a=n[1];return i<r?(r=tn(i,r),o=t(a,o)):(r=tn(r,i),o=t(o,a)),function(l){return o(r(l))}}function Mr(e,n,t){var r=Math.min(e.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=tn(e[a],e[a+1]),o[a]=t(n[a],n[a+1]);return function(l){var c=Qt(e,l,1,r)-1;return o[c](i[c](l))}}function at(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wr(){var e=bn,n=bn,t=un,r,i,o,a=pe,l,c,u;function m(){var p=Math.min(e.length,n.length);return a!==pe&&(a=yr(e[0],e[p-1])),l=p>2?Mr:vr,c=u=null,h}function h(p){return p==null||isNaN(p=+p)?o:(c||(c=l(e.map(r),n,t)))(r(a(p)))}return h.invert=function(p){return a(i((u||(u=l(n,e.map(r),Ge)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,pr),m()):e.slice()},h.range=function(p){return arguments.length?(n=Array.from(p),m()):n.slice()},h.rangeRound=function(p){return n=Array.from(p),t=rr,m()},h.clamp=function(p){return arguments.length?(a=p?!0:pe,m()):a!==pe},h.interpolate=function(p){return arguments.length?(t=p,m()):t},h.unknown=function(p){return arguments.length?(o=p,h):o},function(p,C){return r=p,i=C,m()}}function ut(){return wr()(pe,pe)}function Tr(e,n,t,r){var i=nn(e,n,t),o;switch(r=Ae(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(n));return r.precision==null&&!isNaN(o=mr(i,a))&&(r.precision=o),ot(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=dr(i,Math.max(Math.abs(e),Math.abs(n))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=hr(i))&&(r.precision=o-(r.type==="%")*2);break}}return it(r)}function _r(e){var n=e.domain;return e.ticks=function(t){var r=n();return Bt(r[0],r[r.length-1],t??10)},e.tickFormat=function(t,r){var i=n();return Tr(i[0],i[i.length-1],t??10,r)},e.nice=function(t){t==null&&(t=10);var r=n(),i=0,o=r.length-1,a=r[i],l=r[o],c,u,m=10;for(l<a&&(u=a,a=l,l=u,u=i,i=o,o=u);m-- >0;){if(u=en(a,l,t),u===c)return r[i]=a,r[o]=l,n(r);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function lt(){var e=ut();return e.copy=function(){return at(e,lt())},nt.apply(e,arguments),_r(e)}function Cr(e,n){e=e.slice();var t=0,r=e.length-1,i=e[t],o=e[r],a;return o<i&&(a=t,t=r,r=a,a=i,i=o,o=a),e[t]=n.floor(i),e[r]=n.ceil(o),e}const Re=new Date,je=new Date;function I(e,n,t,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),n(o,1),e(o),o),i.round=o=>{const a=i(o),l=i.ceil(o);return o-a<l-o?a:l},i.offset=(o,a)=>(n(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,l)=>{const c=[];if(o=i.ceil(o),l=l==null?1:Math.floor(l),!(o<a)||!(l>0))return c;let u;do c.push(u=new Date(+o)),n(o,l),e(o);while(u<o&&o<a);return c},i.filter=o=>I(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;n(a,-1),!o(a););else for(;--l>=0;)for(;n(a,1),!o(a););}),t&&(i.count=(o,a)=>(Re.setTime(+o),je.setTime(+a),e(Re),e(je),Math.floor(t(Re,je))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const Ve=I(()=>{},(e,n)=>{e.setTime(+e+n)},(e,n)=>n-e);Ve.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?I(n=>{n.setTime(Math.floor(n/e)*e)},(n,t)=>{n.setTime(+n+t*e)},(n,t)=>(t-n)/e):Ve);Ve.range;const ne=1e3,B=ne*60,te=B*60,re=te*24,cn=re*7,Sn=re*30,$e=re*365,ye=I(e=>{e.setTime(e-e.getMilliseconds())},(e,n)=>{e.setTime(+e+n*ne)},(e,n)=>(n-e)/ne,e=>e.getUTCSeconds());ye.range;const sn=I(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ne)},(e,n)=>{e.setTime(+e+n*B)},(e,n)=>(n-e)/B,e=>e.getMinutes());sn.range;const br=I(e=>{e.setUTCSeconds(0,0)},(e,n)=>{e.setTime(+e+n*B)},(e,n)=>(n-e)/B,e=>e.getUTCMinutes());br.range;const fn=I(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ne-e.getMinutes()*B)},(e,n)=>{e.setTime(+e+n*te)},(e,n)=>(n-e)/te,e=>e.getHours());fn.range;const Sr=I(e=>{e.setUTCMinutes(0,0,0)},(e,n)=>{e.setTime(+e+n*te)},(e,n)=>(n-e)/te,e=>e.getUTCHours());Sr.range;const xe=I(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*B)/re,e=>e.getDate()-1);xe.range;const hn=I(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/re,e=>e.getUTCDate()-1);hn.range;const Ur=I(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/re,e=>Math.floor(e/re));Ur.range;function he(e){return I(n=>{n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},(n,t)=>{n.setDate(n.getDate()+t*7)},(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*B)/cn)}const qe=he(0),Ee=he(1),kr=he(2),Dr=he(3),Me=he(4),xr=he(5),Pr=he(6);qe.range;Ee.range;kr.range;Dr.range;Me.range;xr.range;Pr.range;function me(e){return I(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t*7)},(n,t)=>(t-n)/cn)}const ct=me(0),ze=me(1),Nr=me(2),Fr=me(3),we=me(4),Yr=me(5),Hr=me(6);ct.range;ze.range;Nr.range;Fr.range;we.range;Yr.range;Hr.range;const mn=I(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,n)=>{e.setMonth(e.getMonth()+n)},(e,n)=>n.getMonth()-e.getMonth()+(n.getFullYear()-e.getFullYear())*12,e=>e.getMonth());mn.range;const Ir=I(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCMonth(e.getUTCMonth()+n)},(e,n)=>n.getUTCMonth()-e.getUTCMonth()+(n.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ir.range;const ie=I(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n)},(e,n)=>n.getFullYear()-e.getFullYear(),e=>e.getFullYear());ie.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:I(n=>{n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t)=>{n.setFullYear(n.getFullYear()+t*e)});ie.range;const fe=I(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n)},(e,n)=>n.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());fe.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:I(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCFullYear(n.getUTCFullYear()+t*e)});fe.range;function Wr(e,n,t,r,i,o){const a=[[ye,1,ne],[ye,5,5*ne],[ye,15,15*ne],[ye,30,30*ne],[o,1,B],[o,5,5*B],[o,15,15*B],[o,30,30*B],[i,1,te],[i,3,3*te],[i,6,6*te],[i,12,12*te],[r,1,re],[r,2,2*re],[t,1,cn],[n,1,Sn],[n,3,3*Sn],[e,1,$e]];function l(u,m,h){const p=m<u;p&&([u,m]=[m,u]);const C=h&&typeof h.range=="function"?h:c(u,m,h),v=C?C.range(u,+m+1):[];return p?v.reverse():v}function c(u,m,h){const p=Math.abs(m-u)/h,C=an(([,,E])=>E).right(a,p);if(C===a.length)return e.every(nn(u/$e,m/$e,h));if(C===0)return Ve.every(Math.max(nn(u,m,h),1));const[v,W]=a[p/a[C-1][2]<a[C][2]/p?C-1:C];return v.every(W)}return[l,c]}const[Lr,Ar]=Wr(ie,mn,qe,xe,fn,sn);function Ze(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Be(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ce(e,n,t){return{y:e,m:n,d:t,H:0,M:0,S:0,L:0}}function Vr(e){var n=e.dateTime,t=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,l=e.months,c=e.shortMonths,u=be(i),m=Se(i),h=be(o),p=Se(o),C=be(a),v=Se(a),W=be(l),E=Se(l),k=be(c),F=Se(c),x={a:O,A:ue,b:R,B:Te,c:null,d:Nn,e:Nn,f:li,g:vi,G:wi,H:oi,I:ai,j:ui,L:st,m:ci,M:si,p:K,q:Fe,Q:Hn,s:In,S:fi,u:hi,U:mi,V:di,w:gi,W:pi,x:null,X:null,y:yi,Y:Mi,Z:Ti,"%":Yn},U={a:Ye,A:_e,b:Qe,B:yt,c:null,d:Fn,e:Fn,f:Si,g:Ii,G:Li,H:_i,I:Ci,j:bi,L:ht,m:Ui,M:ki,p:vt,q:Mt,Q:Hn,s:In,S:Di,u:xi,U:Pi,V:Ni,w:Fi,W:Yi,x:null,X:null,y:Hi,Y:Wi,Z:Ai,"%":Yn},L={a:w,A:f,b:P,B:z,c:G,d:xn,e:xn,f:ni,g:Dn,G:kn,H:Pn,I:Pn,j:Xr,L:ei,m:Jr,M:Gr,p:_,q:Br,Q:ri,s:ii,S:Kr,u:Qr,U:Rr,V:jr,w:qr,W:$r,x:oe,X:ae,y:Dn,Y:kn,Z:Zr,"%":ti};x.x=y(t,x),x.X=y(r,x),x.c=y(n,x),U.x=y(t,U),U.X=y(r,U),U.c=y(n,U);function y(d,T){return function(b){var s=[],q=-1,D=0,j=d.length,$,se,dn;for(b instanceof Date||(b=new Date(+b));++q<j;)d.charCodeAt(q)===37&&(s.push(d.slice(D,q)),(se=Un[$=d.charAt(++q)])!=null?$=d.charAt(++q):se=$==="e"?" ":"0",(dn=T[$])&&($=dn(b,se)),s.push($),D=q+1);return s.push(d.slice(D,q)),s.join("")}}function A(d,T){return function(b){var s=Ce(1900,void 0,1),q=Q(s,d,b+="",0),D,j;if(q!=b.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(s.s*1e3+("L"in s?s.L:0));if(T&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+s.p*12),s.m===void 0&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(D=Be(Ce(s.y,0,1)),j=D.getUTCDay(),D=j>4||j===0?ze.ceil(D):ze(D),D=hn.offset(D,(s.V-1)*7),s.y=D.getUTCFullYear(),s.m=D.getUTCMonth(),s.d=D.getUTCDate()+(s.w+6)%7):(D=Ze(Ce(s.y,0,1)),j=D.getDay(),D=j>4||j===0?Ee.ceil(D):Ee(D),D=xe.offset(D,(s.V-1)*7),s.y=D.getFullYear(),s.m=D.getMonth(),s.d=D.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),j="Z"in s?Be(Ce(s.y,0,1)).getUTCDay():Ze(Ce(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+s.W*7-(j+5)%7:s.w+s.U*7-(j+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Be(s)):Ze(s)}}function Q(d,T,b,s){for(var q=0,D=T.length,j=b.length,$,se;q<D;){if(s>=j)return-1;if($=T.charCodeAt(q++),$===37){if($=T.charAt(q++),se=L[$ in Un?T.charAt(q++):$],!se||(s=se(d,b,s))<0)return-1}else if($!=b.charCodeAt(s++))return-1}return s}function _(d,T,b){var s=u.exec(T.slice(b));return s?(d.p=m.get(s[0].toLowerCase()),b+s[0].length):-1}function w(d,T,b){var s=C.exec(T.slice(b));return s?(d.w=v.get(s[0].toLowerCase()),b+s[0].length):-1}function f(d,T,b){var s=h.exec(T.slice(b));return s?(d.w=p.get(s[0].toLowerCase()),b+s[0].length):-1}function P(d,T,b){var s=k.exec(T.slice(b));return s?(d.m=F.get(s[0].toLowerCase()),b+s[0].length):-1}function z(d,T,b){var s=W.exec(T.slice(b));return s?(d.m=E.get(s[0].toLowerCase()),b+s[0].length):-1}function G(d,T,b){return Q(d,n,T,b)}function oe(d,T,b){return Q(d,t,T,b)}function ae(d,T,b){return Q(d,r,T,b)}function O(d){return a[d.getDay()]}function ue(d){return o[d.getDay()]}function R(d){return c[d.getMonth()]}function Te(d){return l[d.getMonth()]}function K(d){return i[+(d.getHours()>=12)]}function Fe(d){return 1+~~(d.getMonth()/3)}function Ye(d){return a[d.getUTCDay()]}function _e(d){return o[d.getUTCDay()]}function Qe(d){return c[d.getUTCMonth()]}function yt(d){return l[d.getUTCMonth()]}function vt(d){return i[+(d.getUTCHours()>=12)]}function Mt(d){return 1+~~(d.getUTCMonth()/3)}return{format:function(d){var T=y(d+="",x);return T.toString=function(){return d},T},parse:function(d){var T=A(d+="",!1);return T.toString=function(){return d},T},utcFormat:function(d){var T=y(d+="",U);return T.toString=function(){return d},T},utcParse:function(d){var T=A(d+="",!0);return T.toString=function(){return d},T}}}var Un={"-":"",_:" ",0:"0"},V=/^\s*\d+/,Er=/^%/,zr=/[\\^$*+?|[\]().{}]/g;function S(e,n,t){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<t?new Array(t-o+1).join(n)+i:i)}function Or(e){return e.replace(zr,"\\$&")}function be(e){return new RegExp("^(?:"+e.map(Or).join("|")+")","i")}function Se(e){return new Map(e.map((n,t)=>[n.toLowerCase(),t]))}function qr(e,n,t){var r=V.exec(n.slice(t,t+1));return r?(e.w=+r[0],t+r[0].length):-1}function Qr(e,n,t){var r=V.exec(n.slice(t,t+1));return r?(e.u=+r[0],t+r[0].length):-1}function Rr(e,n,t){var r=V.exec(n.slice(t,t+2));return r?(e.U=+r[0],t+r[0].length):-1}function jr(e,n,t){var r=V.exec(n.slice(t,t+2));return r?(e.V=+r[0],t+r[0].length):-1}function $r(e,n,t){var r=V.exec(n.slice(t,t+2));return r?(e.W=+r[0],t+r[0].length):-1}function kn(e,n,t){var r=V.exec(n.slice(t,t+4));return r?(e.y=+r[0],t+r[0].length):-1}function Dn(e,n,t){var r=V.exec(n.slice(t,t+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function Zr(e,n,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(t,t+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function Br(e,n,t){var r=V.exec(n.slice(t,t+1));return r?(e.q=r[0]*3-3,t+r[0].length):-1}function Jr(e,n,t){var r=V.exec(n.slice(t,t+2));return r?(e.m=r[0]-1,t+r[0].length):-1}function xn(e,n,t){var r=V.exec(n.slice(t,t+2));return r?(e.d=+r[0],t+r[0].length):-1}function Xr(e,n,t){var r=V.exec(n.slice(t,t+3));return r?(e.m=0,e.d=+r[0],t+r[0].length):-1}function Pn(e,n,t){var r=V.exec(n.slice(t,t+2));return r?(e.H=+r[0],t+r[0].length):-1}function Gr(e,n,t){var r=V.exec(n.slice(t,t+2));return r?(e.M=+r[0],t+r[0].length):-1}function Kr(e,n,t){var r=V.exec(n.slice(t,t+2));return r?(e.S=+r[0],t+r[0].length):-1}function ei(e,n,t){var r=V.exec(n.slice(t,t+3));return r?(e.L=+r[0],t+r[0].length):-1}function ni(e,n,t){var r=V.exec(n.slice(t,t+6));return r?(e.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function ti(e,n,t){var r=Er.exec(n.slice(t,t+1));return r?t+r[0].length:-1}function ri(e,n,t){var r=V.exec(n.slice(t));return r?(e.Q=+r[0],t+r[0].length):-1}function ii(e,n,t){var r=V.exec(n.slice(t));return r?(e.s=+r[0],t+r[0].length):-1}function Nn(e,n){return S(e.getDate(),n,2)}function oi(e,n){return S(e.getHours(),n,2)}function ai(e,n){return S(e.getHours()%12||12,n,2)}function ui(e,n){return S(1+xe.count(ie(e),e),n,3)}function st(e,n){return S(e.getMilliseconds(),n,3)}function li(e,n){return st(e,n)+"000"}function ci(e,n){return S(e.getMonth()+1,n,2)}function si(e,n){return S(e.getMinutes(),n,2)}function fi(e,n){return S(e.getSeconds(),n,2)}function hi(e){var n=e.getDay();return n===0?7:n}function mi(e,n){return S(qe.count(ie(e)-1,e),n,2)}function ft(e){var n=e.getDay();return n>=4||n===0?Me(e):Me.ceil(e)}function di(e,n){return e=ft(e),S(Me.count(ie(e),e)+(ie(e).getDay()===4),n,2)}function gi(e){return e.getDay()}function pi(e,n){return S(Ee.count(ie(e)-1,e),n,2)}function yi(e,n){return S(e.getFullYear()%100,n,2)}function vi(e,n){return e=ft(e),S(e.getFullYear()%100,n,2)}function Mi(e,n){return S(e.getFullYear()%1e4,n,4)}function wi(e,n){var t=e.getDay();return e=t>=4||t===0?Me(e):Me.ceil(e),S(e.getFullYear()%1e4,n,4)}function Ti(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+S(n/60|0,"0",2)+S(n%60,"0",2)}function Fn(e,n){return S(e.getUTCDate(),n,2)}function _i(e,n){return S(e.getUTCHours(),n,2)}function Ci(e,n){return S(e.getUTCHours()%12||12,n,2)}function bi(e,n){return S(1+hn.count(fe(e),e),n,3)}function ht(e,n){return S(e.getUTCMilliseconds(),n,3)}function Si(e,n){return ht(e,n)+"000"}function Ui(e,n){return S(e.getUTCMonth()+1,n,2)}function ki(e,n){return S(e.getUTCMinutes(),n,2)}function Di(e,n){return S(e.getUTCSeconds(),n,2)}function xi(e){var n=e.getUTCDay();return n===0?7:n}function Pi(e,n){return S(ct.count(fe(e)-1,e),n,2)}function mt(e){var n=e.getUTCDay();return n>=4||n===0?we(e):we.ceil(e)}function Ni(e,n){return e=mt(e),S(we.count(fe(e),e)+(fe(e).getUTCDay()===4),n,2)}function Fi(e){return e.getUTCDay()}function Yi(e,n){return S(ze.count(fe(e)-1,e),n,2)}function Hi(e,n){return S(e.getUTCFullYear()%100,n,2)}function Ii(e,n){return e=mt(e),S(e.getUTCFullYear()%100,n,2)}function Wi(e,n){return S(e.getUTCFullYear()%1e4,n,4)}function Li(e,n){var t=e.getUTCDay();return e=t>=4||t===0?we(e):we.ceil(e),S(e.getUTCFullYear()%1e4,n,4)}function Ai(){return"+0000"}function Yn(){return"%"}function Hn(e){return+e}function In(e){return Math.floor(+e/1e3)}var ge,dt;Vi({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Vi(e){return ge=Vr(e),dt=ge.format,ge.parse,ge.utcFormat,ge.utcParse,ge}function Ei(e){return new Date(e)}function zi(e){return e instanceof Date?+e:+new Date(+e)}function gt(e,n,t,r,i,o,a,l,c,u){var m=ut(),h=m.invert,p=m.domain,C=u(".%L"),v=u(":%S"),W=u("%I:%M"),E=u("%I %p"),k=u("%a %d"),F=u("%b %d"),x=u("%B"),U=u("%Y");function L(y){return(c(y)<y?C:l(y)<y?v:a(y)<y?W:o(y)<y?E:r(y)<y?i(y)<y?k:F:t(y)<y?x:U)(y)}return m.invert=function(y){return new Date(h(y))},m.domain=function(y){return arguments.length?p(Array.from(y,zi)):p().map(Ei)},m.ticks=function(y){var A=p();return e(A[0],A[A.length-1],y??10)},m.tickFormat=function(y,A){return A==null?L:u(A)},m.nice=function(y){var A=p();return(!y||typeof y.range!="function")&&(y=n(A[0],A[A.length-1],y??10)),y?p(Cr(A,y)):m},m.copy=function(){return at(m,gt(e,n,t,r,i,o,a,l,c,u))},m}function Oi(){return nt.apply(gt(Lr,Ar,ie,mn,qe,xe,fn,sn,ye,dt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pt(e){this._context=e}pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function qi(e){return new pt(e)}function Qi(e){return e[0]}function Ri(e){return e[1]}function ji(e,n){var t=de(!0),r=null,i=qi,o=null,a=Lt(l);e=typeof e=="function"?e:e===void 0?Qi:de(e),n=typeof n=="function"?n:n===void 0?Ri:de(n);function l(c){var u,m=(c=At(c)).length,h,p=!1,C;for(r==null&&(o=i(C=a())),u=0;u<=m;++u)!(u<m&&t(h=c[u],u,c))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(h,u,c),+n(h,u,c));if(C)return o=null,C+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:de(+c),l):e},l.y=function(c){return arguments.length?(n=typeof c=="function"?c:de(+c),l):n},l.defined=function(c){return arguments.length?(t=typeof c=="function"?c:de(!!c),l):t},l.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),l):r},l}function Wn(e){return e<0?-1:1}function Ln(e,n,t){var r=e._x1-e._x0,i=n-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(t-e._y1)/(i||r<0&&-0),l=(o*i+a*r)/(r+i);return(Wn(o)+Wn(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function An(e,n){var t=e._x1-e._x0;return t?(3*(e._y1-e._y0)/t-n)/2:n}function Je(e,n,t){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,l=(o-r)/3;e._context.bezierCurveTo(r+l,i+l*n,o-l,a-l*t,o,a)}function Oe(e){this._context=e}Oe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Je(this,this._t0,An(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){var t=NaN;if(e=+e,n=+n,!(e===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,Je(this,An(this,t=Ln(this,e,n)),t);break;default:Je(this,this._t0,t=Ln(this,e,n));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n,this._t0=t}}};Object.create(Oe.prototype).point=function(e,n){Oe.prototype.point.call(this,n,e)};function $i(e){return new Oe(e)}const Zi=rn({__name:"PriceTrend",props:{itemId:{}},setup(e){const n=e,t=et(),r=Z(null),i=Ue(()=>t.historyCache.get(n.itemId));Xe(i,()=>{o()}),wt(()=>{o(),window.addEventListener("resize",o)});function o(){if(!r.value||!i.value||!i.value.entries)return;const a=i.value.entries.map(v=>({date:new Date(v.timestamp*1e3),price:v.pricePerUnit})).sort((v,W)=>v.date.getTime()-W.date.getTime());if(a.length===0)return;vn(r.value).selectAll("*").remove();const l=180,c=40,u={top:2,right:2,bottom:2,left:2},m=vn(r.value).append("svg").attr("width",l).attr("height",c),h=Oi().domain(Rt(a,v=>v.date)).range([u.left,l-u.right]),p=lt().domain([Xt(a,v=>v.price)||0,Jt(a,v=>v.price)||0]).range([c-u.bottom,u.top]),C=ji().x(v=>h(v.date)).y(v=>p(v.price)).curve($i);m.append("path").datum(a).attr("fill","none").attr("stroke","#8884d8").attr("stroke-width",1.5).attr("d",C)}return(a,l)=>(ee(),ke("div",{ref_key:"chartRef",ref:r,class:"trend-chart"},null,512))}}),Bi=on(Zi,[["__scopeId","data-v-84d70c84"]]),Ji={class:"search-bar"},Xi={class:"pagination-container"},Gi=10,Pe=rn({__name:"ItemSelector",props:{modelValue:{type:Boolean},initialQuery:{}},emits:["update:modelValue","select"],setup(e,{emit:n}){const{$t:t}=$n(),r=Xn(),i=e,o=n,a=Z(!1),l=Z(""),c=Z(!1),u=Z([]),m=Z(0),h=Z(1);Xe(()=>i.modelValue,k=>{a.value=k,k&&i.initialQuery&&i.initialQuery!==l.value&&(l.value=i.initialQuery,p())}),Xe(a,k=>{o("update:modelValue",k)});async function p(){l.value&&(h.value=1,await v())}async function C(k){h.value=k,await v()}async function v(){c.value=!0;try{const F=await(await r.getDataSource()).recipeTable(h.value,l.value);u.value=F.results.map(x=>({...x,name:x.item_name})),m.value=F.totalPages*10}catch(k){tt.error(t("search-error")+": "+String(k))}finally{c.value=!1}}function W(k){o("select",{id:k.item_id,name:k.name,recipeId:k.id}),a.value=!1}function E(){}return(k,F)=>{const x=Tt("loading");return ee(),De(g(kt),{modelValue:a.value,"onUpdate:modelValue":F[2]||(F[2]=U=>a.value=U),title:g(t)("select-recipe"),width:"800px","append-to-body":"",onClosed:E},{default:H(()=>[N("div",Ji,[M(g(Kn),{modelValue:l.value,"onUpdate:modelValue":F[0]||(F[0]=U=>l.value=U),placeholder:g(t)("search-item-placeholder"),style:{width:"300px","margin-right":"10px"},onKeyup:Zn(p,["enter"]),clearable:""},null,8,["modelValue","placeholder"]),M(g(Ke),{type:"primary",onClick:p,loading:c.value},{default:H(()=>[le(Y(g(t)("search")),1)]),_:1},8,["loading"])]),_t((ee(),De(g(Gn),{data:u.value,style:{width:"100%","margin-top":"20px"},height:"400",onRowClick:W,stripe:"","highlight-current-row":""},{default:H(()=>[M(g(X),{prop:"icon",width:"60"},{default:H(U=>[M(g(Jn),null,{default:H(()=>[M(g(St))]),_:1})]),_:1}),M(g(X),{prop:"name",label:g(t)("item-name")},null,8,["label"]),M(g(X),{prop:"item_id",label:"ID",width:"100"}),M(g(X),{prop:"job",label:g(t)("job"),width:"100"},{default:H(U=>[le(Y(U.row.job_code||U.row.job_name||"-"),1)]),_:1},8,["label"]),M(g(X),{prop:"rlv",label:g(t)("level"),width:"80"},null,8,["label"])]),_:1},8,["data"])),[[x,c.value]]),N("div",Xi,[u.value.length>0?(ee(),De(g(Vt),{key:0,layout:"prev, pager, next",total:m.value,"page-size":Gi,"current-page":h.value,"onUpdate:currentPage":F[1]||(F[1]=U=>h.value=U),onCurrentChange:C},null,8,["total","current-page"])):Bn("",!0)])]),_:1},8,["modelValue","title"])}}});function Vn(e){const n=e.options||e;n.fluent=n.fluent||{},n.fluent["zh-CN"]=new ce(`select-recipe = 选择配方
search-item-placeholder = 搜索物品名称...
search = 搜索
item-name = 物品名称
job = 职业
level = 等级
search-error = 搜索失败`)}function En(e){const n=e.options||e;n.fluent=n.fluent||{},n.fluent["zh-TW"]=new ce(`select-recipe = 選擇配方
search-item-placeholder = 搜尋物品名稱...
search = 搜尋
item-name = 物品名稱
job = 職業
level = 等級
search-error = 搜尋失敗`)}function zn(e){const n=e.options||e;n.fluent=n.fluent||{},n.fluent["en-US"]=new ce(`select-recipe = Select Recipe
search-item-placeholder = Search item name...
search = Search
item-name = Item Name
job = Job
level = Level
search-error = Search failed`)}function On(e){const n=e.options||e;n.fluent=n.fluent||{},n.fluent["ja-JP"]=new ce(`select-recipe = レシピを選択
search-item-placeholder = アイテム名を検索...
search = 検索
item-name = アイテム名
job = クラス
level = レベル
search-error = 検索失敗`)}typeof Vn=="function"&&Vn(Pe);typeof En=="function"&&En(Pe);typeof zn=="function"&&zn(Pe);typeof On=="function"&&On(Pe);const Ki=on(Pe,[["__scopeId","data-v-89acd082"]]),eo={class:"profit-calculator"},no={class:"header"},to={class:"world-selector"},ro={key:0,class:"main-content"},io={class:"dashboard-card"},oo={class:"stats-row"},ao={class:"stat-item"},uo={class:"label"},lo={class:"value"},co={class:"stat-item"},so={class:"label"},fo={class:"value"},ho={class:"stat-item"},mo={class:"label"},go={class:"spreadsheet-container"},po={class:"price-cell"},yo={key:1},vo={key:1,class:"empty-state"},Ne=rn({__name:"ProfitCalculator",setup(e){const{$t:n}=$n(),t=et(),r=Xn(),i=Yt(),o=Z(""),a=Z(!1),l=Z(!1),c=Ue({get:()=>t.selectedWorld,set:_=>t.setWorld(_)}),u=Z(!1),m=Z(null),h=Z([]),p=Ue(()=>m.value&&t.getPrice(m.value.id)||0),C=Ue(()=>{if(h.value.length===0)return 0;const _=h.value[0];return _&&_.children?_.children.reduce((w,f)=>w+f.totalPrice,0):0}),v=Ue(()=>p.value*.95-C.value);function W(){l.value=!0}async function E(){W()}async function k(_){m.value={id:_.id,name:_.name},a.value=!0;try{await F(_.id,_.recipeId),await x()}catch(w){tt.error(n("search-error")+": "+String(w))}finally{a.value=!1}}async function F(_,w){const f=await r.getDataSource();async function P(G,oe,ae,O){const ue=await f.itemInfo(oe),R=await f.recipesIngredients(G),Te=[];for(const K of R){await f.recipeTable(1,"",void 0,void 0,void 0,void 0).then(_e=>_e.results.filter(Qe=>Qe.item_id===K.ingredient_id));const Fe=await f.itemInfo(K.ingredient_id),Ye=await i.findRecipe(f,K.ingredient_id,Fe.name);if(Ye.length>0&&O<3){const _e=await P(Ye[0].id,K.ingredient_id,K.amount,O+1);Te.push(_e)}else Te.push({uniqueKey:`${K.ingredient_id}-${O}-${Math.random()}`,id:K.ingredient_id,name:Fe.name,amount:K.amount,depth:O+1,isProduct:!1,unitPrice:0,totalPrice:0,isManual:!1,useHQ:!1})}return{uniqueKey:`${oe}-${O}`,id:oe,name:ue.name,amount:ae,depth:O,isProduct:O===0,unitPrice:0,totalPrice:0,isManual:!1,useHQ:!1,children:Te}}const z=await P(w,_,1,0);h.value=[z]}async function x(){u.value=!0;const _=new Set;function w(f){for(const P of f)_.add(P.id),P.children&&w(P.children)}w(h.value),await t.fetchPrices(Array.from(_)),await t.fetchHistory(Array.from(_)),U(),u.value=!1}function U(_=h.value){for(const w of _){const f=t.getItemPriceInfo(w.id);f&&(w.unitPrice=f.effectivePrice,w.totalPrice=w.unitPrice*w.amount,w.manualPrice=f.manualPrice,w.isManual=f.isManual,w.useHQ=f.useHQ),w.children&&U(w.children)}}function L(_,w){w===void 0?t.clearManualPrice(_):t.setManualPrice(_,w),U()}function y(_,w){t.setUseHQ(_,w),U()}function A(_){_.isManual=!0,_.manualPrice=_.unitPrice}function Q(_){return Math.floor(_).toLocaleString()}return(_,w)=>(ee(),ke("div",eo,[N("div",no,[M(g(Kn),{modelValue:o.value,"onUpdate:modelValue":w[0]||(w[0]=f=>o.value=f),placeholder:g(n)("search-item-placeholder"),style:{width:"200px","margin-right":"10px"},onKeyup:Zn(E,["enter"])},null,8,["modelValue","placeholder"]),M(g(Ke),{type:"primary",onClick:W,loading:a.value},{default:H(()=>[le(Y(g(n)("search")),1)]),_:1},8,["loading"]),N("div",to,[N("span",null,Y(g(n)("server"))+": ",1),M(g(xt),{modelValue:c.value,"onUpdate:modelValue":w[1]||(w[1]=f=>c.value=f),style:{width:"150px"},onChange:_.handleWorldChange},{default:H(()=>[M(g(J),{label:"Chocobo (DC)",value:"Chocobo"}),M(g(J),{label:"Ifrit (伊弗利特)",value:"4028"}),M(g(J),{label:"Garuda (迦樓羅)",value:"4029"}),M(g(J),{label:"Leviathan (利維坦)",value:"4030"}),M(g(J),{label:"Phoenix (鳳凰)",value:"4031"}),M(g(J),{label:"Odin (奧汀)",value:"4032"}),M(g(J),{label:"Bahamut (巴哈姆特)",value:"4033"}),M(g(J),{label:"Ramuh (拉姆)",value:"4034"}),M(g(J),{label:"Titan (泰坦)",value:"4035"}),M(g(J),{label:"Garuda",value:"Garuda"}),M(g(J),{label:"Chocobo (CN DC)",value:"Chocobo"})]),_:1},8,["modelValue","onChange"])]),M(g(Ke),{type:"success",onClick:x,loading:u.value},{default:H(()=>[le(Y(g(n)("refresh-prices")),1)]),_:1},8,["loading"])]),m.value?(ee(),ke("div",ro,[N("div",io,[N("h3",null,Y(m.value.name)+" ("+Y(m.value.id)+")",1),N("div",oo,[N("div",ao,[N("div",uo,Y(g(n)("market-price")),1),N("div",lo,Y(Q(p.value)),1)]),N("div",co,[N("div",so,Y(g(n)("crafting-cost")),1),N("div",fo,Y(Q(C.value)),1)]),N("div",ho,[N("div",mo,Y(g(n)("profit")),1),N("div",{class:Ct(["value",{positive:v.value>0,negative:v.value<0}])},Y(Q(v.value)),3)])])]),N("div",go,[M(g(Gn),{data:h.value,"row-key":"uniqueKey",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},style:{width:"100%"}},{default:H(()=>[M(g(X),{prop:"name",label:g(n)("item-name"),width:"250"},{default:H(f=>[N("span",{style:bt({marginLeft:f.row.depth*20+"px"})},[le(Y(f.row.name)+" ",1),f.row.isProduct?(ee(),De(g(Pt),{key:0,size:"small",type:"success"},{default:H(()=>[le(Y(g(n)("product")),1)]),_:1})):Bn("",!0)],4)]),_:1},8,["label"]),M(g(X),{label:g(n)("quantity"),width:"80",align:"center"},{default:H(f=>[le(Y(f.row.amount),1)]),_:1},8,["label"]),M(g(X),{label:g(n)("market-price-unit"),width:"150",align:"right"},{default:H(f=>[N("div",po,[f.row.isManual?(ee(),De(g(Ft),{key:0,modelValue:f.row.manualPrice,"onUpdate:modelValue":P=>f.row.manualPrice=P,size:"small",controls:!1,onChange:P=>L(f.row.id,P)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(ee(),ke("span",yo,Y(Q(f.row.unitPrice)),1)),M(g(Dt),{content:g(n)("edit-price")},{default:H(()=>[M(g(Jn),{class:"action-icon",onClick:P=>A(f.row)},{default:H(()=>[M(g(Ut))]),_:1},8,["onClick"])]),_:2},1032,["content"])])]),_:1},8,["label"]),M(g(X),{label:g(n)("total-price"),width:"150",align:"right"},{default:H(f=>[le(Y(Q(f.row.totalPrice)),1)]),_:1},8,["label"]),M(g(X),{label:g(n)("hq"),width:"80",align:"center"},{default:H(f=>[M(g(Nt),{modelValue:f.row.useHQ,"onUpdate:modelValue":P=>f.row.useHQ=P,onChange:P=>y(f.row.id,P)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["label"]),M(g(X),{label:g(n)("trend"),"min-width":"200"},{default:H(f=>[M(Bi,{itemId:f.row.id},null,8,["itemId"])]),_:1},8,["label"])]),_:1},8,["data"])])])):(ee(),ke("div",vo,Y(g(n)("please-search-item")),1)),M(Ki,{modelValue:l.value,"onUpdate:modelValue":w[2]||(w[2]=f=>l.value=f),"initial-query":o.value,onSelect:k},null,8,["modelValue","initial-query"])]))}});function qn(e){const n=e.options||e;n.fluent=n.fluent||{},n.fluent["zh-CN"]=new ce(`search-item-placeholder = 搜索物品名称...
search = 搜索
server = 服务器
refresh-prices = 刷新价格
market-price = 市场价格
crafting-cost = 制作成本
profit = 预期利润
item-name = 物品名称
product = 成品
quantity = 数量
market-price-unit = 单价
edit-price = 修改价格
total-price = 总价
hq = HQ
trend = 价格趋势
trend = 价格趋势
please-search-item = 请搜索一个物品以开始计算。
no-result-found = 未找到相关配方，请尝试其他名称。
search-error = 搜索失败`)}function Qn(e){const n=e.options||e;n.fluent=n.fluent||{},n.fluent["zh-TW"]=new ce(`search-item-placeholder = 搜尋物品名稱...
search = 搜尋
server = 伺服器
refresh-prices = 更新價格
market-price = 市場價格
crafting-cost = 製作成本
profit = 預期利潤
item-name = 物品名稱
product = 成品
quantity = 數量
market-price-unit = 單價
edit-price = 修改價格
total-price = 總價
hq = HQ
trend = 價格趨勢
trend = 價格趨勢
please-search-item = 請搜尋一個物品以開始計算。
no-result-found = 未找到相關配方，請嘗試其他名稱。
search-error = 搜尋失敗`)}function Rn(e){const n=e.options||e;n.fluent=n.fluent||{},n.fluent["en-US"]=new ce(`search-item-placeholder = Search item name...
search = Search
server = Server
refresh-prices = Refresh Prices
market-price = Market Price
crafting-cost = Crafting Cost
profit = Profit
item-name = Item Name
product = Product
quantity = Quantity
market-price-unit = Unit Price
edit-price = Edit Price
total-price = Total Price
hq = HQ
trend = Price Trend
trend = Price Trend
please-search-item = Please search for an item to begin.
no-result-found = No recipe found, please try another keyword.
search-error = Search failed`)}function jn(e){const n=e.options||e;n.fluent=n.fluent||{},n.fluent["ja-JP"]=new ce(`search-item-placeholder = アイテム名を検索...
search = 検索
server = サーバー
refresh-prices = 価格更新
market-price = 市場価格
crafting-cost = 製作コスト
profit = 予想利益
item-name = アイテム名
product = 製品
quantity = 数量
market-price-unit = 単価
edit-price = 価格編集
total-price = 合計
hq = HQ
trend = 価格推移
trend = 価格推移
please-search-item = 計算を開始するにはアイテムを検索してください。
no-result-found = レシピが見つかりませんでした。別のキーワードを試してください。
search-error = 検索失敗`)}typeof qn=="function"&&qn(Ne);typeof Qn=="function"&&Qn(Ne);typeof Rn=="function"&&Rn(Ne);typeof jn=="function"&&jn(Ne);const qo=on(Ne,[["__scopeId","data-v-0d3c8c5a"]]);export{qo as default};
//# sourceMappingURL=ProfitCalculator-BUKbZYmV.js.map
