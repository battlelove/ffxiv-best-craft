import{e as cn,h as dn,w as gn,f as M,g as pn}from"./transform-CvFQN27r.js";class sn extends Map{constructor(r,a=hn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),r!=null)for(const[s,l]of r)this.set(s,l)}get(r){return super.get(un(this,r))}has(r){return super.has(un(this,r))}set(r,a){return super.set(mn(this,r),a)}delete(r){return super.delete(yn(this,r))}}function un({_intern:n,_key:r},a){const s=r(a);return n.has(s)?n.get(s):a}function mn({_intern:n,_key:r},a){const s=r(a);return n.has(s)?n.get(s):(n.set(s,a),a)}function yn({_intern:n,_key:r},a){const s=r(a);return n.has(s)&&(a=n.get(s),n.delete(s)),a}function hn(n){return n!==null&&typeof n=="object"?n.valueOf():n}const on=Symbol("implicit");function bn(){var n=new sn,r=[],a=[],s=on;function l(c){let o=n.get(c);if(o===void 0){if(s!==on)return s;n.set(c,o=r.push(c)-1)}return a[o%a.length]}return l.domain=function(c){if(!arguments.length)return r.slice();r=[],n=new sn;for(const o of c)n.has(o)||n.set(o,r.push(o)-1);return l},l.range=function(c){return arguments.length?(a=Array.from(c),l):a.slice()},l.unknown=function(c){return arguments.length?(s=c,l):s},l.copy=function(){return bn(r,a).unknown(s)},cn.apply(l,arguments),l}function xn(n){for(var r=n.length/6|0,a=new Array(r),s=0;s<r;)a[s]="#"+n.slice(s*6,++s*6);return a}const An=n=>dn(n[n.length-1]);var wn=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(xn);An(wn);const fn=Math.abs,A=Math.atan2,U=Math.cos,vn=Math.max,rn=Math.min,W=Math.sin,B=Math.sqrt,P=1e-12,D=Math.PI,X=D/2,Q=2*D;function Mn(n){return n>1?0:n<-1?D:Math.acos(n)}function ln(n){return n>=1?X:n<=-1?-X:Math.asin(n)}function kn(n){return n.innerRadius}function Rn(n){return n.outerRadius}function Pn(n){return n.startAngle}function Tn(n){return n.endAngle}function jn(n){return n&&n.padAngle}function Ln(n,r,a,s,l,c,o,e){var d=a-n,i=s-r,t=o-l,w=e-c,f=w*d-t*i;if(!(f*f<P))return f=(t*(r-c)-w*(n-l))/f,[n+f*d,r+f*i]}function K(n,r,a,s,l,c,o){var e=n-a,d=r-s,i=(o?c:-c)/B(e*e+d*d),t=i*d,w=-i*e,f=n+t,g=r+w,y=a+t,h=s+w,L=(f+y)/2,m=(g+h)/2,v=y-f,x=h-g,b=v*v+x*x,k=l-c,R=f*h-y*g,S=(x<0?-1:1)*B(vn(0,k*k*b-R*R)),z=(R*x-v*S)/b,I=(-R*v-x*S)/b,O=(R*x+v*S)/b,T=(-R*v+x*S)/b,j=z-L,u=I-m,p=O-L,J=T-m;return j*j+u*u>p*p+J*J&&(z=O,I=T),{cx:z,cy:I,x01:-t,y01:-w,x11:z*(l/k-1),y11:I*(l/k-1)}}function Sn(){var n=kn,r=Rn,a=M(0),s=null,l=Pn,c=Tn,o=jn,e=null,d=gn(i);function i(){var t,w,f=+n.apply(this,arguments),g=+r.apply(this,arguments),y=l.apply(this,arguments)-X,h=c.apply(this,arguments)-X,L=fn(h-y),m=h>y;if(e||(e=t=d()),g<f&&(w=g,g=f,f=w),!(g>P))e.moveTo(0,0);else if(L>Q-P)e.moveTo(g*U(y),g*W(y)),e.arc(0,0,g,y,h,!m),f>P&&(e.moveTo(f*U(h),f*W(h)),e.arc(0,0,f,h,y,m));else{var v=y,x=h,b=y,k=h,R=L,S=L,z=o.apply(this,arguments)/2,I=z>P&&(s?+s.apply(this,arguments):B(f*f+g*g)),O=rn(fn(g-f)/2,+a.apply(this,arguments)),T=O,j=O,u,p;if(I>P){var J=ln(I/f*W(z)),E=ln(I/g*W(z));(R-=J*2)>P?(J*=m?1:-1,b+=J,k-=J):(R=0,b=k=(y+h)/2),(S-=E*2)>P?(E*=m?1:-1,v+=E,x-=E):(S=0,v=x=(y+h)/2)}var q=g*U(v),V=g*W(v),C=f*U(k),F=f*W(k);if(O>P){var G=g*U(x),H=g*W(x),Y=f*U(b),Z=f*W(b),N;if(L<D)if(N=Ln(q,V,Y,Z,G,H,C,F)){var $=q-N[0],_=V-N[1],nn=G-N[0],en=H-N[1],tn=1/W(Mn(($*nn+_*en)/(B($*$+_*_)*B(nn*nn+en*en)))/2),an=B(N[0]*N[0]+N[1]*N[1]);T=rn(O,(f-an)/(tn-1)),j=rn(O,(g-an)/(tn+1))}else T=j=0}S>P?j>P?(u=K(Y,Z,q,V,g,j,m),p=K(G,H,C,F,g,j,m),e.moveTo(u.cx+u.x01,u.cy+u.y01),j<O?e.arc(u.cx,u.cy,j,A(u.y01,u.x01),A(p.y01,p.x01),!m):(e.arc(u.cx,u.cy,j,A(u.y01,u.x01),A(u.y11,u.x11),!m),e.arc(0,0,g,A(u.cy+u.y11,u.cx+u.x11),A(p.cy+p.y11,p.cx+p.x11),!m),e.arc(p.cx,p.cy,j,A(p.y11,p.x11),A(p.y01,p.x01),!m))):(e.moveTo(q,V),e.arc(0,0,g,v,x,!m)):e.moveTo(q,V),!(f>P)||!(R>P)?e.lineTo(C,F):T>P?(u=K(C,F,G,H,f,-T,m),p=K(q,V,Y,Z,f,-T,m),e.lineTo(u.cx+u.x01,u.cy+u.y01),T<O?e.arc(u.cx,u.cy,T,A(u.y01,u.x01),A(p.y01,p.x01),!m):(e.arc(u.cx,u.cy,T,A(u.y01,u.x01),A(u.y11,u.x11),!m),e.arc(0,0,f,A(u.cy+u.y11,u.cx+u.x11),A(p.cy+p.y11,p.cx+p.x11),m),e.arc(p.cx,p.cy,T,A(p.y11,p.x11),A(p.y01,p.x01),!m))):e.arc(0,0,f,k,b,m)}if(e.closePath(),t)return e=null,t+""||null}return i.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,w=(+l.apply(this,arguments)+ +c.apply(this,arguments))/2-D/2;return[U(w)*t,W(w)*t]},i.innerRadius=function(t){return arguments.length?(n=typeof t=="function"?t:M(+t),i):n},i.outerRadius=function(t){return arguments.length?(r=typeof t=="function"?t:M(+t),i):r},i.cornerRadius=function(t){return arguments.length?(a=typeof t=="function"?t:M(+t),i):a},i.padRadius=function(t){return arguments.length?(s=t==null?null:typeof t=="function"?t:M(+t),i):s},i.startAngle=function(t){return arguments.length?(l=typeof t=="function"?t:M(+t),i):l},i.endAngle=function(t){return arguments.length?(c=typeof t=="function"?t:M(+t),i):c},i.padAngle=function(t){return arguments.length?(o=typeof t=="function"?t:M(+t),i):o},i.context=function(t){return arguments.length?(e=t??null,i):e},i}function On(n,r){return r<n?-1:r>n?1:r>=n?0:NaN}function Wn(n){return n}function zn(){var n=Wn,r=On,a=null,s=M(0),l=M(Q),c=M(0);function o(e){var d,i=(e=pn(e)).length,t,w,f=0,g=new Array(i),y=new Array(i),h=+s.apply(this,arguments),L=Math.min(Q,Math.max(-Q,l.apply(this,arguments)-h)),m,v=Math.min(Math.abs(L)/i,c.apply(this,arguments)),x=v*(L<0?-1:1),b;for(d=0;d<i;++d)(b=y[g[d]=d]=+n(e[d],d,e))>0&&(f+=b);for(r!=null?g.sort(function(k,R){return r(y[k],y[R])}):a!=null&&g.sort(function(k,R){return a(e[k],e[R])}),d=0,w=f?(L-i*x)/f:0;d<i;++d,h=m)t=g[d],b=y[t],m=h+(b>0?b*w:0)+x,y[t]={data:e[t],index:d,value:b,startAngle:h,endAngle:m,padAngle:v};return y}return o.value=function(e){return arguments.length?(n=typeof e=="function"?e:M(+e),o):n},o.sortValues=function(e){return arguments.length?(r=e,a=null,o):r},o.sort=function(e){return arguments.length?(a=e,r=null,o):a},o.startAngle=function(e){return arguments.length?(s=typeof e=="function"?e:M(+e),o):s},o.endAngle=function(e){return arguments.length?(l=typeof e=="function"?e:M(+e),o):l},o.padAngle=function(e){return arguments.length?(c=typeof e=="function"?e:M(+e),o):c},o}async function In(n,r,a,s){const l={status:n,actions:r,n:a,ignoreErrors:s};return new Promise((c,o)=>{const e=new Worker(new URL("/ffxiv-best-craft/assets/AnalyzerWorker-npb7jllL.js",import.meta.url),{type:"module"});e.onmessage=d=>{d.data.error==null?c(d.data):o(d.data.error)},e.onerror=d=>o(d),e.postMessage({name:"rand_simulation",args:JSON.stringify(l)})})}async function Jn(n,r,a,s,l){const c={status:n,actions:r,n:a,ignoreErrors:s,collectablesShopRefine:l};return new Promise((o,e)=>{const d=new Worker(new URL("/ffxiv-best-craft/assets/AnalyzerWorker-npb7jllL.js",import.meta.url),{type:"module"});d.onmessage=i=>{i.data.error==null?o(i.data):e(i.data.error)},d.onerror=i=>e(i),d.postMessage({name:"rand_collectables_simulation",args:JSON.stringify(c)})})}async function Un(n,r){const a={status:n,actions:r};return new Promise((s,l)=>{const c=new Worker(new URL("/ffxiv-best-craft/assets/AnalyzerWorker-npb7jllL.js",import.meta.url),{type:"module"});c.onmessage=o=>{o.data.error==null?s(o.data):l(o.data.error)},c.onerror=o=>l(o),c.postMessage({name:"calc_attributes_scope",args:JSON.stringify(a)})})}export{Sn as a,Jn as b,Un as c,bn as o,zn as p,In as r,wn as s};
//# sourceMappingURL=Analyzer-DacNEQmM.js.map
