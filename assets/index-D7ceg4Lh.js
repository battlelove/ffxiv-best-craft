import{b6 as q,y as j,r as M,k as f,L as ie,w as ce,M as h,C as m,P as k,F as ue,a7 as H,D as pe,u as l,E as y,O as S,z as de,ac as fe,B as U,a1 as me,J as ge,aU as ve,K as G,_ as ye,Z as Ce,R as he,U as O,a2 as J,q as L,a3 as Te,b0 as $}from"./_plugin-vue_export-helper-Dh6l7_xc.js";import{r as be,q as Ee,a1 as we,a2 as R,H as Me,Z as Se,a0 as Be,M as Ne,P as ke,ad as c}from"./main-Cs14Vgdd.js";import{E as Ie}from"./index-BOaqDftn.js";import{a as K,h as Le,j as V,_ as xe,I as Z,M as Oe,f as x,F as I,B as Pe,an as _e}from"./web-source-Dn0kdXsh.js";const W=["primary","success","info","warning","error"],Q=["top","top-left","top-right","bottom","bottom-left","bottom-right"],T="top",i=be({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,placement:void 0,zIndex:0,grouping:!1,repeatNum:1,appendTo:K?document.body:void 0}),Ae=Le({customClass:{type:String,default:i.customClass},dangerouslyUseHTMLString:{type:Boolean,default:i.dangerouslyUseHTMLString},duration:{type:Number,default:i.duration},icon:{type:Ee,default:i.icon},id:{type:String,default:i.id},message:{type:V([String,Object,Function]),default:i.message},onClose:{type:V(Function),default:i.onClose},showClose:{type:Boolean,default:i.showClose},type:{type:String,values:W,default:i.type},plain:{type:Boolean,default:i.plain},offset:{type:Number,default:i.offset},placement:{type:String,values:Q,default:i.placement},zIndex:{type:Number,default:i.zIndex},grouping:{type:Boolean,default:i.grouping},repeatNum:{type:Number,default:i.repeatNum}}),Fe={destroy:()=>!0},p=q({}),De=e=>(p[e]||(p[e]=q([])),p[e]),ze=(e,a)=>{const s=p[a]||[],t=s.findIndex(n=>n.id===e),u=s[t];let r;return t>0&&(r=s[t-1]),{current:u,prev:r}},He=(e,a)=>{const{prev:s}=ze(e,a);return s?s.vm.exposed.bottom.value:0},Ue=(e,a,s)=>(p[s]||[]).findIndex(r=>r.id===e)>0?16:a,$e=j({name:"ElMessage"}),Re=j({...$e,props:Ae,emits:Fe,setup(e,{expose:a,emit:s}){const t=e,{Close:u}=Be,r=M(!1),{ns:n,zIndex:d}=we("message"),{currentZIndex:b,nextZIndex:P}=d,v=M(),E=M(!1),_=M(0);let B;const Y=f(()=>t.type?t.type==="error"?"danger":t.type:"info"),ee=f(()=>{const o=t.type;return{[n.bm("icon",o)]:o&&R[o]}}),A=f(()=>t.icon||R[t.type]||""),C=f(()=>t.placement||T),se=f(()=>He(t.id,C.value)),F=f(()=>Ue(t.id,t.offset,C.value)+se.value),te=f(()=>_.value+F.value),ne=f(()=>C.value.includes("left")?n.is("left"):C.value.includes("right")?n.is("right"):n.is("center")),D=f(()=>C.value.startsWith("top")?"top":"bottom"),oe=f(()=>({[D.value]:`${F.value}px`,zIndex:b.value}));function N(){t.duration!==0&&({stop:B}=Oe(()=>{w()},t.duration))}function z(){B?.()}function w(){E.value=!1,he(()=>{var o;r.value||((o=t.onClose)==null||o.call(t),s("destroy"))})}function ae(o){Ne(o)===ke.esc&&w()}return ie(()=>{N(),P(),E.value=!0}),ce(()=>t.repeatNum,()=>{z(),N()}),Me(document,"keydown",ae),Se(v,()=>{_.value=v.value.getBoundingClientRect().height}),a({visible:E,bottom:te,close:w}),(o,le)=>(m(),h(Ce,{name:l(n).b("fade"),onBeforeEnter:re=>r.value=!0,onBeforeLeave:o.onClose,onAfterLeave:re=>o.$emit("destroy"),persisted:""},{default:k(()=>[ue(H("div",{id:o.id,ref_key:"messageRef",ref:v,class:y([l(n).b(),{[l(n).m(o.type)]:o.type},l(n).is("closable",o.showClose),l(n).is("plain",o.plain),l(n).is("bottom",l(D)==="bottom"),l(ne),o.customClass]),style:pe(l(oe)),role:"alert",onMouseenter:z,onMouseleave:N},[o.repeatNum>1?(m(),h(l(Ie),{key:0,value:o.repeatNum,type:l(Y),class:y(l(n).e("badge"))},null,8,["value","type","class"])):S("v-if",!0),l(A)?(m(),h(l(Z),{key:1,class:y([l(n).e("icon"),l(ee)])},{default:k(()=>[(m(),h(fe(l(A))))]),_:1},8,["class"])):S("v-if",!0),de(o.$slots,"default",{},()=>[o.dangerouslyUseHTMLString?(m(),U(ge,{key:1},[S(" Caution here, message could've been compromised, never use user's input as message "),H("p",{class:y(l(n).e("content")),innerHTML:o.message},null,10,["innerHTML"])],2112)):(m(),U("p",{key:0,class:y(l(n).e("content"))},me(o.message),3))]),o.showClose?(m(),h(l(Z),{key:2,class:y(l(n).e("closeBtn")),onClick:ve(w,["stop"])},{default:k(()=>[G(l(u))]),_:1},8,["class","onClick"])):S("v-if",!0)],46,["id"]),[[ye,E.value]])]),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}});var Ve=xe(Re,[["__file","message.vue"]]);let Ze=1;const qe=e=>{if(!e.appendTo)e.appendTo=document.body;else if(O(e.appendTo)){let s=document.querySelector(e.appendTo);Pe(s)||(s=document.body),e.appendTo=s}},je=e=>{!e.placement&&O(c.placement)&&c.placement&&(e.placement=c.placement),e.placement||(e.placement=T),Q.includes(e.placement)||(e.placement=T)},X=e=>{const a=!e||O(e)||J(e)||L(e)?{message:e}:e,s={...i,...a};return qe(s),je(s),I(c.grouping)&&!s.grouping&&(s.grouping=c.grouping),x(c.duration)&&s.duration===3e3&&(s.duration=c.duration),x(c.offset)&&s.offset===16&&(s.offset=c.offset),I(c.showClose)&&!s.showClose&&(s.showClose=c.showClose),I(c.plain)&&!s.plain&&(s.plain=c.plain),s},Ge=e=>{const a=e.props.placement||T,s=p[a],t=s.indexOf(e);if(t===-1)return;s.splice(t,1);const{handler:u}=e;u.close()},Je=({appendTo:e,...a},s)=>{const t=`message_${Ze++}`,u=a.onClose,r=document.createElement("div"),n={...a,id:t,onClose:()=>{u?.(),Ge(v)},onDestroy:()=>{$(null,r)}},d=G(Ve,n,L(n.message)||J(n.message)?{default:L(n.message)?n.message:()=>n.message}:null);d.appContext=s||g._context,$(d,r),e.appendChild(r.firstElementChild);const b=d.component,v={id:t,vnode:d,vm:b,handler:{close:()=>{b.exposed.close()}},props:d.component.props};return v},g=(e={},a)=>{if(!K)return{close:()=>{}};const s=X(e),t=De(s.placement||T);if(s.grouping&&t.length){const r=t.find(({vnode:n})=>{var d;return((d=n.props)==null?void 0:d.message)===s.message});if(r)return r.props.repeatNum+=1,r.props.type=s.type,r.handler}if(x(c.max)&&t.length>=c.max)return{close:()=>{}};const u=Je(s,a);return t.push(u),u.handler};W.forEach(e=>{g[e]=(a={},s)=>{const t=X(a);return g({...t,type:e},s)}});function Ke(e){for(const a in p)if(Te(p,a)){const s=[...p[a]];for(const t of s)(!e||e===t.props.type)&&t.handler.close()}}function We(e){if(!p[e])return;[...p[e]].forEach(s=>s.handler.close())}g.closeAll=Ke;g.closeAllByPlacement=We;g._context=null;const ss=_e(g,"$message");export{ss as E};
//# sourceMappingURL=index-D7ceg4Lh.js.map
