import{y as j,k as $,B as I,C as u,M,a1 as h,P as g,ac as Ee,u as e,m as We,r as z,w as J,v as Qe,K as d,J as Z,a8 as se,E as A,a7 as te,O as K,aF as $e,l as Je,x as Ge,a6 as G,aG as Ze,am as qe,ap as Re,aH as Pe,as as Me,aI as Xe,aa as x,an as le,ax as Ve,aA as Ye,af as ea,L as aa,ab as ta,aJ as Ce,F as na}from"./_plugin-vue_export-helper-BSrSOK0z.js";import{h as ee,_ as ie,I as Le,j as pe,u as ne,a2 as la,a3 as Se,a4 as ia,f as Q,O as ra,a5 as oa,E as sa,Z as _e,V as ua}from"./web-source-DdoABEOH.js";import{c as fe,u as ae,d as De,m as Be,e as ca,C as ce,f as da,g as pa,h as fa,j as ga,k as Ue,E as ma,l as va,n as R}from"./main-pQNQfDR8.js";import{E as ue,a as ba}from"./el-table-column-NC2Nt2-r.js";import"./el-checkbox-BuWUlt7l.js";import"./el-scrollbar-Wa7Ii9eF.js";/* empty css               */import{E as be,a as ye,b as ya}from"./el-select-CQS4YTma.js";import{E as ve,a as ha}from"./el-form-item-DH7zTled.js";import{E as je,a as Fe}from"./el-input-number-BEe0MKuD.js";import{C as Pa,n as Ae}from"./gearsets-EbTdxs8r.js";import{E as Ca}from"./el-alert-Omp42BoY.js";import{s as Sa}from"./common-W0iCBQBp.js";import{_ as _a}from"./Condition-ClH9HzGO.js";import{E as de}from"./index-B4Te-3vh.js";import{E as oe}from"./index-DrybLkrR.js";import"./merge-BPfitFZD.js";import"./_baseIteratee-BDwaxnD5.js";import"./_initCloneObject-DDWjvyMP.js";import"./raf-Xx-j6-J7.js";import"./use-form-item-DfZONnGn.js";import"./_baseSlice-F8doVSIJ.js";import"./strings-DqTF3mMy.js";import"./index-Cp9QasH9.js";import"./index-WIupJ0dW.js";const He=Symbol("elPaginationKey"),za=ee({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:fe}}),wa={click:a=>a instanceof MouseEvent},ka=j({name:"ElPaginationPrev"}),Na=j({...ka,props:za,emits:wa,setup(a){const t=a,{t:o}=ae(),n=$(()=>t.disabled||t.currentPage<=1);return(m,c)=>(u(),I("button",{type:"button",class:"btn-prev",disabled:e(n),"aria-label":m.prevText||e(o)("el.pagination.prev"),"aria-disabled":e(n),onClick:w=>m.$emit("click",w)},[m.prevText?(u(),I("span",{key:0},h(m.prevText),1)):(u(),M(e(Le),{key:1},{default:g(()=>[(u(),M(Ee(m.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var Ta=ie(Na,[["__file","prev.vue"]]);const Ia=ee({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:fe}}),xa=j({name:"ElPaginationNext"}),Ea=j({...xa,props:Ia,emits:["click"],setup(a){const t=a,{t:o}=ae(),n=$(()=>t.disabled||t.currentPage===t.pageCount||t.pageCount===0);return(m,c)=>(u(),I("button",{type:"button",class:"btn-next",disabled:e(n),"aria-label":m.nextText||e(o)("el.pagination.next"),"aria-disabled":e(n),onClick:w=>m.$emit("click",w)},[m.nextText?(u(),I("span",{key:0},h(m.nextText),1)):(u(),M(e(Le),{key:1},{default:g(()=>[(u(),M(Ee(m.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var $a=ie(Ea,[["__file","next.vue"]]);const he=()=>We(He,{}),qa=ee({pageSize:{type:Number,required:!0},pageSizes:{type:pe(Array),default:()=>Be([10,20,30,40,50,100])},popperClass:{type:String},popperStyle:{type:pe([String,Object])},disabled:Boolean,teleported:Boolean,size:{type:String,values:De},appendSizeTo:String}),Ra=j({name:"ElPaginationSizes"}),Ma=j({...Ra,props:qa,emits:["page-size-change"],setup(a,{emit:t}){const o=a,{t:n}=ae(),m=ne("pagination"),c=he(),w=z(o.pageSize);J(()=>o.pageSizes,(s,C)=>{if(!ca(s,C)&&Qe(s)){const v=s.includes(o.pageSize)?o.pageSize:o.pageSizes[0];t("page-size-change",v)}}),J(()=>o.pageSize,s=>{w.value=s});const P=$(()=>o.pageSizes);function k(s){var C;s!==w.value&&(w.value=s,(C=c.handleSizeChange)==null||C.call(c,Number(s)))}return(s,C)=>(u(),I("span",{class:A(e(m).e("sizes"))},[d(e(ye),{"model-value":w.value,disabled:s.disabled,"popper-class":s.popperClass,"popper-style":s.popperStyle,size:s.size,teleported:s.teleported,"validate-event":!1,"append-to":s.appendSizeTo,onChange:k},{default:g(()=>[(u(!0),I(Z,null,se(e(P),v=>(u(),M(e(be),{key:v,value:v,label:v+e(n)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","popper-style","size","teleported","append-to"])],2))}});var Va=ie(Ma,[["__file","sizes.vue"]]);const La=ee({size:{type:String,values:De}}),Da=j({name:"ElPaginationJumper"}),Ba=j({...Da,props:La,setup(a){const{t}=ae(),o=ne("pagination"),{pageCount:n,disabled:m,currentPage:c,changeEvent:w}=he(),P=z(),k=$(()=>{var v;return(v=P.value)!=null?v:c?.value});function s(v){P.value=v?+v:""}function C(v){v=Math.trunc(+v),w?.(v),P.value=void 0}return(v,E)=>(u(),I("span",{class:A(e(o).e("jump")),disabled:e(m)},[te("span",{class:A([e(o).e("goto")])},h(e(t)("el.pagination.goto")),3),d(e(je),{size:v.size,class:A([e(o).e("editor"),e(o).is("in-pagination")]),min:1,max:e(n),disabled:e(m),"model-value":e(k),"validate-event":!1,"aria-label":e(t)("el.pagination.page"),type:"number","onUpdate:modelValue":s,onChange:C},null,8,["size","class","max","disabled","model-value","aria-label"]),te("span",{class:A([e(o).e("classifier")])},h(e(t)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var Ua=ie(Ba,[["__file","jumper.vue"]]);const ja=ee({total:{type:Number,default:1e3}}),Fa=j({name:"ElPaginationTotal"}),Aa=j({...Fa,props:ja,setup(a){const{t}=ae(),o=ne("pagination"),{disabled:n}=he();return(m,c)=>(u(),I("span",{class:A(e(o).e("total")),disabled:e(n)},h(e(t)("el.pagination.total",{total:m.total})),11,["disabled"]))}});var Ha=ie(Aa,[["__file","total.vue"]]);const Oa=ee({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),Ka=j({name:"ElPaginationPager"}),Wa=j({...Ka,props:Oa,emits:[ce],setup(a,{emit:t}){const o=a,n=ne("pager"),m=ne("icon"),{t:c}=ae(),w=z(!1),P=z(!1),k=z(!1),s=z(!1),C=z(!1),v=z(!1),E=$(()=>{const r=o.pagerCount,l=(r-1)/2,i=Number(o.currentPage),N=Number(o.pageCount);let T=!1,q=!1;N>r&&(i>r-l&&(T=!0),i<N-l&&(q=!0));const H=[];if(T&&!q){const L=N-(r-2);for(let F=L;F<N;F++)H.push(F)}else if(!T&&q)for(let L=2;L<r;L++)H.push(L);else if(T&&q){const L=Math.floor(r/2)-1;for(let F=i-L;F<=i+L;F++)H.push(F)}else for(let L=2;L<N;L++)H.push(L);return H}),D=$(()=>["more","btn-quickprev",m.b(),n.is("disabled",o.disabled)]),V=$(()=>["more","btn-quicknext",m.b(),n.is("disabled",o.disabled)]),b=$(()=>o.disabled?-1:0);J(()=>[o.pageCount,o.pagerCount,o.currentPage],([r,l,i])=>{const N=(l-1)/2;let T=!1,q=!1;r>l&&(T=i>l-N,q=i<r-N),k.value&&(k.value=T),s.value&&(s.value=q),w.value=T,P.value=q},{immediate:!0});function y(r=!1){o.disabled||(r?k.value=!0:s.value=!0)}function S(r=!1){r?C.value=!0:v.value=!0}function B(r){const l=r.target;if(l.tagName.toLowerCase()==="li"&&Array.from(l.classList).includes("number")){const i=Number(l.textContent);i!==o.currentPage&&t(ce,i)}else l.tagName.toLowerCase()==="li"&&Array.from(l.classList).includes("more")&&X(r)}function X(r){const l=r.target;if(l.tagName.toLowerCase()==="ul"||o.disabled)return;let i=Number(l.textContent);const N=o.pageCount,T=o.currentPage,q=o.pagerCount-2;l.className.includes("more")&&(l.className.includes("quickprev")?i=T-q:l.className.includes("quicknext")&&(i=T+q)),Number.isNaN(+i)||(i<1&&(i=1),i>N&&(i=N)),i!==T&&t(ce,i)}return(r,l)=>(u(),I("ul",{class:A(e(n).b()),onClick:X,onKeyup:$e(B,["enter"])},[r.pageCount>0?(u(),I("li",{key:0,class:A([[e(n).is("active",r.currentPage===1),e(n).is("disabled",r.disabled)],"number"]),"aria-current":r.currentPage===1,"aria-label":e(c)("el.pagination.currentPage",{pager:1}),tabindex:e(b)}," 1 ",10,["aria-current","aria-label","tabindex"])):K("v-if",!0),w.value?(u(),I("li",{key:1,class:A(e(D)),tabindex:e(b),"aria-label":e(c)("el.pagination.prevPages",{pager:r.pagerCount-2}),onMouseenter:i=>y(!0),onMouseleave:i=>k.value=!1,onFocus:i=>S(!0),onBlur:i=>C.value=!1},[(k.value||C.value)&&!r.disabled?(u(),M(e(la),{key:0})):(u(),M(e(Se),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):K("v-if",!0),(u(!0),I(Z,null,se(e(E),i=>(u(),I("li",{key:i,class:A([[e(n).is("active",r.currentPage===i),e(n).is("disabled",r.disabled)],"number"]),"aria-current":r.currentPage===i,"aria-label":e(c)("el.pagination.currentPage",{pager:i}),tabindex:e(b)},h(i),11,["aria-current","aria-label","tabindex"]))),128)),P.value?(u(),I("li",{key:2,class:A(e(V)),tabindex:e(b),"aria-label":e(c)("el.pagination.nextPages",{pager:r.pagerCount-2}),onMouseenter:i=>y(),onMouseleave:i=>s.value=!1,onFocus:i=>S(),onBlur:i=>v.value=!1},[(s.value||v.value)&&!r.disabled?(u(),M(e(ia),{key:0})):(u(),M(e(Se),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):K("v-if",!0),r.pageCount>1?(u(),I("li",{key:3,class:A([[e(n).is("active",r.currentPage===r.pageCount),e(n).is("disabled",r.disabled)],"number"]),"aria-current":r.currentPage===r.pageCount,"aria-label":e(c)("el.pagination.currentPage",{pager:r.pageCount}),tabindex:e(b)},h(r.pageCount),11,["aria-current","aria-label","tabindex"])):K("v-if",!0)],42,["onKeyup"]))}});var Qa=ie(Wa,[["__file","pager.vue"]]);const U=a=>typeof a!="number",Ja=ee({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:a=>Q(a)&&Math.trunc(a)===a&&a>4&&a<22&&a%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:pe(Array),default:()=>Be([10,20,30,40,50,100])},popperClass:{type:String,default:""},popperStyle:{type:pe([String,Object])},prevText:{type:String,default:""},prevIcon:{type:fe,default:()=>oa},nextText:{type:String,default:""},nextIcon:{type:fe,default:()=>ra},teleported:{type:Boolean,default:!0},small:Boolean,size:ga,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),Ga={"update:current-page":a=>Q(a),"update:page-size":a=>Q(a),"size-change":a=>Q(a),change:(a,t)=>Q(a)&&Q(t),"current-change":a=>Q(a),"prev-click":a=>Q(a),"next-click":a=>Q(a)},ze="ElPagination";var Za=j({name:ze,props:Ja,emits:Ga,setup(a,{emit:t,slots:o}){const{t:n}=ae(),m=ne("pagination"),c=Je().vnode.props||{},w=da(),P=$(()=>{var l;return a.small?"small":(l=a.size)!=null?l:w.value});pa({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},$(()=>!!a.small));const k="onUpdate:currentPage"in c||"onUpdate:current-page"in c||"onCurrentChange"in c,s="onUpdate:pageSize"in c||"onUpdate:page-size"in c||"onSizeChange"in c,C=$(()=>{if(U(a.total)&&U(a.pageCount)||!U(a.currentPage)&&!k)return!1;if(a.layout.includes("sizes")){if(U(a.pageCount)){if(!U(a.total)&&!U(a.pageSize)&&!s)return!1}else if(!s)return!1}return!0}),v=z(U(a.defaultPageSize)?10:a.defaultPageSize),E=z(U(a.defaultCurrentPage)?1:a.defaultCurrentPage),D=$({get(){return U(a.pageSize)?v.value:a.pageSize},set(l){U(a.pageSize)&&(v.value=l),s&&(t("update:page-size",l),t("size-change",l))}}),V=$(()=>{let l=0;return U(a.pageCount)?U(a.total)||(l=Math.max(1,Math.ceil(a.total/D.value))):l=a.pageCount,l}),b=$({get(){return U(a.currentPage)?E.value:a.currentPage},set(l){let i=l;l<1?i=1:l>V.value&&(i=V.value),U(a.currentPage)&&(E.value=i),k&&(t("update:current-page",i),t("current-change",i))}});J(V,l=>{b.value>l&&(b.value=l)}),J([b,D],l=>{t(ce,...l)},{flush:"post"});function y(l){b.value=l}function S(l){D.value=l;const i=V.value;b.value>i&&(b.value=i)}function B(){a.disabled||(b.value-=1,t("prev-click",b.value))}function X(){a.disabled||(b.value+=1,t("next-click",b.value))}function r(l,i){l&&(l.props||(l.props={}),l.props.class=[l.props.class,i].join(" "))}return Ge(He,{pageCount:V,disabled:$(()=>a.disabled),currentPage:b,changeEvent:y,handleSizeChange:S}),()=>{var l,i;if(!C.value)return fa(ze,n("el.pagination.deprecationWarning")),null;if(!a.layout||a.hideOnSinglePage&&V.value<=1)return null;const N=[],T=[],q=G("div",{class:m.e("rightwrapper")},T),H={prev:G(Ta,{disabled:a.disabled,currentPage:b.value,prevText:a.prevText,prevIcon:a.prevIcon,onClick:B}),jumper:G(Ua,{size:P.value}),pager:G(Qa,{currentPage:b.value,pageCount:V.value,pagerCount:a.pagerCount,onChange:y,disabled:a.disabled}),next:G($a,{disabled:a.disabled,currentPage:b.value,pageCount:V.value,nextText:a.nextText,nextIcon:a.nextIcon,onClick:X}),sizes:G(Va,{pageSize:D.value,pageSizes:a.pageSizes,popperClass:a.popperClass,popperStyle:a.popperStyle,disabled:a.disabled,teleported:a.teleported,size:P.value,appendSizeTo:a.appendSizeTo}),slot:(i=(l=o?.default)==null?void 0:l.call(o))!=null?i:null,total:G(Ha,{total:U(a.total)?0:a.total})},L=a.layout.split(",").map(Y=>Y.trim());let F=!1;return L.forEach(Y=>{if(Y==="->"){F=!0;return}F?T.push(H[Y]):N.push(H[Y])}),r(N[0],m.is("first")),r(N[N.length-1],m.is("last")),F&&T.length>0&&(r(T[0],m.is("first")),r(T[T.length-1],m.is("last")),N.push(q)),G("div",{class:[m.b(),m.is("background",a.background),m.m(P.value)]},N)}}});const Xa=sa(Za),Ya={class:"conditions-list"},et={class:"notice"},at={class:"footer"},ge=j({__name:"ConfirmDialog",props:Ze({recipeInfo:{},itemInfo:{},collectability:{},isNormalRecipe:{type:Boolean}},{modelValue:{type:Boolean,required:!0},modelModifiers:{},recipe:{required:!0},recipeModifiers:{}}),emits:["update:modelValue","update:recipe"],setup(a){const t=a,o=qe(),{$t:n}=Re(),m=Ue(),c=Pe(a,"modelValue"),w=Pe(a,"recipe"),P=Me("screen and (max-width: 500px)"),k=z(),s=$(()=>{const b=t.recipeInfo.recipe_notebook_list;return b>=1496&&b<=1503&&t.recipeInfo.rlv==690}),C=z(!1),v=z(),E=$(()=>s.value&&v.value!=null?v.value:w.value);async function D(b,y,S,B){if(!b||y==null)return;const r=await(await m.getDataSource()).recipeLevelTablebyJobLevel(y);if(r!=null)return B.throwIfAborted(),await Ae(r,S.difficulty_factor,S.quality_factor,S.durability_factor)}J([s,k,()=>t.recipeInfo],async([b,y,S])=>{try{C.value=!0;let B=new AbortController;Xe(()=>B.abort("watcher is cleanup")),v.value=await D(b,y,S,B.signal)}finally{C.value=!1}});async function V(b){const y={...t.itemInfo};s.value&&k.value!=null&&(y.name=n("sync-level-item-name",{itemName:y.name,syncLevel:k.value})),Sa(E.value,t.recipeInfo.id,t.recipeInfo.material_quality_factor,t.recipeInfo,t.collectability,y,t.recipeInfo.job,b=="simulator"),o.push({name:"designer"}),c.value=!1}return(b,y)=>(u(),M(e(ma),{modelValue:c.value,"onUpdate:modelValue":y[4]||(y[4]=S=>c.value=S),title:e(n)("please-confirm"),"align-center":!0,width:e(P)?"90%":"70%"},{footer:g(()=>[te("span",at,[d(e(de),{onClick:y[1]||(y[1]=S=>c.value=!1)},{default:g(()=>[x(h(e(n)("cancel")),1)]),_:1}),a.isNormalRecipe?K("",!0):(u(),M(e(de),{key:0,type:"primary",onClick:y[2]||(y[2]=S=>V("simulator"))},{default:g(()=>[x(h(e(n)("simulator-mode")),1)]),_:1})),d(e(de),{type:"primary",loading:C.value,disabled:s.value&&v.value==null,onClick:y[3]||(y[3]=S=>V("designer"))},{default:g(()=>[x(h(e(n)(a.isNormalRecipe?"confirm":"designer-mode")),1)]),_:1},8,["loading","disabled"])])]),default:g(()=>[s.value?(u(),I(Z,{key:0},[d(e(Ca),{title:e(n)("alert-sync-level"),type:v.value!=null?"success":"error",closable:!1},null,8,["title","type"]),y[5]||(y[5]=te("br",null,null,-1))],64)):K("",!0),d(e(va),{loading:"true",border:!0},{default:g(()=>[s.value?(u(),M(e(R),{key:0,label:e(n)("sync-level"),span:3},{default:g(()=>[d(e(Fe),{style:{"margin-left":"14px"},modelValue:k.value,"onUpdate:modelValue":y[0]||(y[0]=S=>k.value=S),min:1},null,8,["modelValue"])]),_:1},8,["label"])):K("",!0),d(e(R),{label:e(n)("item-info"),span:3},{default:g(()=>[x(h(a.recipeInfo.item_name)+" ",1),a.recipeInfo.item_amount?(u(),I(Z,{key:0},[x(" × "+h(a.recipeInfo.item_amount),1)],64)):K("",!0)]),_:1},8,["label"]),d(e(R),{label:e(n)("recipe-id")},{default:g(()=>[x(h(a.recipeInfo.id),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("recipe-level")},{default:g(()=>[x(h(E.value.rlv.id),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("level")},{default:g(()=>[x(h(E.value.job_level),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("difficulty")},{default:g(()=>[x(h(E.value.difficulty),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("quality")},{default:g(()=>[x(h(E.value.quality),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("durability")},{default:g(()=>[x(h(E.value.durability),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("conditions"),span:3},{default:g(()=>[te("div",Ya,[(u(!0),I(Z,null,se(Object.values(e(Pa)),(S,B)=>(u(),I(Z,null,[E.value.conditions_flag&1<<B?(u(),M(e(ya),{key:0,type:"info"},{default:g(()=>[d(_a,{cond:S},null,8,["cond"])]),_:2},1024)):K("",!0)],64))),256))])]),_:1},8,["label"]),d(e(R),{label:e(n)("difficulty-factor")},{default:g(()=>[x(h(a.recipeInfo.difficulty_factor),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("quality-factor")},{default:g(()=>[x(h(a.recipeInfo.quality_factor),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("durability-factor")},{default:g(()=>[x(h(a.recipeInfo.durability_factor),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("type")},{default:g(()=>[x(h(a.recipeInfo.job),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("material-quality-factor")},{default:g(()=>[x(h(a.recipeInfo.material_quality_factor),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("can-hq")},{default:g(()=>[x(h(e(n)(String(a.recipeInfo.can_hq))),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("required-craftsmanship")},{default:g(()=>[x(h(a.recipeInfo.required_craftsmanship),1)]),_:1},8,["label"]),d(e(R),{label:e(n)("required-control")},{default:g(()=>[x(h(a.recipeInfo.required_control),1)]),_:1},8,["label"])]),_:1}),te("div",et,h(a.isNormalRecipe?e(n)("confirm-select",{itemName:a.recipeInfo.item_name}):e(n)("confirm-select2")),1)]),_:1},8,["modelValue","title","width"]))}});function we(a){const t=a.options||a;t.fluent=t.fluent||{},t.fluent["zh-CN"]=new le(`confirm-select = 开始制作“{ $itemName }”吗？
confirm-select2 = 这是一个高难度配方，请选择模式。
alert-sync-level = 这是一个等级同步配方，请输入同步等级
please-confirm = 请确认

cancel = 取消
confirm = 确认
designer-mode = 普通模式
simulator-mode = 高难模式
sync-level-item-name = { $itemName }（等级同步：{ $syncLevel }）

sync-level = 等级同步
type = 制作类型
level = 等级
recipe-id = 配方编号
item-info = 物品信息

true = 是
false = 否
can-hq = 存在HQ

required-craftsmanship = 最低{ craftsmanship }
required-control = 最低{ control }`)}function ke(a){const t=a.options||a;t.fluent=t.fluent||{},t.fluent["zh-TW"]=new le(`confirm-select = 開始製作“{ $itemName }”嗎？
confirm-select2 = 這是一個高難度配方，請選擇模式。
alert-sync-level = 這是一個等級同步配方，請輸入同步等級
please-confirm = 請確認

cancel = 取消
confirm = 確認
designer-mode = 普通模式
simulator-mode = 高難模式
sync-level-item-name = { $itemName }（等級同步：{ $syncLevel }）

sync-level = 等級同步
type = 製作職業
level = 等級
recipe-id = 配方編號
item-info = 物品資訊

true = 是
false = 否
can-hq = 存在HQ

required-craftsmanship = 最低{ craftsmanship }
required-control = 最低{ control }`)}function Ne(a){const t=a.options||a;t.fluent=t.fluent||{},t.fluent["en-US"]=new le(`confirm-select = Start crafting "{ $itemName }"?
confirm-select2 = This is a hard recipe. Please make a choice.
please-confirm = Please confirm

cancel = Cancel
confirm = Confirm
designer-mode = Normal Mode
simulator-mode = Simulator Mode
sync-level-item-name = { $itemName } (Lv. { $syncLevel })

type = Crafting Type
level = Level
recipe-id = Recipe ID
item-info = Item info
conditions = Conditions
true = True
false = False
can-hq = Can be HQ
required-craftsmanship = Required { craftsmanship }
required-control = Required { control }`)}typeof we=="function"&&we(ge);typeof ke=="function"&&ke(ge);typeof Ne=="function"&&Ne(ge);const tt=Ve(ge,[["__scopeId","data-v-9b18d32e"]]),nt={class:"container"},lt=200,me=j({__name:"RecipePanel",emits:["setTitle"],setup(a,{emit:t}){const o=t;Ye(()=>o("setTitle","select-recipe"));const n=Ue(),m=qe(),{$t:c}=Re(),w=z(""),P=ea({Page:1,PageTotal:1}),k=z(),s=z([]),C=z(!1),v=Me("screen and (max-width: 500px)"),E=z(),D=z(),V=z([]),b=z();async function y(){const _=await n.getDataSource();E.value=void 0,V.value=await _.craftTypeList()}let S=null;async function B(_,p,O){let W=setTimeout(()=>C.value=!0,200);try{let f=_.recipeTable(p,O,b.value,E.value,D.value?D.value*10-9:void 0,D.value?D.value*10:void 0);S=f;let{results:re,totalPages:Oe,next:Ke}=await f;S==f&&(s.value=re,P.PageTotal=Oe,S=null,k.value=Ke)}catch(f){oe.error(String(f))}finally{clearTimeout(W),C.value=!1}}async function X(){if(k.value==null)return;let _=setTimeout(()=>C.value=!0,20);try{const p=k.value();S=p;let{results:O,totalPages:W,next:f}=await p;S==p&&(s.value=s.value.concat(O),P.PageTotal=W,S=null,k.value=f)}catch(p){oe.error(String(p))}finally{clearTimeout(_),C.value=!1}}let r=null;J(w,async _=>{const p=await n.getDataSource();switch(r!=null&&clearTimeout(r),p.sourceType){case _e.Realtime:B(p,P.Page,_);break;case _e.RemoteRealtime:r=setTimeout(()=>{P.Page=1,B(p,P.Page,_),r=null},lt);break}}),J(()=>P.Page,async _=>{const p=await n.getDataSource();await B(p,_,w.value)});async function l(){const _=await n.getDataSource(),p=P.Page,O=w.value;P.Page=1,await B(_,p,O)}aa(async()=>{l(),y()}),J(()=>[n.dataSource,n.dataSourceLang],()=>{l(),y()}),ta(()=>{const _=m.currentRoute.value.query.recipeId;_!==void 0&&Y(Number(_))});const i=z(!1),N=z(),T=z(),q=z(),H=z(),L=$(()=>N.value?.conditions_flag===15);async function F(_){try{C.value=!0;const f=await n.getDataSource();var[p,O,W]=await Promise.all([f.recipeLevelTable(_.rlv),f.itemInfo(_.item_id),(async()=>{if(f.recipeCollectableShopRefine!=null)try{return await f.recipeCollectableShopRefine(_.id)}catch(re){console.error("Failed to fatch recipe collectability",re);return}})()])}catch(f){oe.error(String(f));return}finally{C.value=!1}N.value=await Ae(p,_.difficulty_factor,_.quality_factor,_.durability_factor),T.value=_,q.value=O,H.value=W,i.value=!0}async function Y(_){const p=await n.getDataSource();if(p.recipeInfo==null){oe.error(c("datasource-unsupport-recipe-info"));return}try{C.value=!0;var O=await p.recipeInfo(_)}catch(W){oe.error(c("select-recipe-by-id-error",{err:String(W)})),C.value=!1;return}await F(O)}return(_,p)=>{const O=Ce("tnze-loading"),W=Ce("el-table-infinite-scroll");return u(),I("div",nt,[N.value&&T.value&&q.value?(u(),M(tt,{key:0,modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=f=>i.value=f),recipe:N.value,"onUpdate:recipe":p[1]||(p[1]=f=>N.value=f),"recipe-info":T.value,"item-info":q.value,collectability:H.value,"is-normal-recipe":L.value},null,8,["modelValue","recipe","recipe-info","item-info","collectability","is-normal-recipe"])):K("",!0),d(e(je),{modelValue:w.value,"onUpdate:modelValue":p[3]||(p[3]=f=>w.value=f),onKeydown:$e(l,["enter"]),class:"search-input",placeholder:e(c)("search"),clearable:""},{append:g(()=>[d(e(de),{icon:e(ua),onClick:p[2]||(p[2]=f=>e(m).push("/recipe/customize"))},{default:g(()=>[x(h(e(c)("custom-recipe")),1)]),_:1},8,["icon"])]),_:1},8,["modelValue","placeholder"]),d(e(ha),{inline:!0},{default:g(()=>[d(e(ve),{label:e(c)("craft-type")},{default:g(()=>[d(e(ye),{modelValue:E.value,"onUpdate:modelValue":p[4]||(p[4]=f=>E.value=f),clearable:"","remote-method":y,style:{width:"180px"},onChange:l},{default:g(()=>[(u(!0),I(Z,null,se(V.value,({id:f,name:re})=>(u(),M(e(be),{key:f,value:f,label:re},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),d(e(ve),{label:e(c)("level")},{default:g(()=>[d(e(ye),{modelValue:D.value,"onUpdate:modelValue":p[5]||(p[5]=f=>D.value=f),style:{width:"100px"},onChange:l,clearable:""},{default:g(()=>[(u(),I(Z,null,se(10,f=>d(e(be),{key:f,value:f,label:`${f*10-9} ~ ${f*10}`},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),d(e(ve),{label:e(c)("recipe-level")},{default:g(()=>[d(e(Fe),{modelValue:b.value,"onUpdate:modelValue":p[6]||(p[6]=f=>b.value=f),style:{width:"100px"},clearable:"",min:1,max:799,step:1,"step-strictly":"",controls:!1,onChange:l},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),na((u(),M(e(ba),{"element-loading-text":e(c)("please-wait"),"highlight-current-row":"",onRowClick:F,data:s.value,height:"100%",style:{width:"100%"},"infinite-scroll-disabled":k.value==null,"infinite-scroll-immediate":!1,"infinite-scroll-distance":100},{default:g(()=>[d(e(ue),{prop:"id",label:"ID",width:e(v)?void 0:100},null,8,["width"]),d(e(ue),{prop:"rlv",label:e(c)("recipe-level"),width:e(v)?void 0:100},null,8,["label","width"]),d(e(ue),{prop:"job",label:e(c)("type"),width:e(v)?void 0:200},null,8,["label","width"]),d(e(ue),{prop:"item_name",label:e(c)("name")},null,8,["label"])]),_:1},8,["element-loading-text","data","infinite-scroll-disabled"])),[[O,C.value],[W,X]]),P.PageTotal>1?(u(),M(e(Xa),{key:1,layout:"prev, pager, next","current-page":P.Page,"onUpdate:currentPage":p[7]||(p[7]=f=>P.Page=f),"page-count":P.PageTotal},null,8,["current-page","page-count"])):K("",!0)])}}});function Te(a){const t=a.options||a;t.fluent=t.fluent||{},t.fluent["zh-CN"]=new le(`datasource-unsupport-recipe-info = 当前数据源不支持从外部选择配方
select-recipe-by-id-error = 获取配方信息失败：{ $err }，请尝试切换数据源

search = 键入以搜索
please-wait = 请稍等...

type = 类型
craft-type = 制作类型
level = 等级
name = 名称
can-hq = 存在HQ`)}function Ie(a){const t=a.options||a;t.fluent=t.fluent||{},t.fluent["zh-TW"]=new le(`datasource-unsupport-recipe-info = 當前資料來源不支援從外部選擇配方
select-recipe-by-id-error = 獲取配方資訊失敗：{ $err }，請嘗試切換資料來源

search = 鍵入以搜尋
please-wait = 請稍等...

type = 職業
craft-type = 製作職業
level = 等級
name = 名稱
can-hq = 存在HQ`)}function xe(a){const t=a.options||a;t.fluent=t.fluent||{},t.fluent["en-US"]=new le(`datasource-unsupport-recipe-info = Current data-source doesn't support choice recipe from external pages
select-recipe-by-id-error = Error fetching recipe data: { $err }. Please try choosing another DataSource

search = Search
please-wait = Please wait...

type = Type
craft-type = Craft Type
level = Level
name = Name
can-hq = Can HQ`)}typeof Te=="function"&&Te(me);typeof Ie=="function"&&Ie(me);typeof xe=="function"&&xe(me);const xt=Ve(me,[["__scopeId","data-v-24b389d2"]]);export{xt as default};
//# sourceMappingURL=RecipePanel-CInrDKpy.js.map
