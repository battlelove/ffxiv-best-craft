import{e as ln,h as dn,w as gn,f as M,g as mn}from"./transform-CvFQN27r.js";class sn extends Map{constructor(r,a=hn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),r!=null)for(const[s,c]of r)this.set(s,c)}get(r){return super.get(un(this,r))}has(r){return super.has(un(this,r))}set(r,a){return super.set(yn(this,r),a)}delete(r){return super.delete(pn(this,r))}}function un({_intern:n,_key:r},a){const s=r(a);return n.has(s)?n.get(s):a}function yn({_intern:n,_key:r},a){const s=r(a);return n.has(s)?n.get(s):(n.set(s,a),a)}function pn({_intern:n,_key:r},a){const s=r(a);return n.has(s)&&(a=n.get(s),n.delete(s)),a}function hn(n){return n!==null&&typeof n=="object"?n.valueOf():n}const on=Symbol("implicit");function bn(){var n=new sn,r=[],a=[],s=on;function c(l){let o=n.get(l);if(o===void 0){if(s!==on)return s;n.set(l,o=r.push(l)-1)}return a[o%a.length]}return c.domain=function(l){if(!arguments.length)return r.slice();r=[],n=new sn;for(const o of l)n.has(o)||n.set(o,r.push(o)-1);return c},c.range=function(l){return arguments.length?(a=Array.from(l),c):a.slice()},c.unknown=function(l){return arguments.length?(s=l,c):s},c.copy=function(){return bn(r,a).unknown(s)},ln.apply(c,arguments),c}function xn(n){for(var r=n.length/6|0,a=new Array(r),s=0;s<r;)a[s]="#"+n.slice(s*6,++s*6);return a}const An=n=>dn(n[n.length-1]);var wn=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(xn);An(wn);const fn=Math.abs,A=Math.atan2,I=Math.cos,vn=Math.max,rn=Math.min,N=Math.sin,Q=Math.sqrt,T=1e-12,U=Math.PI,X=U/2,K=2*U;function Mn(n){return n>1?0:n<-1?U:Math.acos(n)}function cn(n){return n>=1?X:n<=-1?-X:Math.asin(n)}function kn(n){return n.innerRadius}function Rn(n){return n.outerRadius}function Tn(n){return n.startAngle}function Dn(n){return n.endAngle}function Pn(n){return n&&n.padAngle}function On(n,r,a,s,c,l,o,e){var d=a-n,i=s-r,t=o-c,w=e-l,f=w*d-t*i;if(!(f*f<T))return f=(t*(r-l)-w*(n-c))/f,[n+f*d,r+f*i]}function H(n,r,a,s,c,l,o){var e=n-a,d=r-s,i=(o?l:-l)/Q(e*e+d*d),t=i*d,w=-i*e,f=n+t,g=r+w,p=a+t,h=s+w,O=(f+p)/2,y=(g+h)/2,v=p-f,x=h-g,b=v*v+x*x,k=c-l,R=f*h-p*g,V=(x<0?-1:1)*Q(vn(0,k*k*b-R*R)),j=(R*x-v*V)/b,z=(-R*v-x*V)/b,W=(R*x+v*V)/b,D=(-R*v+x*V)/b,P=j-O,u=z-y,m=W-O,C=D-y;return P*P+u*u>m*m+C*C&&(j=W,z=D),{cx:j,cy:z,x01:-t,y01:-w,x11:j*(c/k-1),y11:z*(c/k-1)}}function Vn(){var n=kn,r=Rn,a=M(0),s=null,c=Tn,l=Dn,o=Pn,e=null,d=gn(i);function i(){var t,w,f=+n.apply(this,arguments),g=+r.apply(this,arguments),p=c.apply(this,arguments)-X,h=l.apply(this,arguments)-X,O=fn(h-p),y=h>p;if(e||(e=t=d()),g<f&&(w=g,g=f,f=w),!(g>T))e.moveTo(0,0);else if(O>K-T)e.moveTo(g*I(p),g*N(p)),e.arc(0,0,g,p,h,!y),f>T&&(e.moveTo(f*I(h),f*N(h)),e.arc(0,0,f,h,p,y));else{var v=p,x=h,b=p,k=h,R=O,V=O,j=o.apply(this,arguments)/2,z=j>T&&(s?+s.apply(this,arguments):Q(f*f+g*g)),W=rn(fn(g-f)/2,+a.apply(this,arguments)),D=W,P=W,u,m;if(z>T){var C=cn(z/f*N(j)),q=cn(z/g*N(j));(R-=C*2)>T?(C*=y?1:-1,b+=C,k-=C):(R=0,b=k=(p+h)/2),(V-=q*2)>T?(q*=y?1:-1,v+=q,x-=q):(V=0,v=x=(p+h)/2)}var J=g*I(v),L=g*N(v),B=f*I(k),E=f*N(k);if(W>T){var F=g*I(x),G=g*N(x),Y=f*I(b),Z=f*N(b),S;if(O<U)if(S=On(J,L,Y,Z,F,G,B,E)){var $=J-S[0],_=L-S[1],nn=F-S[0],en=G-S[1],tn=1/N(Mn(($*nn+_*en)/(Q($*$+_*_)*Q(nn*nn+en*en)))/2),an=Q(S[0]*S[0]+S[1]*S[1]);D=rn(W,(f-an)/(tn-1)),P=rn(W,(g-an)/(tn+1))}else D=P=0}V>T?P>T?(u=H(Y,Z,J,L,g,P,y),m=H(F,G,B,E,g,P,y),e.moveTo(u.cx+u.x01,u.cy+u.y01),P<W?e.arc(u.cx,u.cy,P,A(u.y01,u.x01),A(m.y01,m.x01),!y):(e.arc(u.cx,u.cy,P,A(u.y01,u.x01),A(u.y11,u.x11),!y),e.arc(0,0,g,A(u.cy+u.y11,u.cx+u.x11),A(m.cy+m.y11,m.cx+m.x11),!y),e.arc(m.cx,m.cy,P,A(m.y11,m.x11),A(m.y01,m.x01),!y))):(e.moveTo(J,L),e.arc(0,0,g,v,x,!y)):e.moveTo(J,L),!(f>T)||!(R>T)?e.lineTo(B,E):D>T?(u=H(B,E,F,G,f,-D,y),m=H(J,L,Y,Z,f,-D,y),e.lineTo(u.cx+u.x01,u.cy+u.y01),D<W?e.arc(u.cx,u.cy,D,A(u.y01,u.x01),A(m.y01,m.x01),!y):(e.arc(u.cx,u.cy,D,A(u.y01,u.x01),A(u.y11,u.x11),!y),e.arc(0,0,f,A(u.cy+u.y11,u.cx+u.x11),A(m.cy+m.y11,m.cx+m.x11),y),e.arc(m.cx,m.cy,D,A(m.y11,m.x11),A(m.y01,m.x01),!y))):e.arc(0,0,f,k,b,y)}if(e.closePath(),t)return e=null,t+""||null}return i.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,w=(+c.apply(this,arguments)+ +l.apply(this,arguments))/2-U/2;return[I(w)*t,N(w)*t]},i.innerRadius=function(t){return arguments.length?(n=typeof t=="function"?t:M(+t),i):n},i.outerRadius=function(t){return arguments.length?(r=typeof t=="function"?t:M(+t),i):r},i.cornerRadius=function(t){return arguments.length?(a=typeof t=="function"?t:M(+t),i):a},i.padRadius=function(t){return arguments.length?(s=t==null?null:typeof t=="function"?t:M(+t),i):s},i.startAngle=function(t){return arguments.length?(c=typeof t=="function"?t:M(+t),i):c},i.endAngle=function(t){return arguments.length?(l=typeof t=="function"?t:M(+t),i):l},i.padAngle=function(t){return arguments.length?(o=typeof t=="function"?t:M(+t),i):o},i.context=function(t){return arguments.length?(e=t??null,i):e},i}function Wn(n,r){return r<n?-1:r>n?1:r>=n?0:NaN}function Nn(n){return n}function jn(){var n=Nn,r=Wn,a=null,s=M(0),c=M(K),l=M(0);function o(e){var d,i=(e=mn(e)).length,t,w,f=0,g=new Array(i),p=new Array(i),h=+s.apply(this,arguments),O=Math.min(K,Math.max(-K,c.apply(this,arguments)-h)),y,v=Math.min(Math.abs(O)/i,l.apply(this,arguments)),x=v*(O<0?-1:1),b;for(d=0;d<i;++d)(b=p[g[d]=d]=+n(e[d],d,e))>0&&(f+=b);for(r!=null?g.sort(function(k,R){return r(p[k],p[R])}):a!=null&&g.sort(function(k,R){return a(e[k],e[R])}),d=0,w=f?(O-i*x)/f:0;d<i;++d,h=y)t=g[d],b=p[t],y=h+(b>0?b*w:0)+x,p[t]={data:e[t],index:d,value:b,startAngle:h,endAngle:y,padAngle:v};return p}return o.value=function(e){return arguments.length?(n=typeof e=="function"?e:M(+e),o):n},o.sortValues=function(e){return arguments.length?(r=e,a=null,o):r},o.sort=function(e){return arguments.length?(a=e,r=null,o):a},o.startAngle=function(e){return arguments.length?(s=typeof e=="function"?e:M(+e),o):s},o.endAngle=function(e){return arguments.length?(c=typeof e=="function"?e:M(+e),o):c},o.padAngle=function(e){return arguments.length?(l=typeof e=="function"?e:M(+e),o):l},o}async function zn(n,r,a,s){const c={status:n,actions:r,n:a,ignoreErrors:s};return new Promise((l,o)=>{const e=new Worker(new URL("/ffxiv-best-craft/assets/AnalyzerWorker-DTQDvDCV.js",import.meta.url),{type:"module"});e.onmessage=d=>{d.data.error==null?l(d.data):o(d.data.error)},e.onerror=d=>o(d),e.postMessage({name:"rand_simulation",args:JSON.stringify(c)})})}async function Cn(n,r,a,s,c){const l={status:n,actions:r,n:a,ignoreErrors:s,collectablesShopRefine:c};return new Promise((o,e)=>{const d=new Worker(new URL("/ffxiv-best-craft/assets/AnalyzerWorker-DTQDvDCV.js",import.meta.url),{type:"module"});d.onmessage=i=>{i.data.error==null?o(i.data):e(i.data.error)},d.onerror=i=>e(i),d.postMessage({name:"rand_collectables_simulation",args:JSON.stringify(l)})})}async function In(n,r){const a={status:n,actions:r};return new Promise((s,c)=>{const l=new Worker(new URL("/ffxiv-best-craft/assets/AnalyzerWorker-DTQDvDCV.js",import.meta.url),{type:"module"});l.onmessage=o=>{o.data.error==null?s(o.data):c(o.data.error)},l.onerror=o=>c(o),l.postMessage({name:"calc_attributes_scope",args:JSON.stringify(a)})})}export{Vn as a,Cn as b,In as c,bn as o,jn as p,zn as r,wn as s};
//# sourceMappingURL=Analyzer-C5Rqy3DH.js.map
